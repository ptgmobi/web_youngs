var a=Object.defineProperty,e=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(e,l,t)=>l in e?a(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t;import{d as n,a as r,z as s,aj as i,b as u,r as c,h as d,q as p,g as b,f as m,u as f,x as v,P as h,Q as _,o as g,F as y,i as V,t as w,y as D,c as x}from"./vendor.abf78dba.js";import{g as U,h as k,i as O,j as P}from"./fenix.68ead3e8.js";import{P as j}from"./index.6d5d7aea.js";import{m as C}from"./message.9010e90c.js";import"./index.af8115b7.js";const S={class:"control-box w100 mb-10"},A={class:"mb-10"},Q=D("Offer Create"),z={class:"flex jc-start flex-wrap w100"},E={class:"flex"},T={class:"flex"},F=D("查询"),I={class:"body-box mt-10"},N=D(". "),B=D(". "),M=D(": "),R=p("span",null,"cap_daily_cost",-1),Z={class:"w100 flex"},$=n({setup(a){r(!1);const n=s({searchData:{adv_status:void 0,status:void 0,cvr_status:void 0,platform:void 0,attribute_provider:"",pub_name:"",offer_id:"",adv_offer:"",pkg:"",title:"",channel:"",country:"",channel_type:void 0},tableData:[],options:{status:[{value:1,label:"开"},{value:2,label:"关"}],platform:[{value:1,label:"Android"},{value:2,label:"iOS"}],attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],pub:[{id:"",pub_name:""}],channel_type:[{value:"1",label:"BUZZ"},{value:"2",label:"SDK"}]},pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});i(n,"tableData");const D=({row:a})=>`/fenix/offer/edit/${a.id}`,$=async()=>{const{data:a}=await O();n.options.pub=a},q=async()=>{let a={page:n.pagination.listQuery.page,page_size:n.pagination.listQuery.limit};const r=((a,n)=>{for(var r in n||(n={}))l.call(n,r)&&o(a,r,n[r]);if(e)for(var r of e(n))t.call(n,r)&&o(a,r,n[r]);return a})({},n.searchData);for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const l=r[e];l&&(a[e]=l)}const s=await U(a);n.tableData=s.data.data,n.pagination.total=s.data.paging.count},J=()=>{q()};return u((()=>{(async()=>{Promise.all([$()])})(),q()})),(a,e)=>{const l=c("el-button"),t=c("router-link"),o=c("el-option"),r=c("el-select"),s=c("el-form-item"),i=c("el-input"),u=c("el-form"),U=c("el-table-column"),O=c("el-switch"),$=c("el-table");return g(),d("div",null,[p("div",S,[p("div",A,[b(t,{to:"/fenix/offer/create"},{default:m((()=>[b(l,{type:"primary"},{default:m((()=>[Q])),_:1})])),_:1})]),b(u,{inline:!0,modelValue:f(n).searchData,"onUpdate:modelValue":e[12]||(e[12]=a=>f(n).searchData=a),class:"flex jc-between w100 ai-end"},{default:m((()=>[p("div",z,[b(s,{label:""},{default:m((()=>[b(r,{modelValue:f(n).searchData.adv_status,"onUpdate:modelValue":e[0]||(e[0]=a=>f(n).searchData.adv_status=a),clearable:"",class:"search-con",placeholder:"Adv Status"},{default:m((()=>[(g(!0),d(y,null,V(f(n).options.status,(a=>(g(),x(o,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(s,{label:""},{default:m((()=>[b(r,{modelValue:f(n).searchData.status,"onUpdate:modelValue":e[1]||(e[1]=a=>f(n).searchData.status=a),clearable:"",class:"search-con",placeholder:"Status"},{default:m((()=>[(g(!0),d(y,null,V(f(n).options.status,(a=>(g(),x(o,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),v(' <el-form-item label="">\n            <el-select v-model="state.searchData.cvr_status" clearable class="search-con" placeholder="Cvr Status">\n              <el-option\n                v-for="item in state.options.status"\n                :key="item.value"\n                :label="item.label"\n                :value="item.value"\n              />\n            </el-select>\n          </el-form-item> '),b(s,{label:""},{default:m((()=>[b(r,{modelValue:f(n).searchData.platform,"onUpdate:modelValue":e[2]||(e[2]=a=>f(n).searchData.platform=a),clearable:"",class:"search-con",placeholder:"Platform"},{default:m((()=>[(g(!0),d(y,null,V(f(n).options.platform,(a=>(g(),x(o,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(s,{label:""},{default:m((()=>[b(r,{modelValue:f(n).searchData.attribute_provider,"onUpdate:modelValue":e[3]||(e[3]=a=>f(n).searchData.attribute_provider=a),clearable:"",class:"search-con",placeholder:"Attribute Provider"},{default:m((()=>[(g(!0),d(y,null,V(f(n).options.attribute_provider,(a=>(g(),x(o,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(s,{label:""},{default:m((()=>[b(r,{modelValue:f(n).searchData.pub_name,"onUpdate:modelValue":e[4]||(e[4]=a=>f(n).searchData.pub_name=a),clearable:"",class:"search-con",placeholder:"Pub Name"},{default:m((()=>[(g(!0),d(y,null,V(f(n).options.pub,(a=>(g(),x(o,{key:a.id,label:a.pub_name,value:a.pub_name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),b(s,{label:""},{default:m((()=>[b(i,{placeholder:"Offer ID",modelValue:f(n).searchData.offer_id,"onUpdate:modelValue":e[5]||(e[5]=a=>f(n).searchData.offer_id=a),class:"search-con"},null,8,["modelValue"])])),_:1}),b(s,{label:""},{default:m((()=>[b(i,{placeholder:"Adv Offer",modelValue:f(n).searchData.adv_offer,"onUpdate:modelValue":e[6]||(e[6]=a=>f(n).searchData.adv_offer=a),class:"search-con"},null,8,["modelValue"])])),_:1}),b(s,{label:""},{default:m((()=>[b(i,{placeholder:"Pachage Name",modelValue:f(n).searchData.pkg,"onUpdate:modelValue":e[7]||(e[7]=a=>f(n).searchData.pkg=a),class:"search-con"},null,8,["modelValue"])])),_:1}),b(s,{label:""},{default:m((()=>[b(i,{placeholder:"Offer Title",modelValue:f(n).searchData.title,"onUpdate:modelValue":e[8]||(e[8]=a=>f(n).searchData.title=a),class:"search-con"},null,8,["modelValue"])])),_:1}),b(s,{label:""},{default:m((()=>[b(i,{placeholder:"Channel",modelValue:f(n).searchData.channel,"onUpdate:modelValue":e[9]||(e[9]=a=>f(n).searchData.channel=a),class:"search-con"},null,8,["modelValue"])])),_:1}),b(s,{label:""},{default:m((()=>[b(i,{placeholder:"Country",modelValue:f(n).searchData.country,"onUpdate:modelValue":e[10]||(e[10]=a=>f(n).searchData.country=a),class:"search-con"},null,8,["modelValue"])])),_:1}),b(s,{label:""},{default:m((()=>[b(r,{modelValue:f(n).searchData.channel_type,"onUpdate:modelValue":e[11]||(e[11]=a=>f(n).searchData.channel_type=a),clearable:"",class:"search-con",placeholder:"Channel Type"},{default:m((()=>[(g(!0),d(y,null,V(f(n).options.channel_type,(a=>(g(),x(o,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),p("div",E,[b(s,{class:"mr-0",style:{"margin-right":"0px"}},{default:m((()=>[p("div",T,[b(l,{type:"primary",onClick:J},{default:m((()=>[F])),_:1}),v(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),v(' <el-input placeholder="请输入内容" v-model="searchData.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),v(" table "),p("div",I,[b($,{data:f(n).tableData,style:{width:"100%"},border:""},{default:m((()=>[b(U,{prop:"id",label:"ID",align:"center"}),b(U,{prop:"adv_offer",label:"Adv Offer",align:"center"}),b(U,{prop:"channel",label:"Channel",align:"center"}),b(U,{prop:"attribute_provider",label:"Attribute Provider",align:"center"}),b(U,{prop:"pkg",label:"Package Name",align:"center"}),b(U,{prop:"title",label:"Offer Title",align:"center"}),b(U,{prop:"pid",label:"Pid",align:"center"}),b(U,{label:"Platform",align:"center"},{default:m((a=>[p("div",null,[p("span",null,w(1===a.row.platform?"Android":"iOS"),1)])])),_:1}),b(U,{prop:"country",label:"Country",align:"center"}),b(U,{prop:"revenue",label:"Revenue",align:"center"}),b(U,{label:"Adv Status",align:"center"},{default:m((a=>[p("div",null,[p("span",null,w(1===a.row.adv_status?"开":"关"),1)])])),_:1}),b(U,{prop:"click_w",label:"Click*w",align:"center"}),b(U,{prop:"installs",label:"Installs",align:"center"}),b(U,{prop:"cvr_w",label:"Cvr*w",align:"center"}),b(U,{label:"Target Cvr*w",align:"center",width:"200px"},{default:m((a=>[b(i,{modelValue:a.row.target_cvr,"onUpdate:modelValue":e=>a.row.target_cvr=e,placeholder:"Please input",class:"input-with-select"},{append:m((()=>[b(l,{icon:"Edit"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),b(U,{label:"Traffic Data",align:"center",width:"200px"},{default:m((a=>[a.row.traffic?(g(!0),d(y,{key:0},V(JSON.parse(a.row.traffic),(a=>(g(),d("div",null,[p("span",null,w(a.pub),1),N,p("span",null,w(a.payout),1),B,p("span",null,w(a.cap_daily),1),M,R])))),256)):v("v-if",!0)])),_:1}),b(U,{label:"Operation",align:"center",width:"200px"},{default:m((a=>[b(t,{to:D(a)},{default:m((()=>[b(l,{class:"cp mr-10",type:"primary",icon:"Edit",circle:""})])),_:2},1032,["to"]),b(O,{modelValue:a.row.status,"onUpdate:modelValue":e=>a.row.status=e,"active-value":1,"inactive-value":2,class:"mr-10",onChange:e=>(async({row:a})=>{const e={id:a.id,status:a.status},l=await k(e);C(l)||(a.status=1===a.status?2:1)})(a)},null,8,["modelValue","onUpdate:modelValue","onChange"]),b(l,{type:"danger",icon:"Delete",circle:"",onClick:e=>(async a=>{const{row:e}=a,l=await P(e.id);C(l)&&n.tableData.splice(a.$index,1)})(a)},null,8,["onClick"])])),_:1}),b(U,{label:"Record",align:"center"},{default:m((a=>[b(l,{icon:"View",circle:""})])),_:1}),b(U,{label:"Comment",align:"center",width:"200px"},{default:m((a=>[b(i,{modelValue:a.row.description,"onUpdate:modelValue":e=>a.row.description=e,placeholder:"Please input",class:"input-with-select"},{append:m((()=>[b(l,{icon:"Edit"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"])]),v(" 分页 "),p("div",Z,[h(b(f(j),{total:f(n).pagination.total,"page-sizes":f(n).pagination.pageSizes,page:f(n).pagination.listQuery.page,"onUpdate:page":e[13]||(e[13]=a=>f(n).pagination.listQuery.page=a),limit:f(n).pagination.listQuery.limit,"onUpdate:limit":e[14]||(e[14]=a=>f(n).pagination.listQuery.limit=a),onPagination:q},null,8,["total","page-sizes","page","limit"]),[[_,f(n).pagination.total]])])])}}});export{$ as default};
