import{d as e,af as a,z as l,b as t,r as o,ag as r,h as i,q as n,x as u,g as d,f as s,u as c,M as p,N as m,o as f,F as b,i as h,y as _,t as v,p as y,m as g,E as V,c as w}from"./vendor.107e8656.js";import{P as k}from"./index.9d466a4b.js";import{A as x,a as F,b as U,c as C}from"./buzz.7b378acb.js";import{m as D}from"./message.96b00d49.js";import{_ as j}from"./lodash.bd96a4e5.js";import{_ as A}from"./index.136e6deb.js";const z=e=>(y("data-v-6b18779e"),e=e(),g(),e),P={class:"controlBox w100 mb-10"},O={class:"mb-10"},Q=_("Offer Create"),S={class:"flex jc-start flex-wrap w100"},N={class:"flex"},B={class:"flex"},I=_("查询"),M={class:"flex jc-around"},$={class:"flex jc-around"},E=z((()=>n("span",null,"-",-1))),T={class:"flex mt-10"},q={class:"flex jc-around"},L={class:"w100 flex"};var G=A(e({setup(e){const y=a({attribute_provider:[],platform:[],package_name:"",channel:"",id:"",offer_title:"",country:"",pid:""});let g=l({dialogVisible:!1,cache:{item:{},device:{}},searchForm:y.value,useData:y.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((e,a)=>{const l=5*a/100;return{value:l.toFixed(2),label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((e,a)=>{const l=(5*a+5)/100;return{value:l.toFixed(2),label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const A=()=>{g.useData=j.cloneDeep(g.searchForm),z()},z=async()=>{g.loading=!0;const e={page:g.pagination.listQuery.page,page_size:g.pagination.listQuery.limit,attribute_provider:g.useData.attribute_provider,platform:g.useData.platform,pkg_name:g.useData.package_name,channel:g.useData.channel,offer_id:g.useData.id,title:g.useData.offer_title,country:g.useData.country,tracking_link:g.useData.pid},a=await x(e),{data:l}=a;g.list=null==l?void 0:l.data,g.pagination.total=Number(l.count),g.loading=!1};return t((()=>{A()})),(e,a)=>{const l=o("el-button"),t=o("router-link"),y=o("el-option"),x=o("el-select"),j=o("el-form-item"),G=o("el-input"),H=o("el-form"),J=o("el-table-column"),K=o("el-switch"),R=o("el-table"),W=r("loading");return f(),i("div",null,[n("div",P,[n("div",O,[u(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),d(t,{to:"/adnetwork/buzz-create"},{default:s((()=>[d(l,{type:"primary"},{default:s((()=>[Q])),_:1})])),_:1})]),d(H,{inline:!0,modelValue:c(g).searchForm,"onUpdate:modelValue":a[8]||(a[8]=e=>c(g).searchForm=e),class:"flex jc-between w100 ai-end"},{default:s((()=>[n("div",S,[d(j,{label:""},{default:s((()=>[d(x,{modelValue:c(g).searchForm.attribute_provider,"onUpdate:modelValue":a[0]||(a[0]=e=>c(g).searchForm.attribute_provider=e),clearable:"",class:"search-con",placeholder:"Attribute Provider",style:{"min-width":"140px"}},{default:s((()=>[(f(!0),i(b,null,h(c(g).options.attribute_provider,(e=>(f(),w(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(j,{label:""},{default:s((()=>[d(x,{modelValue:c(g).searchForm.platform,"onUpdate:modelValue":a[1]||(a[1]=e=>c(g).searchForm.platform=e),clearable:"",class:"search-con",placeholder:"Platform",style:{"min-width":"95px"}},{default:s((()=>[(f(!0),i(b,null,h(c(g).options.platform,(e=>(f(),w(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(j,{label:""},{default:s((()=>[d(G,{placeholder:"Package Name",modelValue:c(g).searchForm.package_name,"onUpdate:modelValue":a[2]||(a[2]=e=>c(g).searchForm.package_name=e),class:"search-con",style:{"min-width":"120px"}},null,8,["modelValue"])])),_:1}),d(j,{label:""},{default:s((()=>[d(G,{placeholder:"Channel",modelValue:c(g).searchForm.channel,"onUpdate:modelValue":a[3]||(a[3]=e=>c(g).searchForm.channel=e),class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),d(j,{label:""},{default:s((()=>[d(G,{placeholder:"ID",modelValue:c(g).searchForm.id,"onUpdate:modelValue":a[4]||(a[4]=e=>c(g).searchForm.id=e),class:"search-con"},null,8,["modelValue"])])),_:1}),d(j,{label:""},{default:s((()=>[d(G,{placeholder:"Offer Title",modelValue:c(g).searchForm.offer_title,"onUpdate:modelValue":a[5]||(a[5]=e=>c(g).searchForm.offer_title=e),class:"search-con",style:{"min-width":"90px"}},null,8,["modelValue"])])),_:1}),d(j,{label:""},{default:s((()=>[d(G,{placeholder:"Country",modelValue:c(g).searchForm.country,"onUpdate:modelValue":a[6]||(a[6]=e=>c(g).searchForm.country=e),class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),d(j,{label:""},{default:s((()=>[d(G,{placeholder:"Pid",modelValue:c(g).searchForm.pid,"onUpdate:modelValue":a[7]||(a[7]=e=>c(g).searchForm.pid=e),class:"search-con"},null,8,["modelValue"])])),_:1})]),n("div",N,[d(j,{class:"mr-0",style:{"margin-right":"0px"}},{default:s((()=>[n("div",B,[d(l,{type:"primary",onClick:A},{default:s((()=>[I])),_:1}),u(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),u(' <el-input placeholder="请输入内容" v-model="data.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="el-icon-search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),u(" table "),p(d(R,{center:"",data:c(g).list,style:{width:"100%"},border:""},{default:s((()=>[d(J,{prop:"offer_id",label:"ID"}),d(J,{prop:"channel",label:"Channel"}),d(J,{prop:"pkg_name",label:"Package Name"}),d(J,{prop:"title",label:"Offer Title",width:"120"}),d(J,{prop:"attribute_provider",label:"Attribute Provider"}),d(J,{prop:"pid",label:"Pid"}),d(J,{prop:"platform",label:"Platform"},{default:s((e=>[_(v("1"===e.row.platform?"Android":"iOS"),1)])),_:1}),d(J,{prop:"country",label:"Country"}),d(J,{prop:"payout",label:"Payout"}),d(J,{label:"Click Limitation(w)",width:"150"},{default:s((e=>[n("div",M,[d(G,{modelValue:e.row.max_clk_num,"onUpdate:modelValue":a=>e.row.max_clk_num=a,placeholder:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),d(l,{class:"cp icon ml-10",type:"primary",icon:"el-icon-edit",circle:"",onClick:a=>(async e=>{let a={id:e.id,max_clk_num:e.max_clk_num},l=await F(a);D(l)})(e.row)},null,8,["onClick"])])])),_:1}),d(J,{label:"Device Cutoff",width:"250"},{default:s((e=>{return[n("div",$,[n("div",null,[n("div",null,[d(x,{class:"cutoff",modelValue:e.row.cutoff_start,"onUpdate:modelValue":a=>e.row.cutoff_start=a,filterable:"",placeholder:"start"},{default:s((()=>[(f(!0),i(b,null,h(c(g).options.cutoff_start,(e=>(f(),w(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),E,d(x,{class:"cutoff",modelValue:e.row.cutoff_end,"onUpdate:modelValue":a=>e.row.cutoff_end=a,filterable:"",placeholder:"end"},{default:s((()=>[(f(!0),i(b,null,h(c(g).options.cutoff_end,(e=>(f(),w(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])]),n("div",T,[n("span",null,v((a=e.row,(a.cutoff_end-a.cutoff_start)*a.device_num)),1)])]),d(l,{class:"cp icon ml-10",type:"primary",icon:"el-icon-edit",circle:"",onClick:a=>(async e=>{const a=e.cutoff_start,l=e.cutoff_end,t=e.id;if(a<l){const e={start:a,end:l,id:t},o=await U(e);D(o)}else V({message:"start必须小于end",type:"error",duration:2e3})})(e.row)},null,8,["onClick"])])];var a})),_:1}),d(J,{width:"100",label:"Operation"},{default:s((e=>{return[n("div",q,[d(t,{to:(a=e.row,`/adnetwork/buzz-edit/${a.id}`)},{default:s((()=>[d(l,{class:"cp icon mr-10",type:"primary",icon:"el-icon-edit",circle:""})])),_:2},1032,["to"]),u(" <el-button class='cp icon mr-10' type=\"primary\" icon=\"el-icon-edit\" circle @click='editFun(scope.row)'></el-button> "),d(K,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":"1","inactive-value":"2",onChange:a=>(async e=>{let a={id:e.id,status:e.status};const l=await C(a);D(l)})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])];var a})),_:1})])),_:1},8,["data"]),[[W,c(g).loading]]),u(" 分页 "),n("div",L,[p(d(c(k),{total:c(g).pagination.total,"page-sizes":c(g).pagination.pageSizes,page:c(g).pagination.listQuery.page,"onUpdate:page":a[9]||(a[9]=e=>c(g).pagination.listQuery.page=e),limit:c(g).pagination.listQuery.limit,"onUpdate:limit":a[10]||(a[10]=e=>c(g).pagination.listQuery.limit=e),onPagination:z},null,8,["total","page-sizes","page","limit"]),[[m,c(g).pagination.total]])])])}}}),[["__scopeId","data-v-6b18779e"]]);export{G as default};
