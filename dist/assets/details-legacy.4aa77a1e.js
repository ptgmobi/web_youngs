!function(){function e(e,l,r,t,n,a,u){try{var o=e[a](u),i=o.value}catch(c){return void r(c)}o.done?l(i):Promise.resolve(i).then(t,n)}function l(l){return function(){var r=this,t=arguments;return new Promise((function(n,a){var u=l.apply(r,t);function o(l){e(u,n,a,o,i,"next",l)}function i(l){e(u,n,a,o,i,"throw",l)}o(void 0)}))}}System.register(["./vendor-legacy.d18a23a8.js","./lodash-legacy.bd7de89c.js","./fenix-legacy.e02504ca.js","./clipboard-legacy.d98819d3.js","./index-legacy.97ca28a2.js"],(function(e){"use strict";var r,t,n,a,u,o,i,c,s,d,f,p,m,v,_,b,g,h,y,V,k,F,w,x,P,U,C,j,S;return{setters:[function(e){r=e.d,t=e.z,n=e.a,a=e.w,u=e.r,o=e.o,i=e.h,c=e.q,s=e.g,d=e.f,f=e.F,p=e.i,m=e.c,v=e.u,_=e.x,b=e.y,g=e.N,h=e.b,y=e.s,V=e.ah,k=e.P,F=e.t,w=e.k},function(e){x=e._},function(e){P=e.g,U=e.h,C=e.i,j=e.j},function(e){S=e.c},function(){}],execute:function(){var q={class:"flex jc-end"},A=b("Add"),T={class:"flex"},R=b("Copy"),O=r({props:{list:{require:!0,default:[],type:Array}},emits:["kk","up"],setup:function(e,l){var r=l.emit,b=e,g=t({pub:[]}),h=n(b.list),y={pub:"",slotid:"",payout:void 0,cap_daily:void 0,pub_status:2,pub_tracking_link:""},V=function(){h.value.push(x.cloneDeep(y))};a((function(){return h.value}),(function(e,l){r("kk",e)}),{immediate:!0,deep:!0});return function(e,l){var r=u("el-button"),t=u("el-option"),n=u("el-select"),a=u("el-table-column"),b=u("el-input"),y=u("el-switch"),k=u("el-table");return o(),i("div",null,[c("div",q,[s(r,{type:"primary",onClick:V},{default:d((function(){return[A]})),_:1})]),s(k,{class:"mt-10",data:v(h),style:{width:"100%"},border:""},{default:d((function(){return[s(a,{label:"Pub Name",align:"center"},{default:d((function(e){return[s(n,{filterable:"",modelValue:e.row.pub,"onUpdate:modelValue":function(l){return e.row.pub=l},onChange:function(l){return function(e){e.row.pub_tracking_link="http://track.adsforward.com/api/track?offer=6011690&mid=95108831&pub_id={siteid}&gaid={gaid}&idfa={idfa}&click_id={clickid}&ip={ip}&ua={ua}&osv={osv}&lang={lang}"}(e)},clearable:"",placeholder:""},{default:d((function(){return[(o(!0),i(f,null,p(v(g).pub,(function(e){return o(),m(t,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),s(a,{label:"Payout",align:"center"},{default:d((function(e){return[s(b,{modelValue:e.row.payout,"onUpdate:modelValue":function(l){return e.row.payout=l},type:"number",min:"0",placeholder:"Please input",class:"input-with-select"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),s(a,{label:"Cap Daily",align:"center"},{default:d((function(e){return[s(b,{modelValue:e.row.cap_daily,"onUpdate:modelValue":function(l){return e.row.cap_daily=l},type:"number",min:"0",placeholder:"Please input",class:"input-with-select"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),s(a,{label:"Operation",align:"center",width:"180px"},{default:d((function(e){return[c("div",T,[s(r,{class:"mr-10",type:"danger",icon:"Delete",circle:"",onClick:function(l){return r=e.$index,void h.value.splice(r,1);var r}},null,8,["onClick"]),s(y,{modelValue:e.row.status,"onUpdate:modelValue":function(l){return e.row.status=l},"active-value":1,"inactive-value":2,class:"mr-10",onChange:function(l){e.row}},null,8,["modelValue","onUpdate:modelValue","onChange"]),e.row.pub_tracking_link?(o(),m(r,{key:0,class:"cp",type:"primary",onClick:function(l){return r=e.row.pub_tracking_link,void S(r);var r}},{default:d((function(){return[R]})),_:2},1032,["onClick"])):_("v-if",!0)])]})),_:1})]})),_:1},8,["data"])])}}}),D={class:"content-con flex column"},L={class:"flex jc-start ai-center form-one"},N=["textContent"],E={class:"flex jc-start ai-center form-one"},K=b("BUZZ"),M=b("SDK"),B={class:"flex jc-start ai-center form-one"},I={key:0},Z={key:1},$={class:"flex jc-start ai-center form-one"},z={class:"flex jc-start ai-center form-one"},G={class:"flex jc-start ai-center form-one"},H={class:"flex jc-start ai-center form-one"},J={class:"flex jc-start ai-center form-one"},Q={class:"form-one"},W={class:"flex jc-start ai-center form-one"},X={class:"flex jc-start ai-center form-one"},Y={class:"flex jc-start ai-center form-one"},ee={class:"flex jc-start ai-center form-one"},le={class:"flex jc-start ai-center form-one"},re={class:"flex jc-start ai-center form-one"},te={class:"flex jc-start ai-center form-one"},ne={class:"w100 flex"},ae=b("Save");e("default",r({setup:function(e){var r=g(),b=w().proxy,S="此项必填",q=n(!1),A=t({options:{channel:[],country:["a","b","c"],conversion_flow:[{value:"cpi",label:"CPI"},{value:"cpa",label:"CPA"}],platform:[{value:1,label:"Android"},{value:2,label:"iOS"}],site_type:[{value:"rule_sdkcvrlist",label:"匹配SDK CVR"},{value:"rule_pubredirect",label:"透传渠道ID"},{value:"rule_slotid",label:"渠道slotid"},{value:"rule_value",label:"固定值"}],attribute_provider:[{value:"appsflyer",label:"AppsFlyer"},{value:"branch",label:"Branch"},{value:"adjust",label:"Adjust"},{value:"singular",label:"Singular"},{value:"appmetrica",label:"AppMetrica"}]},rules:{no_required:[{required:!1}],channel:[{required:!0,message:S,trigger:["blur","change"]}],channel_type:[{required:!0,message:S,trigger:["blur","change"]}],status:[{required:!0,message:S,trigger:["blur","change"]}],title:[{required:!0,message:S,trigger:["blur","change"]}],pkg:[{required:!0,message:S,trigger:["blur","change"]}],platform:[{required:!0,message:S,trigger:["blur","change"]}],country:[{required:!0,message:S,trigger:["blur","change"]},{validator:function(e,l,r){0!==l.length?l.length>1?r(new Error("只能填选一个国家")):r(void 0):r(new Error(S))},trigger:["blur","change"]}],revenue:[{required:!0,message:S,trigger:["blur","change"]}],traffic:[{required:!1,validator:function(e,l,r){var t;0!==l.length&&(t=!0,l.map((function(e){for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var r=e[l];if(""===r||void 0===r){t=!1;break}}})),r(t?void 0:new Error("不允许有空值")))},trigger:["blur","change"]}],adv_tracking_link:[{required:!0,message:S,trigger:["blur","change"]}],site_type:[{required:!0,message:S,trigger:["blur","change"]}],site_value:[{required:!0,message:S,trigger:["blur","change"]}],is_s2s:[{required:!0,message:S,trigger:["blur","change"]}],s2s_tracking_link:[{required:!0,message:S,trigger:["blur","change"]}],app_url:[{required:!0,message:S,trigger:["blur","change"]}]},ruleForm:{id:void 0,offer:void 0,adv_offer:"",create_type:1,channel:"",channel_type:1,adv_status:1,conversion_flow:"",status:1,title:"",pkg:"",attribute_provider:"",pid:"",platform:1,country:[],revenue:void 0,traffic:[],adtype:38,update_date:"",adv_tracking_link:"",target_cvr:"",cvr_status:2,is_s2s:2,s2s_tracking_link:"",app_url:"",site_type:"rule_value",site_value:"",description:""}}),T=n(""),R=n(""),ue=function(){b.$refs.ruleForm.validate((function(e){if(!e)return!1}))},oe=function(){var e=l(regeneratorRuntime.mark((function e(){var l,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:200===(l=e.sent).code?(r=l.offer_id,A.ruleForm.offer=r):oe();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();h((function(){T.value=r.currentRoute.value.name,"fenix-offer-create"===T.value&&oe(),"fenix-offer-edit"===T.value&&(R.value=r.currentRoute.value.params.id)}));var ie=y((function(){return"rule_value"===A.ruleForm.site_type}));a((function(){return A.ruleForm.traffic}),(function(e,l){}),{immediate:!0,deep:!0});var ce=function(e){return A.ruleForm.traffic=x.cloneDeep(e),!0},se=function(){var e=l(regeneratorRuntime.mark((function e(){var l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,U();case 3:if(!(l=A.ruleForm.adv_offer)||!l.includes("_")){e.next=10;break}return e.next=8,C();case 8:e.next=13;break;case 10:return e.next=13,j();case 13:A.ruleForm.country=["a","c"];case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(e,l){var r=u("el-form-item"),t=u("el-button"),n=u("el-input"),a=u("el-option"),b=u("el-select"),g=u("el-radio"),h=u("el-radio-group"),y=u("el-switch"),w=u("el-form"),x=V("loading");return k((o(),i("div",null,[_(" form "),s(w,{enctype:"multipart/form-data",ref:function(e,l){l.ruleForm=e},rules:v(A).rules,model:v(A).ruleForm,"label-width":"240px","label-position":"right"},{default:d((function(){return[c("div",D,[_(" Offer "),s(r,{label:"Offer:",prop:"offer"},{default:d((function(){return[c("div",L,[c("span",{textContent:F(v(A).ruleForm.offer)},null,8,N)])]})),_:1}),_(" Adv Offer "),s(r,{label:"Adv Offer:",prop:"adv_offer"},{default:d((function(){return[c("div",E,[s(n,{modelValue:v(A).ruleForm.adv_offer,"onUpdate:modelValue":l[0]||(l[0]=function(e){return v(A).ruleForm.adv_offer=e}),placeholder:"Please input",class:"input-with-select"},{append:d((function(){return[s(t,{type:"primary",icon:"Search",onClick:se})]})),_:1},8,["modelValue"])])]})),_:1}),_(" Channel "),s(r,{label:"Channel:",prop:"channel"},{default:d((function(){return[s(b,{filterable:"",class:"form-one",modelValue:v(A).ruleForm.channel,"onUpdate:modelValue":l[1]||(l[1]=function(e){return v(A).ruleForm.channel=e}),clearable:"",placeholder:""},{default:d((function(){return[(o(!0),i(f,null,p(v(A).options.channel,(function(e){return o(),m(a,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),_(" Channel Type "),s(r,{label:"Channel Type:",prop:"channel_type"},{default:d((function(){return[s(h,{class:"form-one",modelValue:v(A).ruleForm.channel_type,"onUpdate:modelValue":l[2]||(l[2]=function(e){return v(A).ruleForm.channel_type=e})},{default:d((function(){return[s(g,{label:1},{default:d((function(){return[K]})),_:1}),s(g,{label:2},{default:d((function(){return[M]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),_(" Adv Status "),s(r,{label:"Adv Status:",prop:"adv_status"},{default:d((function(){return[c("div",B,[1===v(A).ruleForm.adv_status?(o(),i("span",I,"开")):_("v-if",!0),2===v(A).ruleForm.adv_status?(o(),i("span",Z,"关")):_("v-if",!0)])]})),_:1}),_(" conversion_flow "),s(r,{label:"Conversion Flow:",prop:"conversion_flow"},{default:d((function(){return[s(b,{filterable:"",class:"form-one",modelValue:v(A).ruleForm.conversion_flow,"onUpdate:modelValue":l[3]||(l[3]=function(e){return v(A).ruleForm.conversion_flow=e}),clearable:"",placeholder:""},{default:d((function(){return[(o(!0),i(f,null,p(v(A).options.conversion_flow,(function(e){return o(),m(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),_(" Status "),s(r,{label:"Status:",prop:"status"},{default:d((function(){return[c("div",$,[s(y,{modelValue:v(A).ruleForm.status,"onUpdate:modelValue":l[4]||(l[4]=function(e){return v(A).ruleForm.status=e}),"active-value":1,"inactive-value":2},null,8,["modelValue"])])]})),_:1}),_(" Offer Title "),s(r,{label:"Offer Title:",prop:"title"},{default:d((function(){return[c("div",z,[s(n,{modelValue:v(A).ruleForm.title,"onUpdate:modelValue":l[5]||(l[5]=function(e){return v(A).ruleForm.title=e}),placeholder:"Please input",class:"input-with-select"},null,8,["modelValue"])])]})),_:1}),_(" Package Name "),s(r,{label:"Package Name:",prop:"pkg"},{default:d((function(){return[c("div",G,[s(n,{modelValue:v(A).ruleForm.pkg,"onUpdate:modelValue":l[6]||(l[6]=function(e){return v(A).ruleForm.pkg=e}),placeholder:"Please input",class:"input-with-select"},null,8,["modelValue"])])]})),_:1}),_(" Attribute Provider "),s(r,{label:"Attribute Provider:",prop:"attribute_provider"},{default:d((function(){return[s(b,{filterable:"",class:"form-one",modelValue:v(A).ruleForm.attribute_provider,"onUpdate:modelValue":l[7]||(l[7]=function(e){return v(A).ruleForm.attribute_provider=e}),clearable:"",placeholder:""},{default:d((function(){return[(o(!0),i(f,null,p(v(A).options.attribute_provider,(function(e){return o(),m(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),_(" Pid "),s(r,{label:"Pid:",prop:"pid"},{default:d((function(){return[c("div",H,[s(n,{modelValue:v(A).ruleForm.pid,"onUpdate:modelValue":l[8]||(l[8]=function(e){return v(A).ruleForm.pid=e}),placeholder:"Please input",class:"input-with-select"},null,8,["modelValue"])])]})),_:1}),_(" Platform "),s(r,{label:"Platform:",prop:"platform"},{default:d((function(){return[s(b,{filterable:"",class:"form-one",modelValue:v(A).ruleForm.platform,"onUpdate:modelValue":l[9]||(l[9]=function(e){return v(A).ruleForm.platform=e}),clearable:"",placeholder:""},{default:d((function(){return[(o(!0),i(f,null,p(v(A).options.platform,(function(e){return o(),m(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),_(" Country "),s(r,{label:"Country:",prop:"country"},{default:d((function(){return[s(b,{filterable:"",class:"form-one",modelValue:v(A).ruleForm.country,"onUpdate:modelValue":l[10]||(l[10]=function(e){return v(A).ruleForm.country=e}),multiple:"",clearable:"",placeholder:""},{default:d((function(){return[(o(!0),i(f,null,p(v(A).options.country,(function(e){return o(),m(a,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),_(" Revenue "),s(r,{label:"Revenue:",prop:"revenue"},{default:d((function(){return[c("div",J,[s(n,{modelValue:v(A).ruleForm.revenue,"onUpdate:modelValue":l[11]||(l[11]=function(e){return v(A).ruleForm.revenue=e}),placeholder:"Please input",class:"input-with-select"},null,8,["modelValue"])])]})),_:1}),_(" Manage Traffic "),s(r,{label:"Manage Traffic:",prop:"traffic"},{default:d((function(){return[c("div",Q,[s(v(O),{list:v(A).ruleForm.traffic,onKk:ce},null,8,["list"])])]})),_:1}),_(" Adv Tracking Link "),s(r,{label:"Adv Tracking Link:",prop:"adv_tracking_link"},{default:d((function(){return[c("div",W,[s(n,{rows:2,type:"textarea",modelValue:v(A).ruleForm.adv_tracking_link,"onUpdate:modelValue":l[12]||(l[12]=function(e){return v(A).ruleForm.adv_tracking_link=e}),placeholder:"Please input",class:"input-with-select"},null,8,["modelValue"])])]})),_:1}),_(" Target CVR "),s(r,{label:"Target CVR:",prop:"target_cvr"},{default:d((function(){return[c("div",X,[s(n,{modelValue:v(A).ruleForm.target_cvr,"onUpdate:modelValue":l[13]||(l[13]=function(e){return v(A).ruleForm.target_cvr=e}),placeholder:"Please input",class:"input-with-select"},null,8,["modelValue"])])]})),_:1}),_(" Site Type "),s(r,{label:"Site Type:",prop:"site_type"},{default:d((function(){return[s(b,{filterable:"",class:"form-one",modelValue:v(A).ruleForm.site_type,"onUpdate:modelValue":l[14]||(l[14]=function(e){return v(A).ruleForm.site_type=e}),clearable:"",placeholder:""},{default:d((function(){return[(o(!0),i(f,null,p(v(A).options.site_type,(function(e){return o(),m(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),_(" Site Value "),s(r,{label:"Site Value:",prop:"site_value",rules:v(ie)?v(A).rules.site_value:v(A).rules.no_required},{default:d((function(){return[c("div",Y,[s(n,{modelValue:v(A).ruleForm.site_value,"onUpdate:modelValue":l[15]||(l[15]=function(e){return v(A).ruleForm.site_value=e}),placeholder:"Please input",class:"input-with-select"},null,8,["modelValue"])])]})),_:1},8,["rules"]),_(" S2S Async "),s(r,{label:"S2S Async:",prop:"is_s2s"},{default:d((function(){return[c("div",ee,[s(y,{modelValue:v(A).ruleForm.is_s2s,"onUpdate:modelValue":l[16]||(l[16]=function(e){return v(A).ruleForm.is_s2s=e}),"active-value":1,"inactive-value":2},null,8,["modelValue"])])]})),_:1}),_(" S2S Tracking Link "),s(r,{label:"S2S Tracking Link:",prop:"s2s_tracking_link",rules:1===v(A).ruleForm.is_s2s?v(A).rules.s2s_tracking_link:v(A).rules.no_required},{default:d((function(){return[c("div",le,[s(n,{rows:2,type:"textarea",modelValue:v(A).ruleForm.s2s_tracking_link,"onUpdate:modelValue":l[17]||(l[17]=function(e){return v(A).ruleForm.s2s_tracking_link=e}),placeholder:"Please input",class:"input-with-select"},null,8,["modelValue"])])]})),_:1},8,["rules"]),_(" Preview URL "),s(r,{label:"Preview URL:",prop:"app_url",rules:1===v(A).ruleForm.is_s2s?v(A).rules.app_url:v(A).rules.no_required},{default:d((function(){return[c("div",re,[s(n,{rows:2,type:"textarea",modelValue:v(A).ruleForm.app_url,"onUpdate:modelValue":l[18]||(l[18]=function(e){return v(A).ruleForm.app_url=e}),placeholder:"Please input",class:"input-with-select"},null,8,["modelValue"])])]})),_:1},8,["rules"]),_(" Description "),s(r,{label:"Description:",prop:"description"},{default:d((function(){return[c("div",te,[s(n,{rows:2,type:"textarea",modelValue:v(A).ruleForm.description,"onUpdate:modelValue":l[19]||(l[19]=function(e){return v(A).ruleForm.description=e}),placeholder:"Please input",class:"input-with-select"},null,8,["modelValue"])])]})),_:1}),_(" end ")])]})),_:1},8,["rules","model"]),_(" form "),_(" footer "),c("div",ne,[s(t,{type:"primary",onClick:ue},{default:d((function(){return[ae]})),_:1})])],512)),[[x,v(q)]])}}}))}}}))}();
