import{d as e,af as a,z as l,b as t,r as o,ag as r,h as i,q as n,x as u,g as d,f as s,u as c,M as p,N as m,o as f,F as b,i as h,y as _,t as v,p as y,m as g,E as V,c as w,k}from"./vendor.107e8656.js";import{P as x}from"./index.f48b68d3.js";import{A as F,a as U,b as C,c as D}from"./buzz.ec7d8d89.js";import{m as j}from"./message.96b00d49.js";import{_ as A}from"./lodash.bd96a4e5.js";import{_ as z}from"./index.783b7d78.js";const P=e=>(y("data-v-6b18779e"),e=e(),g(),e),O={class:"controlBox w100 mb-10"},Q={class:"mb-10"},S=_("Offer Create"),N={class:"flex jc-start flex-wrap w100"},$={class:"flex"},B={class:"flex"},I=_("查询"),M={class:"flex jc-around"},q={class:"flex jc-around"},E=P((()=>n("span",null,"-",-1))),T={class:"flex mt-10"},L={class:"flex jc-around"},G={class:"w100 flex"};var H=z(e({setup(e){let{proxy:y}=k();const g=a({attribute_provider:[],platform:[],package_name:"",channel:"",id:"",offer_title:"",country:"",pid:""});let z=l({dialogVisible:!1,cache:{item:{},device:{}},searchForm:g.value,useData:g.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((e,a)=>{const l=5*a/100;return{value:l.toFixed(2),label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((e,a)=>{const l=(5*a+5)/100;return{value:l.toFixed(2),label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const P=()=>{z.useData=A.cloneDeep(z.searchForm),H()},H=async()=>{z.loading=!0;const e={page:z.pagination.listQuery.page,page_size:z.pagination.listQuery.limit,attribute_provider:z.useData.attribute_provider,platform:z.useData.platform,pkg_name:z.useData.package_name,channel:z.useData.channel,offer_id:z.useData.id,title:z.useData.offer_title,country:z.useData.country,tracking_link:z.useData.pid},a=await F(e),{data:l}=a;z.list=null==l?void 0:l.data,z.pagination.total=Number(l.count),z.loading=!1};return t((()=>{P()})),(e,a)=>{const l=o("el-button"),t=o("router-link"),g=o("el-option"),k=o("el-select"),F=o("el-form-item"),A=o("el-input"),J=o("el-form"),K=o("el-table-column"),R=o("el-switch"),W=o("el-table"),X=r("loading");return f(),i("div",null,[n("div",O,[n("div",Q,[u(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),d(t,{to:"/adnetwork/buzz-create"},{default:s((()=>[d(l,{type:"primary"},{default:s((()=>[S])),_:1})])),_:1})]),d(J,{inline:!0,modelValue:c(z).searchForm,"onUpdate:modelValue":a[8]||(a[8]=e=>c(z).searchForm=e),class:"flex jc-between w100 ai-end"},{default:s((()=>[n("div",N,[d(F,{label:""},{default:s((()=>[d(k,{modelValue:c(z).searchForm.attribute_provider,"onUpdate:modelValue":a[0]||(a[0]=e=>c(z).searchForm.attribute_provider=e),clearable:"",class:"search-con",placeholder:"Attribute Provider",style:{"min-width":"140px"}},{default:s((()=>[(f(!0),i(b,null,h(c(z).options.attribute_provider,(e=>(f(),w(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(F,{label:""},{default:s((()=>[d(k,{modelValue:c(z).searchForm.platform,"onUpdate:modelValue":a[1]||(a[1]=e=>c(z).searchForm.platform=e),clearable:"",class:"search-con",placeholder:"Platform",style:{"min-width":"95px"}},{default:s((()=>[(f(!0),i(b,null,h(c(z).options.platform,(e=>(f(),w(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),d(F,{label:""},{default:s((()=>[d(A,{placeholder:"Package Name",modelValue:c(z).searchForm.package_name,"onUpdate:modelValue":a[2]||(a[2]=e=>c(z).searchForm.package_name=e),class:"search-con",style:{"min-width":"120px"}},null,8,["modelValue"])])),_:1}),d(F,{label:""},{default:s((()=>[d(A,{placeholder:"Channel",modelValue:c(z).searchForm.channel,"onUpdate:modelValue":a[3]||(a[3]=e=>c(z).searchForm.channel=e),class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),d(F,{label:""},{default:s((()=>[d(A,{placeholder:"ID",modelValue:c(z).searchForm.id,"onUpdate:modelValue":a[4]||(a[4]=e=>c(z).searchForm.id=e),class:"search-con"},null,8,["modelValue"])])),_:1}),d(F,{label:""},{default:s((()=>[d(A,{placeholder:"Offer Title",modelValue:c(z).searchForm.offer_title,"onUpdate:modelValue":a[5]||(a[5]=e=>c(z).searchForm.offer_title=e),class:"search-con",style:{"min-width":"90px"}},null,8,["modelValue"])])),_:1}),d(F,{label:""},{default:s((()=>[d(A,{placeholder:"Country",modelValue:c(z).searchForm.country,"onUpdate:modelValue":a[6]||(a[6]=e=>c(z).searchForm.country=e),class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),d(F,{label:""},{default:s((()=>[d(A,{placeholder:"Pid",modelValue:c(z).searchForm.pid,"onUpdate:modelValue":a[7]||(a[7]=e=>c(z).searchForm.pid=e),class:"search-con"},null,8,["modelValue"])])),_:1})]),n("div",$,[d(F,{class:"mr-0",style:{"margin-right":"0px"}},{default:s((()=>[n("div",B,[d(l,{type:"primary",onClick:P},{default:s((()=>[I])),_:1}),u(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),u(' <el-input placeholder="请输入内容" v-model="data.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="el-icon-search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),u(" table "),p(d(W,{center:"",data:c(z).list,style:{width:"100%"},border:""},{default:s((()=>[d(K,{prop:"offer_id",label:"ID"}),d(K,{prop:"channel",label:"Channel"}),d(K,{prop:"pkg_name",label:"Package Name"}),d(K,{prop:"title",label:"Offer Title",width:"120"}),d(K,{prop:"attribute_provider",label:"Attribute Provider"}),d(K,{prop:"pid",label:"Pid"}),d(K,{prop:"platform",label:"Platform"},{default:s((e=>[_(v("1"===e.row.platform?"Android":"iOS"),1)])),_:1}),d(K,{prop:"country",label:"Country"}),d(K,{prop:"payout",label:"Payout"}),d(K,{label:"Click Limitation(w)",width:"150"},{default:s((e=>[n("div",M,[d(A,{modelValue:e.row.max_clk_num,"onUpdate:modelValue":a=>e.row.max_clk_num=a,placeholder:""},null,8,["modelValue","onUpdate:modelValue"]),d(l,{class:"cp icon ml-10",type:"primary",icon:"el-icon-edit",circle:"",onClick:a=>(async e=>{let a={id:e.id,max_clk_num:e.max_clk_num},l=await U(a);j(l)})(e.row)},null,8,["onClick"])])])),_:1}),d(K,{label:"Device Cutoff",width:"250"},{default:s((e=>{return[n("div",q,[n("div",null,[n("div",null,[d(k,{class:"cutoff",modelValue:e.row.cutoff_start,"onUpdate:modelValue":a=>e.row.cutoff_start=a,filterable:"",placeholder:"start"},{default:s((()=>[(f(!0),i(b,null,h(c(z).options.cutoff_start,(e=>(f(),w(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),E,d(k,{class:"cutoff",modelValue:e.row.cutoff_end,"onUpdate:modelValue":a=>e.row.cutoff_end=a,filterable:"",placeholder:"end"},{default:s((()=>[(f(!0),i(b,null,h(c(z).options.cutoff_end,(e=>(f(),w(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])]),n("div",T,[n("span",null,v((a=e.row,(a.cutoff_end-a.cutoff_start)*a.device_num)),1)])]),d(l,{class:"cp icon ml-10",type:"primary",icon:"el-icon-edit",circle:"",onClick:a=>(async e=>{const a=e.cutoff_start,l=e.cutoff_end,t=e.id;if(a<l){const e={start:a,end:l,id:t},o=await C(e);j(o)}else V({message:"start必须小于end",type:"error",duration:2e3})})(e.row)},null,8,["onClick"])])];var a})),_:1}),d(K,{width:"100",label:"Operation"},{default:s((e=>[n("div",L,[d(l,{class:"cp icon mr-10",type:"primary",icon:"el-icon-edit",circle:"",onClick:a=>(e=>{const a=e.id;y.$router.push({path:`/adnetwork/buzz-edit/${a}`,query:{type:"edit"}})})(e.row)},null,8,["onClick"]),d(R,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":"1","inactive-value":"2",onChange:a=>(async e=>{let a={id:e.id,status:e.status};const l=await D(a);j(l)})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1})])),_:1},8,["data"]),[[X,c(z).loading]]),u(" 分页 "),n("div",G,[p(d(c(x),{total:c(z).pagination.total,"page-sizes":c(z).pagination.pageSizes,page:c(z).pagination.listQuery.page,"onUpdate:page":a[9]||(a[9]=e=>c(z).pagination.listQuery.page=e),limit:c(z).pagination.listQuery.limit,"onUpdate:limit":a[10]||(a[10]=e=>c(z).pagination.listQuery.limit=e),onPagination:H},null,8,["total","page-sizes","page","limit"]),[[m,c(z).pagination.total]])])])}}}),[["__scopeId","data-v-6b18779e"]]);export{H as default};
