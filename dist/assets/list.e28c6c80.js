import{d as e,ag as a,z as l,b as t,r as o,ah as r,h as i,q as u,x as n,g as s,f as d,u as c,P as p,Q as m,o as f,F as b,i as h,y as _,t as v,p as y,m as g,E as V,c as w}from"./vendor.abf78dba.js";import{P as k}from"./index.1a68c24c.js";import{A as x,a as F,b as D,c as U}from"./buzz.2eb106ad.js";import{m as C}from"./message.9010e90c.js";import{_ as j}from"./lodash.6df001c0.js";import{_ as A}from"./index.beb97a98.js";function P(e){let a={};for(const l in e)if(Object.prototype.hasOwnProperty.call(e,l)){const t=e[l];t&&""!==t&&t==Number(t)?a[l]=Number(t):a[l]=t}return a}const z=e=>(y("data-v-29c9e5d6"),e=e(),g(),e),O={class:"controlBox w100 mb-10"},N={class:"mb-10"},Q=_("Offer Create"),S={class:"flex jc-start flex-wrap w100"},E={class:"flex"},B={class:"flex"},I=_("查询"),$={class:"flex jc-around"},M={class:"flex jc-around"},T=z((()=>u("span",null,"-",-1))),q={class:"flex mt-10"},L={class:"flex jc-around"},G={class:"w100 flex"};var H=A(e({setup(e){const y=a({attribute_provider:[],platform:[],package_name:"",channel:"",id:"",offer_title:"",country:"",pid:""});let g=l({dialogVisible:!1,cache:{item:{},device:{}},searchForm:y.value,useData:y.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((e,a)=>{const l=5*a/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((e,a)=>{const l=(5*a+5)/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const A=()=>{g.useData=j.cloneDeep(g.searchForm),H()},z=e=>{const a=(e.cutoff_end-e.cutoff_start)*e.device_num;return a?a.toFixed(0):""},H=async()=>{g.loading=!0;let e={page:g.pagination.listQuery.page,page_size:g.pagination.listQuery.limit};g.useData.attribute_provider&&(e.attribute_provider=g.useData.attribute_provider),g.useData.platform&&(e.platform=g.useData.platform),g.useData.package_name&&(e.pkg_name=g.useData.package_name),g.useData.channel&&(e.channel=g.useData.channel),g.useData.id&&(e.offer_id=g.useData.id),g.useData.offer_title&&(e.title=g.useData.offer_title),g.useData.country&&(e.country=g.useData.country),g.useData.pid&&(e.tracking_link=g.useData.pid);const a=await x(e),{data:l}=a;g.list=null==l?void 0:l.data,g.pagination.total=Number(l.count),g.loading=!1};return t((()=>{A()})),(e,a)=>{const l=o("el-button"),t=o("router-link"),y=o("el-option"),x=o("el-select"),j=o("el-form-item"),J=o("el-input"),K=o("el-form"),R=o("el-table-column"),W=o("el-switch"),X=o("el-table"),Y=r("loading");return f(),i("div",null,[u("div",O,[u("div",N,[n(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),s(t,{to:"/buzz/create"},{default:d((()=>[s(l,{type:"primary"},{default:d((()=>[Q])),_:1})])),_:1})]),s(K,{inline:!0,modelValue:c(g).searchForm,"onUpdate:modelValue":a[8]||(a[8]=e=>c(g).searchForm=e),class:"flex jc-between w100 ai-end"},{default:d((()=>[u("div",S,[s(j,{label:""},{default:d((()=>[s(x,{modelValue:c(g).searchForm.attribute_provider,"onUpdate:modelValue":a[0]||(a[0]=e=>c(g).searchForm.attribute_provider=e),clearable:"",class:"search-con",placeholder:"Attribute Provider",style:{"min-width":"140px"}},{default:d((()=>[(f(!0),i(b,null,h(c(g).options.attribute_provider,(e=>(f(),w(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(j,{label:""},{default:d((()=>[s(x,{modelValue:c(g).searchForm.platform,"onUpdate:modelValue":a[1]||(a[1]=e=>c(g).searchForm.platform=e),clearable:"",class:"search-con",placeholder:"Platform",style:{"min-width":"95px"}},{default:d((()=>[(f(!0),i(b,null,h(c(g).options.platform,(e=>(f(),w(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(j,{label:""},{default:d((()=>[s(J,{placeholder:"Package Name",modelValue:c(g).searchForm.package_name,"onUpdate:modelValue":a[2]||(a[2]=e=>c(g).searchForm.package_name=e),class:"search-con",style:{"min-width":"120px"}},null,8,["modelValue"])])),_:1}),s(j,{label:""},{default:d((()=>[s(J,{placeholder:"Channel",modelValue:c(g).searchForm.channel,"onUpdate:modelValue":a[3]||(a[3]=e=>c(g).searchForm.channel=e),class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),s(j,{label:""},{default:d((()=>[s(J,{placeholder:"ID",modelValue:c(g).searchForm.id,"onUpdate:modelValue":a[4]||(a[4]=e=>c(g).searchForm.id=e),class:"search-con"},null,8,["modelValue"])])),_:1}),s(j,{label:""},{default:d((()=>[s(J,{placeholder:"Offer Title",modelValue:c(g).searchForm.offer_title,"onUpdate:modelValue":a[5]||(a[5]=e=>c(g).searchForm.offer_title=e),class:"search-con",style:{"min-width":"90px"}},null,8,["modelValue"])])),_:1}),s(j,{label:""},{default:d((()=>[s(J,{placeholder:"Country",modelValue:c(g).searchForm.country,"onUpdate:modelValue":a[6]||(a[6]=e=>c(g).searchForm.country=e),class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),s(j,{label:""},{default:d((()=>[s(J,{placeholder:"Pid",modelValue:c(g).searchForm.pid,"onUpdate:modelValue":a[7]||(a[7]=e=>c(g).searchForm.pid=e),class:"search-con"},null,8,["modelValue"])])),_:1})]),u("div",E,[s(j,{class:"mr-0",style:{"margin-right":"0px"}},{default:d((()=>[u("div",B,[s(l,{type:"primary",onClick:A},{default:d((()=>[I])),_:1}),n(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),n(' <el-input placeholder="请输入内容" v-model="data.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),n(" table "),p(s(X,{center:"",data:c(g).list,style:{width:"100%"},border:""},{default:d((()=>[s(R,{prop:"offer_id",label:"ID"}),s(R,{prop:"channel",label:"Channel"}),s(R,{prop:"pkg_name",label:"Package Name"}),s(R,{prop:"title",label:"Offer Title",width:"120"}),s(R,{prop:"attribute_provider",label:"Attribute Provider"}),s(R,{prop:"pid",label:"Pid"}),s(R,{prop:"platform",label:"Platform"},{default:d((e=>[_(v(1===Number(e.row.platform)?"Android":"iOS"),1)])),_:1}),s(R,{prop:"country",label:"Country"}),s(R,{prop:"payout",label:"Payout"}),s(R,{label:"Click Limitation(w)",width:"150"},{default:d((e=>[u("div",$,[s(J,{modelValue:e.row.max_clk_num,"onUpdate:modelValue":a=>e.row.max_clk_num=a,placeholder:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),s(l,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(async e=>{let a={id:e.id,max_clk_num:e.max_clk_num};a=P(a);let l=await F(a);C(l)})(e.row)},null,8,["onClick"])])])),_:1}),s(R,{label:"Device Cutoff",width:"250"},{default:d((e=>[u("div",M,[u("div",null,[u("div",null,[s(x,{class:"cutoff",modelValue:e.row.cutoff_start,"onUpdate:modelValue":a=>e.row.cutoff_start=a,filterable:"",placeholder:"start"},{default:d((()=>[(f(!0),i(b,null,h(c(g).options.cutoff_start,(e=>(f(),w(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),T,s(x,{class:"cutoff",modelValue:e.row.cutoff_end,"onUpdate:modelValue":a=>e.row.cutoff_end=a,filterable:"",placeholder:"end"},{default:d((()=>[(f(!0),i(b,null,h(c(g).options.cutoff_end,(e=>(f(),w(y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])]),u("div",q,[u("span",null,v(z(e.row)),1)])]),s(l,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(async e=>{const a=e.cutoff_start,l=e.cutoff_end,t=e.id;if(a<l){let e={cutoff_start:a,cutoff_end:l,id:t};e=P(e);const o=await D(e);C(o)}else V({message:"start必须小于end",type:"error",duration:2e3})})(e.row)},null,8,["onClick"])])])),_:1}),s(R,{width:"100",label:"Operation"},{default:d((e=>{return[u("div",L,[s(t,{to:(a=e.row,`/buzz/edit/${a.id}`)},{default:d((()=>[s(l,{class:"cp mr-10",type:"primary",icon:"Edit",circle:""})])),_:2},1032,["to"]),n(" <el-button class='cp mr-10' type=\"primary\" icon=\"Edit\" circle @click='editFun(scope.row)'></el-button> "),s(W,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onChange:a=>(async e=>{let a={id:e.id,status:e.status};a=P(a);const l=await U(a);C(l)})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])];var a})),_:1})])),_:1},8,["data"]),[[Y,c(g).loading]]),n(" 分页 "),u("div",G,[p(s(c(k),{total:c(g).pagination.total,"page-sizes":c(g).pagination.pageSizes,page:c(g).pagination.listQuery.page,"onUpdate:page":a[9]||(a[9]=e=>c(g).pagination.listQuery.page=e),limit:c(g).pagination.listQuery.limit,"onUpdate:limit":a[10]||(a[10]=e=>c(g).pagination.listQuery.limit=e),onPagination:H},null,8,["total","page-sizes","page","limit"]),[[m,c(g).pagination.total]])])])}}}),[["__scopeId","data-v-29c9e5d6"]]);export{H as default};
