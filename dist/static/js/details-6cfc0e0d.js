var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,l,r)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r,t=(e,t)=>{for(var o in t||(t={}))l.call(t,o)&&s(e,o,t[o]);if(a)for(var o of a(t))r.call(t,o)&&s(e,o,t[o]);return e};import{_ as o,d,h as i,r as m,L as u,q as n,o as p,c,z as f,e as _,s as v,v as b,x as g,P as y,N as F,O as h,A as V,f as j,y as x,g as w}from"./main-c289050e.js";import{u as U,s as O}from"./useUtils-034ffd86.js";import{c as q,d as P,e as k}from"./dsp-adcontrol-4c3e994d.js";import{A as C}from"./dsp-advertiser-d95bf0ce.js";import{m as M}from"./message-7c571a95.js";import{_ as z}from"./index-0855a96e.js";import{d as A,e as D}from"./new-format-0cb28217.js";import{s as E}from"./validate-31aaa08c.js";import{_ as I}from"./lodash-6a3426b2.js";import{u as L}from"./dsp-7b5725df.js";const N={class:"content-con from-one flex column"},S={class:"content-con from-one flex column"},$={class:"w100 flex"},R=j(" 确认 "),B=j(" 取消 ");var G=o(d({setup(e){const a=L().topsearch;let{adv:l,date:r}=a;const{adv_type:s,ind_cla:o,third_party:d,return_mode:G,time_zone:H}=O,{getRouterData:J,getCommonCountryList:K,goNewUrl:Q}=U();let{proxy:T}=w();const W="此项必填";let X=i("create");const Y={id:void 0,adv_id:l,adv_series_name:"",descs:"",marbet_target:1,adv_series_type:1,adv_series_budget:void 0,status:1,is_del:0},Z=(e,a,l)=>{const{max:r}=e;E(a,r)?l(void 0):l(new Error("值的长度不能大于${}"))},ee=m({ruleForm:Y,rules:{adv_series_name:[{required:!0,message:W,trigger:["blur","change"]},{validator:Z,max:100,trigger:["blur","change"]}],adv_id:[{required:!0,message:W,trigger:["blur","change"]}],descs:[{validator:Z,max:200,trigger:["blur","change"]}],adv_series_type:[{required:!0,message:W,trigger:["blur","change"]}],adv_series_budget:[{required:!0,message:W,trigger:["blur","change"]}]},options:{adv_type:s,adv_series_type:[{value:1,label:"动态商品促销"},{value:2,label:"固定链接推广"}],marbet_target:[{value:1,label:"再营销"},{value:2,label:"拉新"}],advertiser:[{adv_id:"",name:""}]}}),ae=()=>{T.$refs.ruleForm.validate((e=>{if(!e)return!1;re()}))},le=["id","adv_series_type","adv_series_budget"],re=async()=>{let e=y(ee.ruleForm);if(e=A(e),e=D(e,le),"create"===X.value){delete e.id;const a=await q(e);M(a)&&se()}if("edit"===X.value){const a=await P(e);M(a)&&se()}},se=()=>{Q({url:"/adcontrol/adseries/list"})},te=()=>{var e,a;let{query:l,params:r}=J();if(X.value=null!=(a=null==(e=l.type)?void 0:e.toString())?a:"",(async()=>{Promise.all([C({limit:1e4,page:1})]).then((e=>{let a=e[0];ee.options.advertiser=a.data.data}))})(),"create"===X.value&&(ee.ruleForm=I.cloneDeep(Y)),"edit"===X.value){const{id:e}=r;(async e=>{const a=await k(e),{data:l}=a;ee.ruleForm=t(t({},ee.ruleForm),l),ee.ruleForm})(e)}};return u((()=>{te()})),(e,a)=>{const l=n("el-input"),r=n("el-form-item"),s=n("el-option"),t=n("el-select"),o=n("el-radio"),d=n("el-radio-group"),i=n("el-form"),m=n("el-button");return p(),c("div",null,[f(" form "),_(i,{ref:"ruleForm",enctype:"multipart/form-data",rules:b(ee).rules,model:b(ee).ruleForm,"label-width":"150px","label-position":"right",class:"flex column",disabled:"edit"===b(X)&&2===b(ee).ruleForm.is_del},{default:v((()=>[_(b(z),{title:"基础信息"}),g("div",N,[_(r,{class:"self-el-form-item",label:"广告主系列名称:",prop:"adv_series_name"},{default:v((()=>[_(l,{modelValue:b(ee).ruleForm.adv_series_name,"onUpdate:modelValue":a[0]||(a[0]=e=>b(ee).ruleForm.adv_series_name=e),modelModifiers:{trim:!0},class:"form-one",placeholder:""},null,8,["modelValue"])])),_:1}),_(r,{class:"self-el-form-item",label:"广告主名称:",prop:"adv_name"},{default:v((()=>[_(t,{modelValue:b(ee).ruleForm.adv_id,"onUpdate:modelValue":a[1]||(a[1]=e=>b(ee).ruleForm.adv_id=e),filterable:"",placeholder:"请选择",class:"form-one"},{default:v((()=>[(p(!0),c(F,null,h(b(ee).options.advertiser,(e=>(p(),V(s,{key:e.adv_id,label:e.name,value:e.adv_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),_(r,{class:"self-el-form-item",label:"描述:",prop:"descs"},{default:v((()=>[_(l,{modelValue:b(ee).ruleForm.descs,"onUpdate:modelValue":a[2]||(a[2]=e=>b(ee).ruleForm.descs=e),modelModifiers:{trim:!0},class:"form-one",placeholder:"",type:"textarea"},null,8,["modelValue"])])),_:1})]),_(b(z),{title:"目标与预算"}),g("div",S,[_(r,{class:"self-el-form-item",label:"营销目标:",prop:"marbet_target"},{default:v((()=>[_(d,{class:"form-one",modelValue:b(ee).ruleForm.marbet_target,"onUpdate:modelValue":a[3]||(a[3]=e=>b(ee).ruleForm.marbet_target=e)},{default:v((()=>[(p(!0),c(F,null,h(b(ee).options.marbet_target,(e=>(p(),V(o,{label:e.value},{default:v((()=>[j(x(e.label),1)])),_:2},1032,["label"])))),256))])),_:1},8,["modelValue"])])),_:1}),_(r,{class:"self-el-form-item",label:"广告类型:",prop:"adv_series_type"},{default:v((()=>[_(t,{modelValue:b(ee).ruleForm.adv_series_type,"onUpdate:modelValue":a[4]||(a[4]=e=>b(ee).ruleForm.adv_series_type=e),filterable:"",placeholder:"请选择",class:"form-one"},{default:v((()=>[(p(!0),c(F,null,h(b(ee).options.adv_series_type,(e=>(p(),V(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),_(r,{class:"self-el-form-item",label:"广告日预算（美元）:",prop:"adv_series_budget"},{default:v((()=>[_(l,{modelValue:b(ee).ruleForm.adv_series_budget,"onUpdate:modelValue":a[5]||(a[5]=e=>b(ee).ruleForm.adv_series_budget=e),modelModifiers:{trim:!0},class:"form-one",placeholder:"",type:"number"},null,8,["modelValue"])])),_:1})])])),_:1},8,["rules","model","disabled"]),f(" form "),f(" footer "),g("div",$,[_(m,{type:"primary",onClick:ae},{default:v((()=>[R])),_:1}),_(m,{type:"primary",onClick:se},{default:v((()=>[B])),_:1})])])}}}),[["__scopeId","data-v-929e9770"]]);export{G as default};
