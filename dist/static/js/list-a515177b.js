var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{d as r,Z as s,r as c,L as p,q as d,$ as m,o as u,c as g,x as b,e as f,s as y,v,z as h,U as w,A as x,V as j,f as _}from"./main-5c054b70.js";import{P as O}from"./index-ee27b0bd.js";import{A as k,a as D}from"./tool-5233cd1a.js";import{m as F}from"./message-bef23076.js";import{_ as V}from"./lodash-c44075a3.js";import{u as P}from"./useUtils-42ec8b5c.js";const Q={class:"controlBox w100 flex jc-between ai-start"},U={class:"mb-10"},C=_("新建广告主"),S={class:"flex jc-start flex-wrap w100"},z={class:"flex"},q={class:"flex"},A=_(" 查询 "),E={class:"flex jc-around"},$={class:"w100 flex"},I=r({name:"dsp-advsetting-list"}),N=r((B=((e,a)=>{for(var t in a||(a={}))i.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&o(e,t,a[t]);return e})({},I),a(B,t({setup(e){const{goNewUrl:a,openAlert:t}=P(),l=s({name:""});let i=c({dialogVisible:!1,cache:{item:{},device:{}},searchForm:l.value,useData:l.value,loading:!0,options:{},list:[],pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const n=()=>{i.useData=V.cloneDeep(i.searchForm),r()},o=()=>{a({url:"/tool/advsetting/create",query:{type:"create"}})},r=async()=>{i.loading=!0;let e={page:i.pagination.listQuery.page,limit:i.pagination.listQuery.limit};i.useData.name&&(e.name=i.useData.name);const a=await k(e),{data:t}=a;i.list=t,i.pagination.total=Number(t.count),i.loading=!1};return p((()=>{n()})),(e,t)=>{const l=d("el-button"),s=d("el-input"),c=d("el-form-item"),p=d("el-form"),_=d("el-table-column"),k=d("el-table"),V=m("loading");return u(),g("div",null,[b("div",Q,[b("div",U,[f(l,{type:"primary",onClick:o},{default:y((()=>[C])),_:1})]),f(p,{modelValue:v(i).searchForm,"onUpdate:modelValue":t[1]||(t[1]=e=>v(i).searchForm=e),inline:!0,class:"flex jc-between ai-end"},{default:y((()=>[b("div",S,[f(c,{label:""},{default:y((()=>[f(s,{modelValue:v(i).searchForm.name,"onUpdate:modelValue":t[0]||(t[0]=e=>v(i).searchForm.name=e),placeholder:"请输入广告主名称",class:"search-con",style:{"min-width":"120px"}},null,8,["modelValue"])])),_:1})]),b("div",z,[f(c,{class:"mr-0",style:{"margin-right":"0px"}},{default:y((()=>[b("div",q,[f(l,{type:"primary",onClick:n},{default:y((()=>[A])),_:1}),h(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),h(' <el-input placeholder="请输入内容" v-model="data.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),h(" table "),w((u(),x(k,{center:"",data:v(i).list,class:"w100","min-height":"70vh",border:""},{default:y((()=>[f(_,{fixed:"",prop:"ad_id",label:"广告主ID",align:"center"}),f(_,{fixed:"",prop:"ad_name",label:"广告主名称",align:"center"}),f(_,{prop:"desc",label:"描述",align:"center"}),f(_,{prop:"flow_rate",label:"强制流量占比%",width:"120",align:"center"}),f(_,{prop:"create_user",label:"创建人",align:"center"}),f(_,{prop:"update_user",label:"更新人",align:"center"}),f(_,{prop:"create_time",label:"创建时间",sortable:"",align:"center"}),f(_,{prop:"update_time",label:"更新时间",sortable:"",align:"center"}),f(_,{width:"100",label:"操作",align:"center"},{default:y((e=>[b("div",E,[f(l,{class:"cp mr-10",type:"primary",icon:"Edit",circle:"",onClick:t=>(({row:e})=>{const{id:t}=e;a({url:`/tool/advsetting/edit/${t}`,query:{type:"edit"}})})(e)},null,8,["onClick"]),f(l,{class:"cp mr-10",type:"danger",icon:"Delete",circle:"",onClick:a=>(async({row:e,$index:a})=>{const{id:t}=e,l=await D(t);F(l)&&i.list.splice(a,1)})(e)},null,8,["onClick"]),h(' <el-switch\n              v-model="scope.row.status"\n              :active-value="1"\n              :inactive-value="2"\n              @change="changeStatus(scope.row)"\n            /> ')])])),_:1})])),_:1},8,["data"])),[[V,v(i).loading]]),h(" 分页 "),b("div",$,[w(f(v(O),{page:v(i).pagination.listQuery.page,"onUpdate:page":t[2]||(t[2]=e=>v(i).pagination.listQuery.page=e),limit:v(i).pagination.listQuery.limit,"onUpdate:limit":t[3]||(t[3]=e=>v(i).pagination.listQuery.limit=e),total:v(i).pagination.total,"page-sizes":v(i).pagination.pageSizes,onPagination:r},null,8,["page","limit","total","page-sizes"]),[[j,v(i).pagination.total]])])])}}}))));var B;export{N as default};
