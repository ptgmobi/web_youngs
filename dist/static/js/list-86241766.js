import{d as e,$ as a,r as l,L as t,M as i,q as n,a0 as o,c as r,x as s,e as d,s as p,v as u,z as c,U as m,A as g,V as b,o as f,f as w,N as v,O as h,y as _}from"./main-0a777472.js";import{P as y}from"./index-2575c6ed.js";import{A as V,a as x,b as k,c as j}from"./adnetwork-b0e632ed.js";import{m as A}from"./message-d6ce123e.js";import{_ as C}from"./lodash-4786ff9c.js";import{o as U}from"./new-format-7f959bed.js";const F={class:"controlBox w100 mb-10 flex jc-between ai-start"},S={class:"mb-10"},D={class:"flex jc-start flex-wrap w100"},N={class:"flex jc-around"},Q={class:"flex jc-around"},z={class:"flex jc-around"},P=s("span",null,": ",-1),M=s("span",null,": ",-1),O={class:"flex jc-around"},$={class:"w100 flex"},B=e({name:"adNetwork"}),E=e({...B,setup(e){const B=a({input:""});l({offer:{},index:null,cacheDevice:{},cacheDeviceCount:0});let E=l({dialogVisible:!1,dialogVisibleDevice:!1,cache:{item:{},device:{}},searchForm:B.value,useData:B.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((e,a)=>{const l=5*a/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((e,a)=>{const l=(5*a+5)/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["20","50","100","500","1000"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const T=()=>{E.useData=C.cloneDeep(E.searchForm),G()},q=async(e,a)=>{let l;"status"===a&&(l=await x({id:e.id,[a]:e[a]})),"pmt"===a&&(l=await k({id:e.id,[a]:e[a]})),"android_semi_pmt"===a&&(l=await j({id:e.id,[a]:e[a]})),A(l)},J=()=>{U("/adnetwork/adnetworklist/create")},L=e=>`/adnetwork/adnetworklist/edit/${e.id}`,G=async()=>{E.loading=!0;let e={page:E.pagination.listQuery.page,page_size:E.pagination.listQuery.limit};e={...e,...E.useData};const a=await V(e),{data:l}=a;E.list=null==l?void 0:l.data,E.pagination.total=Number(l.count),E.loading=!1},H=e=>{let a=JSON.parse(e);return Object.entries(a)};return t((()=>{T()})),i((()=>{})),(e,a)=>{const l=n("el-button"),t=n("el-input"),i=n("el-form-item"),V=n("el-form"),x=n("el-table-column"),k=n("el-switch"),j=n("el-table"),A=o("loading");return f(),r("div",null,[s("div",F,[s("div",S,[d(l,{type:"primary",onClick:J},{default:p((()=>[w("Create AD Network")])),_:1})]),d(V,{modelValue:u(E).searchForm,"onUpdate:modelValue":a[1]||(a[1]=e=>u(E).searchForm=e),inline:!0,class:"flex jc-between ai-end"},{default:p((()=>[s("div",D,[d(i,{label:"",class:"mr-0"},{default:p((()=>[d(t,{modelValue:u(E).searchForm.input,"onUpdate:modelValue":a[0]||(a[0]=e=>u(E).searchForm.input=e),placeholder:"Ad network name/Channel",class:"input-with-select",style:{width:"200px"}},{append:p((()=>[d(l,{icon:"Search",onClick:T})])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["modelValue"])]),c(" table "),m((f(),g(j,{center:"",data:u(E).list,class:"w100",border:""},{default:p((()=>[d(x,{fixed:"",prop:"name",label:"Ad network name",align:"center",width:"120",sortable:""}),d(x,{fixed:"",prop:"short_name",label:"Channel",align:"center",width:"60",sortable:""}),d(x,{prop:"status",label:"Status",align:"center",width:"110",sortable:""},{default:p((e=>[s("div",N,[d(k,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onChange:a=>q(e.row,"status")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),d(x,{prop:"pmt",label:"Android-PMT",align:"center",sortable:""},{default:p((e=>[s("div",Q,[d(k,{modelValue:e.row.pmt,"onUpdate:modelValue":a=>e.row.pmt=a,"active-value":1,"inactive-value":2,onChange:a=>q(e.row,"pmt")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),d(x,{prop:"android_semi_pmt",label:"Android Semi PMT",align:"center",width:"80",sortable:""},{default:p((e=>[s("div",z,[d(k,{modelValue:e.row.android_semi_pmt,"onUpdate:modelValue":a=>e.row.android_semi_pmt=a,"active-value":1,"inactive-value":2,onChange:a=>q(e.row,"android_semi_pmt")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),d(x,{prop:"traffic_rate",label:"Percentage",align:"center",width:"160",sortable:""},{default:p((e=>[(f(!0),r(v,null,h(H(e.row.traffic_rate),(e=>(f(),r("span",null,[s("span",null,_(e[0]),1),P,s("span",null,_(e[1]),1),w("   ")])))),256))])),_:1}),d(x,{prop:"pre_click_rate",label:"Pre click",align:"center",width:"160",sortable:""},{default:p((e=>[(f(!0),r(v,null,h(H(e.row.pre_click_rate),(e=>(f(),r("span",null,[s("span",null,_(e[0]),1),M,s("span",null,_(e[1]),1),w("   ")])))),256))])),_:1}),d(x,{label:"Operation",align:"center"},{default:p((e=>[s("div",O,[c(' <router-link :to="getEditUrl(scope.row)">\n              <el-button\n                class="cp mr-10"\n                type="primary"\n                icon="Edit"\n                circle\n              ></el-button>\n            </router-link> '),d(l,{class:"cp mr-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(e=>{let a=L(e);U(a)})(e.row)},null,8,["onClick"])])])),_:1})])),_:1},8,["data"])),[[A,u(E).loading]]),c(" 分页 "),s("div",$,[m(d(u(y),{page:u(E).pagination.listQuery.page,"onUpdate:page":a[2]||(a[2]=e=>u(E).pagination.listQuery.page=e),limit:u(E).pagination.listQuery.limit,"onUpdate:limit":a[3]||(a[3]=e=>u(E).pagination.listQuery.limit=e),total:u(E).pagination.total,"page-sizes":u(E).pagination.pageSizes,onPagination:G},null,8,["page","limit","total","page-sizes"]),[[b,u(E).pagination.total]])])])}}});export{E as default};
