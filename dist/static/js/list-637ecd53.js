var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,r=(e,a)=>{for(var l in a||(a={}))i.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&s(e,l,a[l]);return e};import{_ as n,d as p,h as d,Z as c,r as u,L as m,q as b,$ as f,o as y,c as v,x as g,e as _,v as h,s as w,z as j,U as x,A as V,a8 as k,V as F,N as O,O as U,y as C,f as P}from"./main-c289050e.js";import{s as Q}from"./setting-c7abf732.js";import{P as D}from"./index-19cba061.js";import{m as S}from"./message-7c571a95.js";import{_ as z}from"./lodash-6a3426b2.js";import{h as A}from"./new-format-0cb28217.js";import{u as I}from"./useUtils-034ffd86.js";import{c as $}from"./clipboard-52d8486c.js";import{A as q,a as N}from"./dsp-media-93cb6169.js";import{_ as E}from"./index-15b94426.js";import"./clipboard-polyfill.text.esm-fc4f7791.js";import"./format-fb65a074.js";import"./moment-9bd84dc2.js";import"./dsp-advertiser-d95bf0ce.js";import"./dsp-7b5725df.js";const R={class:"controlBox w100 mb-10"},T={class:"flex jc-start flex-wrap w100"},B={class:"flex"},L={class:"flex"},Z=P(" 查询 "),G={class:"mb-10 w100"},H=P("新建媒体列表"),J={class:"flex jc-around"},K=P("编辑"),M=P("归档"),W={class:"w100 flex"},X=P("复制"),Y=p({name:"adserieslist"});var ee,ae=n(p((ee=r({},Y),a(ee,l({setup(e){const a=d(),l=d([{id:""}]),{adv_type:t,audience_manage_type:i,build_status:o,audit_status:s}=Q,{goNewUrl:n,openAlert:p}=I(),P=c({status:"",type:"",build_status:"",is_del:"1",value_type:"name",value:""}),Y=d(!1),ee=u({report_api:""});let ae=u({dialogVisible:!1,cache:{item:{}},searchForm:P.value,useData:P.value,loading:!0,options:{adv_type:t,audience_manage_type:i,build_status:o,country:[],value_type:[{value:"name",label:"媒体列表名称"},{value:"id",label:"媒体列表id"},{value:"user",label:"创建人"}]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});u({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const le=u({adv_id:"",st:"",et:""}),te=e=>{le.adv_id=e.adv,e.date&&(le.st=e.date[0],le.et=e.date[1])},ie=e=>{l.value=e},oe=()=>{ae.useData=z.cloneDeep(ae.searchForm),ne()};d([]);const se=()=>{n({url:"/media/custom/create",query:{type:"create"}})},re=e=>async()=>{const{row:a,$index:l}=e,t=await(async e=>await N({ids:e,is_del:2}))([a.id]);S(t)&&ae.list.splice(l,1)},ne=async()=>{ae.loading=!0;let e=r(r({page:ae.pagination.listQuery.page,limit:ae.pagination.listQuery.limit},P.value),le);e[e.value_type]=e.value,delete e.value_type,delete e.value,e=A(e);const a=await q(e);if(a){const{data:e}=a;ae.list=null==e?void 0:e.data,ae.pagination.total=Number(e.count)}ae.loading=!1};return m((()=>{oe()})),(e,l)=>{const t=b("el-option"),i=b("el-select"),o=b("el-input"),s=b("el-form-item"),r=b("el-checkbox"),d=b("el-button"),c=b("el-form"),u=b("el-table-column"),m=b("el-dialog"),P=f("loading");return y(),v("div",null,[g("div",R,[_(h(E),{onUp:te}),_(c,{modelValue:h(ae).searchForm,"onUpdate:modelValue":l[3]||(l[3]=e=>h(ae).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:w((()=>[g("div",T,[j(" 输入 "),_(s,{label:""},{default:w((()=>[_(o,{modelValue:h(ae).searchForm.value,"onUpdate:modelValue":l[1]||(l[1]=e=>h(ae).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:w((()=>[_(i,{modelValue:h(ae).searchForm.value_type,"onUpdate:modelValue":l[0]||(l[0]=e=>h(ae).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:w((()=>[(y(!0),v(O,null,U(h(ae).options.value_type,(e=>(y(),V(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),_(s,{label:""},{default:w((()=>[_(r,{modelValue:h(ae).searchForm.is_del,"onUpdate:modelValue":l[2]||(l[2]=e=>h(ae).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),g("div",B,[_(s,{class:"mr-0",style:{"margin-right":"0px"}},{default:w((()=>[g("div",L,[_(d,{type:"primary",onClick:oe},{default:w((()=>[Z])),_:1}),j(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),j(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> '),g("div",G,[_(d,{type:"primary",onClick:se},{default:w((()=>[H])),_:1})])]),j(" table "),x((y(),V(h(k),{ref_key:"multipleTableRef",ref:a,center:"",data:h(ae).list,class:"w100",border:"",onSelectionChange:ie},{default:w((()=>[j(" 媒体列表ID "),_(u,{sortable:"",width:"120",prop:"id",label:"媒体列表ID",align:"center"}),j(" 媒体列表名称 "),_(u,{sortable:"",width:"120",prop:"name",label:"媒体列表名称",align:"center"}),j(" 操作 "),_(u,{width:"200",label:"操作",align:"center"},{default:w((e=>[g("div",J,[_(d,{class:"cp",type:"primary",onClick:a=>(({row:e})=>{const{id:a}=e;n({url:`/media/custom/edit/${a}`,query:{type:"edit",campaign_type:e.type}})})(e)},{default:w((()=>[K])),_:2},1032,["onClick"]),j(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),_(d,{class:"cp",type:"danger",onClick:a=>(async e=>{p({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},re(e))})(e),disabled:2===e.row.is_del},{default:w((()=>[M])),_:2},1032,["onClick","disabled"])])])),_:1}),j(" 媒体数量 "),_(u,{sortable:"",width:"120",prop:"country",label:"媒体数量",align:"center"},{default:w((e=>[j(" <span>{{getOptionsValue(scope.row.type, state.options.country)}}</span> "),g("p",null,C(e.row.country),1)])),_:1}),j(" 描述 "),_(u,{sortable:"",width:"120",prop:"descs",label:"描述",align:"center"}),j(" 关联广告组数 "),_(u,{sortable:"",width:"120",prop:"ad_group",label:"关联广告组数",align:"center"}),j(" 创建人 "),_(u,{sortable:"",width:"120",prop:"create_email",label:"创建人",align:"center"}),j(" 更新人 "),_(u,{sortable:"",width:"120",prop:"user",label:"更新人",align:"center"}),j(" 创建时间 "),_(u,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),j(" 更新时间 "),_(u,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"})])),_:1},8,["data"])),[[P,h(ae).loading]]),j(" 分页 "),g("div",W,[x(_(D,{page:h(ae).pagination.listQuery.page,"onUpdate:page":l[4]||(l[4]=e=>h(ae).pagination.listQuery.page=e),limit:h(ae).pagination.listQuery.limit,"onUpdate:limit":l[5]||(l[5]=e=>h(ae).pagination.listQuery.limit=e),total:h(ae).pagination.total,"page-sizes":h(ae).pagination.pageSizes,onPagination:ne},null,8,["page","limit","total","page-sizes"]),[[F,h(ae).pagination.total]])]),j(" 复制 "),_(m,{modelValue:Y.value,"onUpdate:modelValue":l[7]||(l[7]=e=>Y.value=e),title:"Report Api",width:"90%"},{default:w((()=>[g("p",null,C(h(ee).report_api),1),_(d,{class:"cp mr-10",type:"default",onClick:l[6]||(l[6]=e=>{return a=h(ee).report_api,void $(a);var a})},{default:w((()=>[X])),_:1})])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-ac407cca"]]);export{ae as default};
