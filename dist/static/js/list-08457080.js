var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&s(e,l,a[l]);return e};import{_ as n,d as p,Z as u,h as d,r as c,L as m,q as b,$ as f,o as v,c as g,x as y,z as _,e as w,s as h,v as V,U as k,A as j,V as x,N as F,O as U,y as C,f as O,D,F as z}from"./main-665d1af0.js";import{u as P,s as Q}from"./useUtils-761e0430.js";import{P as $}from"./index-fe1f32ed.js";import{m as I}from"./message-6257d60b.js";import{_ as S}from"./lodash-1f0c0f2f.js";import{h as A}from"./new-format-478034c0.js";import{c as q}from"./clipboard-0499bfe9.js";import{A as N,a as E,b as L}from"./dsp-advertiser-da2363e0.js";const B=e=>(D("data-v-a23d5d78"),e=e(),z(),e),R={class:"controlBox w100 mb-10"},T={class:"mb-10 w100"},Z=O(" 新建广告主 "),G={class:"flex jc-start flex-wrap w100"},H={class:"flex"},J={class:"flex"},K=O(" 查询 "),M=B((()=>y("img",{src:"",alt:""},null,-1))),W={class:"flex jc-around"},X=O("编辑"),Y=O("查看"),ee=O("归档"),ae={class:"w100 flex"},le=O("复制"),te=p({name:"demandlist"});var oe,re=n(p((oe=i({},te),a(oe,l({setup(e){const{flow_source:a,flow_type:l,ad_type:t,bidding_agreement:o,bidding_type:r,currency:s,status:n,choice_type:p,choice_type_region:O,value_type:D}=Q,{goNewUrl:z,openAlert:B}=P(),te=u({status:1,flow_source:"",value_type:"name",value:"",is_del:"1"}),oe=d(!1),re=c({report_api:""});let se=c({dialogVisible:!1,cache:{item:{}},searchForm:te.value,useData:te.value,loading:!0,options:{status:n,flow_source:a,value_type:D},list:[],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const ie=()=>{se.useData=S.cloneDeep(se.searchForm),de()};d([]);const ne=()=>{z({url:"/advertiser/create",query:{type:"create"}})},pe=({row:e})=>{const{id:a}=e;z({url:`/advertiser/edit/${a}`,query:{type:"edit"}})},ue=async e=>{B({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},(e=>async()=>{const{row:a,$index:l}=e,t=await L({id:a.id});I(t)&&se.list.splice(l,1)})(e))},de=async()=>{se.loading=!0;let e=i({page:se.pagination.listQuery.page,limit:se.pagination.listQuery.limit},te.value);e[e.value_type]=e.value,delete e.value_type,delete e.value,e=A(e);const a=await N(e),{data:l}=a;se.list=null==l?void 0:l.data,se.pagination.total=Number(l.count),se.loading=!1};return m((()=>{ie()})),(e,a)=>{const l=b("el-button"),t=b("el-option"),o=b("el-select"),r=b("el-form-item"),s=b("el-input"),i=b("el-form"),n=b("el-table-column"),p=b("el-switch"),u=b("el-table"),d=b("el-dialog"),c=f("loading");return v(),g("div",null,[y("div",R,[y("div",T,[_(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),_(' <router-link to="/buzz/create"> '),w(l,{type:"primary",onClick:ne},{default:h((()=>[Z])),_:1}),_(" </router-link> ")]),w(i,{modelValue:V(se).searchForm,"onUpdate:modelValue":a[4]||(a[4]=e=>V(se).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:h((()=>[y("div",G,[w(r,{label:""},{default:h((()=>[w(o,{modelValue:V(se).searchForm.status,"onUpdate:modelValue":a[0]||(a[0]=e=>V(se).searchForm.status=e),filterable:"",clearable:"",placeholder:"全部状态"},{default:h((()=>[(v(!0),g(F,null,U(V(se).options.status,(e=>(v(),j(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(r,{label:""},{default:h((()=>[w(o,{modelValue:V(se).searchForm.flow_source,"onUpdate:modelValue":a[1]||(a[1]=e=>V(se).searchForm.flow_source=e),filterable:"",clearable:"",placeholder:"全部流量来源"},{default:h((()=>[(v(!0),g(F,null,U(V(se).options.flow_source,(e=>(v(),j(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(r,{label:""},{default:h((()=>[w(s,{modelValue:V(se).searchForm.value,"onUpdate:modelValue":a[3]||(a[3]=e=>V(se).searchForm.value=e),placeholder:"名称/ID/token",class:"input-with-select"},{prepend:h((()=>[w(o,{modelValue:V(se).searchForm.value_type,"onUpdate:modelValue":a[2]||(a[2]=e=>V(se).searchForm.value_type=e),placeholder:"名称/ID/token",class:"search-input-select"},{default:h((()=>[(v(!0),g(F,null,U(V(se).options.value_type,(e=>(v(),j(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})]),y("div",H,[w(r,{class:"mr-0",style:{"margin-right":"0px"}},{default:h((()=>[y("div",J,[w(l,{type:"primary",onClick:ie},{default:h((()=>[K])),_:1}),_(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),_(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),_(" table "),k((v(),j(u,{center:"",data:V(se).list,class:"w100",border:""},{default:h((()=>[w(n,{sortable:"",prop:"id",label:"广告主ID",align:"center"}),w(n,{sortable:"",prop:"status",label:"广告主Logo",align:"center"},{default:h((e=>[M])),_:1}),w(n,{sortable:"",width:"120",prop:"name",label:"广告主名称",align:"center"}),w(n,{sortable:"",prop:"status",label:"开关",align:"center"},{default:h((e=>[w(p,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onClick:a=>(async({row:e})=>{e.id,e.status;let a=await E(e.id);I(a)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),_(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),w(n,{sortable:"",width:"120",prop:"name",label:"广告主类型",align:"center"}),w(n,{sortable:"",width:"120",prop:"name",label:"广告主地址",align:"center"}),w(n,{sortable:"",width:"120",prop:"name",label:"日花费上限($)",align:"center"}),w(n,{sortable:"",width:"120",prop:"name",label:"强制流量占比(%)",align:"center"}),w(n,{sortable:"",width:"120",prop:"name",label:"广告主分类",align:"center"}),w(n,{sortable:"",width:"120",prop:"name",label:"创建人",align:"center"}),w(n,{sortable:"",width:"120",prop:"name",label:"日花费上限($)",align:"center"}),w(n,{width:"200",label:"操作",align:"center"},{default:h((e=>[y("div",W,[w(l,{class:"cp",type:"primary",onClick:a=>pe(e)},{default:h((()=>[X])),_:2},1032,["onClick"]),2===e.row.is_del?(v(),j(l,{key:0,class:"cp",type:"default",onClick:a=>pe(e)},{default:h((()=>[Y])),_:2},1032,["onClick"])):_("v-if",!0),w(l,{class:"cp",type:"danger",onClick:a=>ue(e),disabled:2===e.row.is_del},{default:h((()=>[ee])),_:2},1032,["onClick","disabled"])])])),_:1}),w(n,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),w(n,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"})])),_:1},8,["data"])),[[c,V(se).loading]]),_(" 分页 "),y("div",ae,[k(w($,{page:V(se).pagination.listQuery.page,"onUpdate:page":a[5]||(a[5]=e=>V(se).pagination.listQuery.page=e),limit:V(se).pagination.listQuery.limit,"onUpdate:limit":a[6]||(a[6]=e=>V(se).pagination.listQuery.limit=e),total:V(se).pagination.total,"page-sizes":V(se).pagination.pageSizes,onPagination:de},null,8,["page","limit","total","page-sizes"]),[[x,V(se).pagination.total]])]),_(" report api "),w(d,{modelValue:oe.value,"onUpdate:modelValue":a[8]||(a[8]=e=>oe.value=e),title:"Report Api",width:"90%"},{default:h((()=>[y("p",null,C(V(re).report_api),1),w(l,{class:"cp mr-10",type:"default",onClick:a[7]||(a[7]=e=>{return a=V(re).report_api,void q(a);var a})},{default:h((()=>[le])),_:1})])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-a23d5d78"]]);export{re as default};
