var z=Object.defineProperty,L=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var q=(m,d,a)=>d in m?z(m,d,{enumerable:!0,configurable:!0,writable:!0,value:a}):m[d]=a,k=(m,d)=>{for(var a in d||(d={}))K.call(d,a)&&q(m,a,d[a]);if(U)for(var a of U(d))H.call(d,a)&&q(m,a,d[a]);return m},N=(m,d)=>L(m,R(d));import{d as P,z as j,C as G,r as f,o as s,k as c,v as e,x as o,h,j as l,F as V,l as E,i as w,y as J,af as Q,c as A,w as O,t as x,q as W,s as X,b as Z}from"./vendor-bf64253d.js";import{g as ee,a as ae,b as te,c as le,d as oe,e as se}from"./overview-ac3bac40.js";import{_ as ne}from"./lodash-05c10b51.js";import{t as $,g as M,a as re}from"./format-b76f9697.js";import{h as T}from"./new-format-b98ea9a0.js";import{_ as ue}from"./index-30657850.js";import{_ as ce}from"./index-1d6fe13a.js";import"./moment-1cf83a0b.js";const de={class:"white-bg control-box flex jc-between ai-start p0-0"},ie={class:"flex jc-start flex-wrap"},_e={class:"flex"},pe=J(" \u67E5\u8BE2 "),he=P({emits:["emitParent"],setup(m,{emit:d}){const t=j({options:{channel_type:[{value:1,label:"\u4EE3\u7406"},{value:2,label:"API"},{value:3,label:"\u76F4\u5BA2"},{value:6,label:"Yohoads"}],platform:[{value:1,label:"Android"},{value:2,label:"iOS"}],country:[{value:"",label:""}],channel:[{label:"",value:""}],pkg:[{value:"",label:""}]},data:{channel_type:"",platform:"",channel:"",country:"",pkg:""}}),D=async()=>{const F=await Promise.all([await ee(),ae(),te()]),[v,g,C]=F;t.options.country=v.data,t.options.channel=g.data,t.options.pkg=C.data},b=()=>{},r=()=>{},n=()=>{},i=()=>{},_=()=>{},y=()=>{console.warn("set search data"),d("emitParent",ne.cloneDeep(Q(t.data)))};return G(()=>{D(),y()}),(F,v)=>{const g=f("el-option"),C=f("el-select"),p=f("el-form-item"),B=f("el-button"),I=f("el-form");return s(),c("div",null,[e("div",de,[o(I,{inline:!0,model:l(t).data,class:"flex jc-between ai-start w100"},{default:h(()=>[e("div",ie,[o(p,{label:"\u5E7F\u544A\u4E3B\u7C7B\u578B"},{default:h(()=>[o(C,{modelValue:l(t).data.channel_type,"onUpdate:modelValue":v[0]||(v[0]=u=>l(t).data.channel_type=u),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",onChange:b},{default:h(()=>[(s(!0),c(V,null,E(l(t).options.channel_type,u=>(s(),A(g,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"\u5E73\u53F0"},{default:h(()=>[o(C,{modelValue:l(t).data.platform,"onUpdate:modelValue":v[1]||(v[1]=u=>l(t).data.platform=u),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:r},{default:h(()=>[w(` <div class="flex jc-between p10 pt-0">
                <el-button type="primary" plain size="mini" @click="selectAllProduct()">\u5168\u9009</el-button>
                <el-button size="mini" type="danger" plain @click="unSelectedAllProduct()">\u6E05\u7A7A</el-button>
              </div> `),(s(!0),c(V,null,E(l(t).options.platform,(u,Y)=>(s(),A(g,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"\u56FD\u5BB6"},{default:h(()=>[o(C,{modelValue:l(t).data.country,"onUpdate:modelValue":v[2]||(v[2]=u=>l(t).data.country=u),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:n},{default:h(()=>[(s(!0),c(V,null,E(l(t).options.country,(u,Y)=>(s(),A(g,{key:u,label:u.toString(),value:u},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"Channel"},{default:h(()=>[o(C,{modelValue:l(t).data.channel,"onUpdate:modelValue":v[3]||(v[3]=u=>l(t).data.channel=u),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:i},{default:h(()=>[(s(!0),c(V,null,E(l(t).options.channel,(u,Y)=>(s(),A(g,{key:u,label:u.toString(),value:u},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(p,{label:"Pkg"},{default:h(()=>[o(C,{modelValue:l(t).data.pkg,"onUpdate:modelValue":v[4]||(v[4]=u=>l(t).data.pkg=u),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:_},{default:h(()=>[(s(!0),c(V,null,E(l(t).options.pkg,(u,Y)=>(s(),A(g,{key:u,label:u.toString(),value:u},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),e("div",null,[e("div",_e,[o(B,{type:"primary",onClick:y},{default:h(()=>[pe]),_:1})])])]),_:1},8,["model"])])])}}});const S=m=>(W("data-v-7f4b3e65"),m=m(),X(),m),ve={class:"flex flex-wrap jc-between"},me={class:"card-header"},be={key:0},ge={class:"mt-10 mb-10"},fe={key:0},ye={key:1},xe={class:"valueBox"},we={class:"value-box"},De=S(()=>e("span",null,"\u65E5\u73AF\u6BD4:",-1)),Be={class:"value-right"},Fe={key:0},ke={key:1},Ce={key:2},je={class:"value-val"},Se={class:"valueBox"},Ve={class:"value-box"},Ee=S(()=>e("span",null,"\u5468\u540C\u6BD4:",-1)),Ae={class:"value-right"},Pe={key:0},$e={key:1},Oe={key:2},Me={class:"value-val"},Ye={class:"valueBox"},Te={class:"value-box"},Ue=S(()=>e("span",null,"7\u65E5\u5747:",-1)),qe={key:0},Ne={key:1},Ge={class:"valueBox"},Ie={class:"value-box"},ze=S(()=>e("span",null,"30\u65E5\u5747:",-1)),Le={key:0},Re={key:1},Ke={key:1},He=S(()=>e("div",{class:"mt-10 mb-10",style:{height:"21px"}},null,-1)),Je={class:"valueBox"},Qe={class:"value-box"},We=S(()=>e("span",null,"\u6536\u5165:",-1)),Xe={class:"value-right"},Ze={class:"value-val"},ea={class:"valueBox"},aa={class:"value-box"},ta=S(()=>e("span",null,"\u652F\u51FA:",-1)),la={class:"value-right"},oa={class:"value-val"},sa={class:"valueBox"},na={class:"value-box"},ra=S(()=>e("span",null,"\u6BDB\u5229:",-1)),ua={class:"value-right"},ca={class:"value-val"},da={class:"valueBox"},ia={class:"value-box"},_a=S(()=>e("span",null,"\u65E5\u5747\u6BDB\u5229:",-1)),pa={class:"value-right"},ha={class:"value-val"},va=P({props:{json:{require:!0,default:()=>({}),type:Object}},setup(m){const d=m,a=["yesterday_revenue","yesterday_gross_profit","yesterday_gross_margin"],t=["accumulated_month","accumulated_quarter"],D={yesterday_revenue:"\u6628\u65E5\u6536\u5165",yesterday_gross_profit:"\u6628\u65E5\u6BDB\u5229",yesterday_gross_margin:"\u6628\u65E5\u6BDB\u5229\u7387",accumulated_month:"\u672C\u6708\u7D2F\u8BA1",accumulated_quarter:"\u672C\u5B63\u5EA6\u7D2F\u8BA1"},b={},r=j({baseData:d.json,data:b,titleMap:D,titleGroup:a,titleGroup1:t}),n=_=>{let y=Math.abs(_)*100;return`${$(y,2)}%`},i=async()=>{r.data=[];let _=k({},r.baseData.data);delete _.date,_=T(_);const{data:y}=await le(_);r.data=y};return O(()=>r.baseData,(_,y)=>{console.warn("get card data"),i()},{deep:!0}),G(()=>{}),(_,y)=>{const F=f("caret-bottom"),v=f("el-icon"),g=f("caret-top"),C=f("el-card");return s(),c("div",null,[e("div",ve,[(s(!0),c(V,null,E(l(r).data,(p,B)=>(s(),A(C,{class:"box-card m10"},{header:h(()=>[e("div",me,[e("h3",null,x(l(r).titleMap[B]),1)])]),default:h(()=>[e("div",null,[l(r).titleGroup.includes(B.toString())?(s(),c("div",be,[e("h4",null,x(p.date),1),e("div",ge,[w(` <h2 v-if="item.hasOwnProperty('revenue')">$ {{item.revenue}}</h2>
              <h2 v-if="item.hasOwnProperty('rate')">{{item.rate * 100}} %</h2> `),B.toString()!=="yesterday_gross_margin"?(s(),c("h2",fe," $ "+x(p.revenue),1)):w("v-if",!0),B.toString()==="yesterday_gross_margin"?(s(),c("h2",ye,x(l($)(p.revenue*100,2))+" % ",1)):w("v-if",!0)]),e("div",xe,[e("div",we,[De,e("span",Be,[p.dod<0?(s(),c("span",Fe,[o(v,{class:"el-svg-icon color_down"},{default:h(()=>[o(F)]),_:1})])):w("v-if",!0),p.dod>0?(s(),c("span",ke,[o(v,{class:"el-svg-icon color_up"},{default:h(()=>[o(g)]),_:1})])):(s(),c("span",Ce)),e("span",je,x(n(p.dod)),1)])])]),e("div",Se,[e("div",Ve,[Ee,e("span",Ae,[p.wow<0?(s(),c("span",Pe,[o(v,{class:"el-svg-icon color_down"},{default:h(()=>[o(F)]),_:1})])):w("v-if",!0),p.wow>0?(s(),c("span",$e,[o(v,{class:"el-svg-icon color_up"},{default:h(()=>[o(g)]),_:1})])):(s(),c("span",Oe)),e("span",Me,x(n(p.wow)),1)])])]),e("div",Ye,[e("div",Te,[Ue,B.toString()!=="yesterday_gross_margin"?(s(),c("span",qe,x(p.d7),1)):w("v-if",!0),B.toString()==="yesterday_gross_margin"?(s(),c("span",Ne,x(n(p.d7)),1)):w("v-if",!0)])]),e("div",Ge,[e("div",Ie,[ze,B.toString()!=="yesterday_gross_margin"?(s(),c("span",Le,x(p.d30),1)):w("v-if",!0),B.toString()==="yesterday_gross_margin"?(s(),c("span",Re,x(n(p.d30)),1)):w("v-if",!0)])])])):w("v-if",!0),l(r).titleGroup1.includes(B.toString())?(s(),c("div",Ke,[e("h4",null,x(p.date),1),He,e("div",Je,[e("div",Qe,[We,e("span",Xe,[e("span",Ze,x(p.revenue),1)])])]),e("div",ea,[e("div",aa,[ta,e("span",la,[e("span",oa,x(p.cost),1)])])]),e("div",sa,[e("div",na,[ra,e("span",ua,[e("span",ca,x(p.profit),1)])])]),e("div",da,[e("div",ia,[_a,e("span",pa,[e("span",ha,x(p.avg_profit),1)])])])])):w("v-if",!0)])]),_:2},1024))),256))])])}}});var ma=ue(va,[["__scopeId","data-v-7f4b3e65"]]);const ba=P({props:{json:{require:!0,default:{},type:Object}},setup(m){const d=m,a=j({data:{target:5},options:{target:[{value:1,label:"\u8F6C\u5316"},{value:2,label:"\u5355\u4EF7"},{value:3,label:"\u6536\u5165"},{value:4,label:"\u652F\u51FA"},{value:5,label:"\u6BDB\u5229"},{value:6,label:"\u6BDB\u5229\u7387(\u5355\u4F4D\u4E3A%)"}]}}),t=j({data:d.json,chartData:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{show:!0,backgroundColor:"#6a7985"}}},legend:{show:!0,data:["all"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"",type:"line",stack:"Total",emphasis:{focus:"series"},data:[]}]}});O(()=>t.data,(n,i)=>{console.warn("get chart data"),r()},{deep:!0});const D=()=>{var i;let n=a.options.target.find(_=>_.value===a.data.target);return(i=n==null?void 0:n.label)!=null?i:""},b=["6"],r=async()=>{var y,F;let n=N(k({},t.data.data),{target:a.data.target});n=T(n),t.chartData.xAxis[0].data=[],t.chartData.series[0].data=[];const{data:i}=await oe(n);t.chartData.xAxis[0].data=(y=i==null?void 0:i.date)!=null?y:[],t.chartData.series[0].name=D();let _=(F=i==null?void 0:i.data)!=null?F:[];if(b.includes(a.data.target.toString())){let v=_.map(g=>$(g*100,2));t.chartData.series[0].data=v}else{let v=_.map(g=>$(g,2));t.chartData.series[0].data=v}};return(n,i)=>{const _=f("el-option"),y=f("el-select"),F=f("el-form-item"),v=f("el-form");return s(),c("div",null,[e("div",null,[o(v,{inline:!0,model:l(a).data,class:"flex jc-between w100"},{default:h(()=>[o(F,{label:"\u6307\u6807"},{default:h(()=>[o(y,{modelValue:l(a).data.target,"onUpdate:modelValue":i[0]||(i[0]=g=>l(a).data.target=g),placeholder:"Select",onChange:r},{default:h(()=>[(s(!0),c(V,null,E(l(a).options.target,g=>(s(),A(_,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",null,[o(l(ce),{"chart-data":l(t).chartData},null,8,["chart-data"])])])}}}),ga={class:"control-box mt-20"},fa={class:"flex jc-start"},ya=P({emits:["emitParent"],setup(m,{emit:d}){let a=j({shortcuts:[{text:"\u4ECA\u5929",value:M(0,"day")},{text:"\u6628\u5929",value:()=>re(1,1,"day")},{text:"\u6700\u8FD17\u5929",value:()=>M(6,"day")},{text:"\u6700\u8FD130\u5929",value:()=>M(29,"day")}],data:{search:{date:M(6,"day")}}});const t=()=>{console.warn("set search date"),d("emitParent",[...a.data.search.date])};return O(()=>a.data.search.date,(D,b)=>{t()},{immediate:!0}),(D,b)=>{const r=f("el-date-picker"),n=f("el-form-item"),i=f("el-form");return s(),c("div",ga,[o(i,{inline:!0,model:l(a).data,class:"flex jc-between"},{default:h(()=>[e("div",fa,[o(n,{label:"\u65E5\u671F\u9009\u62E9"},{default:h(()=>[o(r,{modelValue:l(a).data.search.date,"onUpdate:modelValue":b[0]||(b[0]=_=>l(a).data.search.date=_),class:"mr-10 mb-10",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",shortcuts:l(a).shortcuts,clearable:!1},null,8,["modelValue","shortcuts"])]),_:1})])]),_:1},8,["model"])])}}}),xa={class:"mt-20"},wa=P({props:{json:{require:!0,default:{},type:Object}},setup(m){let a=j({data:m.json,list:[]});O(()=>a.data,(b,r)=>{console.warn("get table data"),t()},{deep:!0});const t=async()=>{let b=k({},a.data.data);b=T(b),a.list=[];const{data:r}=await se(b);a.list=r};let D=Z(()=>{let b=[];return a.list.map(r=>{let n={},i=k({},r);for(const _ in i)if(Object.prototype.hasOwnProperty.call(i,_)){const y=i[_];_.includes("rate")?n[_]=`${$(y*100,2)}%`:n[_]=$(y,2)}b.push(n)}),b});return(b,r)=>{const n=f("el-table-column"),i=f("el-table");return s(),c("div",xa,[w(" table "),o(i,{center:"",data:l(D),class:"w100",height:"87vh",border:""},{default:h(()=>[o(n,{fixed:"",prop:"date",label:"\u65E5\u671F",align:"center"}),w(` <el-table-column fixed prop="type" label="\u5E7F\u544A\u4E3B\u7C7B\u578B" align="center"></el-table-column>
      <el-table-column prop="channel" label="Channel" align="center"></el-table-column>
      <el-table-column prop="platform" label="\u5E73\u53F0" align="center"></el-table-column>
      <el-table-column prop="country" label="\u56FD\u5BB6" align="center"></el-table-column>
      <el-table-column prop="pkg" label="Pkg" align="center"></el-table-column> `),o(n,{prop:"conversion",label:"\u8F6C\u5316\u6570",align:"center"}),o(n,{prop:"revenue",label:"\u6536\u5165",align:"center"}),o(n,{prop:"cost",label:"\u652F\u51FA",align:"center"}),o(n,{prop:"profit",label:"\u6BDB\u5229",align:"center"}),o(n,{prop:"profit_rate",label:"\u6BDB\u5229\u7387",align:"center"})]),_:1},8,["data"])])}}}),Da={class:"app-container"},Pa=P({setup(m){let d=j({data:{channel_type:[],platform:[],channel:[],country:[],pkg:[],st:"",et:""}}),a=j({data:{channel_type:[],platform:[],channel:[],country:[],pkg:[]}}),t=j({data:{st:"",et:""}});const D=r=>{console.log(r),a.data=k({},r),d.data=k(k({},a.data),t.data)},b=r=>{console.log(r),t.data={st:r[0],et:r[1]},d.data=k(k({},a.data),t.data)};return(r,n)=>(s(),c("div",Da,[o(l(he),{onEmitParent:D}),o(l(ma),{json:l(a)},null,8,["json"]),o(l(ya),{onEmitParent:b}),o(l(ba),{json:l(d)},null,8,["json"]),o(l(wa),{json:l(d)},null,8,["json"])]))}});export{Pa as default};
