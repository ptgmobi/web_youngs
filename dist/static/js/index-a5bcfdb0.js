var q=Object.defineProperty;var M=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var Y=(_,n,o)=>n in _?q(_,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):_[n]=o,A=(_,n)=>{for(var o in n||(n={}))z.call(n,o)&&Y(_,o,n[o]);if(M)for(var o of M(n))L.call(n,o)&&Y(_,o,n[o]);return _};import{d as B,z as C,C as O,r as y,o as u,k as h,v as x,x as s,h as f,j as a,F as j,l as w,i as F,y as $,af as R,c as V,w as P,t as N,q as H,s as W,b as U}from"./vendor-bf64253d.js";import{f as G,h as K,i as J,j as Q}from"./overview-41084b96.js";import{g as E,a as X,t as k}from"./format-b76f9697.js";import{_ as Z}from"./lodash-05c10b51.js";import{h as T}from"./new-format-b98ea9a0.js";import{_ as ee}from"./index-e71c7b30.js";import{_ as ae}from"./index-1d6fe13a.js";import{W as te}from"./index-58c66166.js";import"./moment-1cf83a0b.js";const le={class:"white-bg control-box flex jc-between ai-start p0-0"},oe={class:"flex jc-start flex-wrap ai-start"},ne={class:"flex"},re=$(" \u67E5\u8BE2 "),se=B({emits:["emitParent"],setup(_,{emit:n}){const o={adtype:"",channel_type:"",use_name:"",slot:"",country:"",date:E(6,"day")},e=C({shortcuts:[{text:"\u4ECA\u5929",value:E(0,"day")},{text:"\u6628\u5929",value:()=>X(1,1,"day")},{text:"\u6700\u8FD17\u5929",value:()=>E(6,"day")},{text:"\u6700\u8FD130\u5929",value:()=>E(29,"day")}],options:{adtype:["ssp","fenix"],channel_type:[{value:1,label:"\u4EE3\u7406"},{value:2,label:"API"},{value:3,label:"\u76F4\u5BA2"}],country:[{value:"",label:""}],user_name:[{label:"",value:""}],slot:[{value:"",label:""}]},data:o}),m=async()=>{const{data:c}=await G();e.options.user_name=c==null?void 0:c.user_name,e.options.slot=c==null?void 0:c.slot,e.options.country=c==null?void 0:c.country},g=()=>{},v=()=>{console.warn("set search data"),n("emitParent",Z.cloneDeep(R(e.data)))};return O(()=>{m(),v()}),(c,d)=>{const r=y("el-date-picker"),l=y("el-form-item"),i=y("el-option"),b=y("el-select"),p=y("el-button"),D=y("el-form");return u(),h("div",null,[x("div",le,[s(D,{inline:!0,model:a(e).data,class:"flex jc-between ai-start w100"},{default:f(()=>[x("div",oe,[s(l,{label:"\u65E5\u671F\u9009\u62E9"},{default:f(()=>[s(r,{modelValue:a(e).data.date,"onUpdate:modelValue":d[0]||(d[0]=t=>a(e).data.date=t),class:"search-con",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",shortcuts:a(e).shortcuts,clearable:!1},null,8,["modelValue","shortcuts"])]),_:1}),s(l,{label:"\u5206\u6210\u65B9\u6CD5"},{default:f(()=>[s(b,{modelValue:a(e).data.adtype,"onUpdate:modelValue":d[1]||(d[1]=t=>a(e).data.adtype=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",onChange:g},{default:f(()=>[(u(!0),h(j,null,w(a(e).options.adtype,t=>(u(),V(i,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(l,{label:"\u4E1A\u52A1\u7C7B\u578B"},{default:f(()=>[s(b,{modelValue:a(e).data.channel_type,"onUpdate:modelValue":d[2]||(d[2]=t=>a(e).data.channel_type=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:g},{default:f(()=>[F(` <div class="flex jc-between p10 pt-0">
                <el-button type="primary" plain size="mini" @click="selectAllProduct()">\u5168\u9009</el-button>
                <el-button size="mini" type="danger" plain @click="unSelectedAllProduct()">\u6E05\u7A7A</el-button>
              </div> `),(u(!0),h(j,null,w(a(e).options.channel_type,(t,S)=>(u(),V(i,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(l,{label:"User Name"},{default:f(()=>[s(b,{modelValue:a(e).data.user_name,"onUpdate:modelValue":d[3]||(d[3]=t=>a(e).data.user_name=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:g},{default:f(()=>[(u(!0),h(j,null,w(a(e).options.user_name,(t,S)=>(u(),V(i,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(l,{label:"Slot"},{default:f(()=>[s(b,{modelValue:a(e).data.slot,"onUpdate:modelValue":d[4]||(d[4]=t=>a(e).data.slot=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:g},{default:f(()=>[(u(!0),h(j,null,w(a(e).options.slot,(t,S)=>(u(),V(i,{key:t,label:t.toString(),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(l,{label:"\u56FD\u5BB6"},{default:f(()=>[s(b,{modelValue:a(e).data.country,"onUpdate:modelValue":d[5]||(d[5]=t=>a(e).data.country=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:g},{default:f(()=>[(u(!0),h(j,null,w(a(e).options.country,(t,S)=>(u(),V(i,{key:t,label:t.toString(),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),x("div",null,[x("div",ne,[s(p,{type:"primary",onClick:v},{default:f(()=>[re]),_:1})])])]),_:1},8,["model"])])])}}});const I=_=>(H("data-v-422fd230"),_=_(),W(),_),ue={class:"flex flex-wrap jc-between"},ce={class:"flex jc-between"},de={key:0,class:"color_primary"},ie=I(()=>x("span",{class:"small_icon"},"$",-1)),pe={key:1,class:"color_primary"},_e=I(()=>x("span",{class:"small_icon"},"%",-1)),me=B({props:{json:{require:!0,default:{},type:Object}},setup(_){const n=_,o={profit:"\u6BDB\u5229\u5408\u8BA1",revenue:"\u6536\u5165\u5408\u8BA1",cost:"\u652F\u51FA\u5408\u8BA1",profit_rate:"\u6BDB\u5229\u7387"},e={},m=C({baseData:n.json,data:e,titleMap:o,groupVal:["profit","revenue","cost"],groupRate:["profit_rate"]}),g=async()=>{let v=A({},m.baseData.data);v=T(v);const{data:c}=await K(v);if(Array.isArray(c)&&c.length!==0)m.data=c[0];else for(const d in m.data)Object.prototype.hasOwnProperty.call(m.data,d)&&(m.data[d]=0)};return P(()=>m.baseData,(v,c)=>{console.warn("get card data"),g()},{deep:!0}),O(()=>{}),(v,c)=>{const d=y("el-card");return u(),h("div",null,[x("div",ue,[(u(!0),h(j,null,w(a(m).titleMap,(r,l)=>(u(),V(d,{class:"box-card m10"},{default:f(()=>[x("div",ce,[x("h3",null,N(a(m).titleMap[l]),1),a(m).groupVal.includes(l)?(u(),h("h2",de,[ie,$(" "+N(a(m).data[l]),1)])):F("v-if",!0),a(m).groupRate.includes(l)?(u(),h("h2",pe,[$(N(a(k)(a(m).data[l]*100))+" ",1),_e])):F("v-if",!0)])]),_:2},1024))),256))])])}}});var fe=ee(me,[["__scopeId","data-v-422fd230"]]);const be=B({props:{json:{require:!0,default:{},type:Object}},setup(_){const n=_,o=C({data:{target:"profit"},options:{target:[{value:"profit",label:"\u6BDB\u5229"},{value:"revenue",label:"\u6536\u5165"},{value:"cost",label:"\u652F\u51FA"},{value:"profit_rate",label:"\u6BDB\u5229\u7387"}]}}),e=C({data:n.json,baseCharData:{},chartData:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{show:!0,backgroundColor:"#6a7985"}}},legend:{show:!0,data:["all"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"",type:"line",stack:"Total",emphasis:{focus:"series"},data:[]}]}});P(()=>e.data,(r,l)=>{console.warn("get chart data"),d()},{deep:!0});const m=()=>{var l;let r=o.options.target.find(i=>i.value===o.data.target);return(l=r==null?void 0:r.label)!=null?l:""},g=["6"],v=()=>{c()},c=()=>{var i;let r=o.data.target;console.log(r);let l=(i=e.baseCharData[r])!=null?i:[];if(g.includes(o.data.target.toString())){let b=l.map(p=>k(p*100,2));e.chartData.series[0].data=b}else{let b=l.map(p=>k(p,2));e.chartData.series[0].data=b}},d=async()=>{var i;let r=A({},e.data.data);r=T(r),e.chartData.xAxis[0].data=[],e.chartData.series[0].data=[];const{data:l}=await J(r);console.log(l),e.baseCharData=l,e.chartData.xAxis[0].data=(i=l==null?void 0:l.date)!=null?i:[],e.chartData.series[0].name=m(),c()};return(r,l)=>{const i=y("el-option"),b=y("el-select"),p=y("el-form-item"),D=y("el-form");return u(),h("div",null,[x("div",null,[s(D,{inline:!0,model:a(o).data,class:"flex jc-between w100"},{default:f(()=>[s(p,{label:"\u6307\u6807"},{default:f(()=>[s(b,{modelValue:a(o).data.target,"onUpdate:modelValue":l[0]||(l[0]=t=>a(o).data.target=t),placeholder:"Select",onChange:v},{default:f(()=>[(u(!0),h(j,null,w(a(o).options.target,t=>(u(),V(i,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),x("div",null,[s(a(ae),{"chart-data":a(e).chartData},null,8,["chart-data"])])])}}}),he={class:"mt-20"},ve={class:"flex jc-end mb-10"},ye=B({props:{json:{require:!0,default:{},type:Object}},setup(_){let o=C({data:_.json,list:[],exportExcel:{buttonName:"\u5BFC\u51FA",tHeader:["\u65E5\u671F"],filterVal:["date"],fileName:"profit"}}),e=C([{value:"user_id",label:"User ID"},{value:"account_email",label:"Account Email"},{value:"user_name",label:"User Name"},{value:"profit",label:"\u6BDB\u5229"},{value:"revenue",label:"\u6536\u5165"},{value:"cost",label:"\u652F\u51FA"},{value:"profit_rate",label:"\u6BDB\u5229\u7387"}]);P(()=>o.data,(r,l)=>{console.warn("get table data"),m()},{deep:!0});const m=async()=>{let r=A({},o.data.data);r=T(r),o.list=[];const{data:l}=await Q(r);o.list=l};let g=["profit_rate"],v=U(()=>{let r=[];return o.list.map(l=>{let i={},b=A({},l);for(const p in b)if(Object.prototype.hasOwnProperty.call(b,p)){const D=b[p];g.includes(p)?i[p]=`${k(D*100,2)}%`:i[p]=D}r.push(i)}),r});const c=U(()=>e.map(r=>r.label)),d=U(()=>e.map(r=>r.value));return(r,l)=>{const i=y("el-table-column"),b=y("el-table");return u(),h("div",he,[x("div",ve,[s(te,{"button-name":a(o).exportExcel.buttonName,list:a(v),"t-header":a(c),"filter-val":a(d),filename:a(o).exportExcel.fileName},null,8,["button-name","list","t-header","filter-val","filename"])]),F(" table "),s(b,{center:"",data:a(v),class:"w100",border:""},{default:f(()=>[(u(!0),h(j,null,w(a(e),p=>{var D;return u(),V(i,{key:p.value,prop:p.value,label:p.label,fixed:(D=p==null?void 0:p.fixed)!=null?D:!1,align:"center"},null,8,["prop","label","fixed"])}),128))]),_:1},8,["data"])])}}}),xe={class:"app-container"},ke=B({setup(_){let n=C({data:{adtype:"",channel_type:"",use_name:"",slot:"",country:"",st:"",et:""}});const o=e=>{console.log(e),n.data.adtype=e.adtype,n.data.channel_type=e.channel_type,n.data.use_name=e.use_name,n.data.slot=e.slot,n.data.country=e.country,n.data.st=e.date[0],n.data.et=e.date[1]};return(e,m)=>(u(),h("div",xe,[s(a(se),{onEmitParent:o}),s(a(fe),{json:a(n)},null,8,["json"]),s(a(be),{json:a(n)},null,8,["json"]),s(a(ye),{json:a(n)},null,8,["json"])]))}});export{ke as default};
