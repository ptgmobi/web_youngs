import{d as e,a as l,r as a,e as r,M as o,m as t,s as d,n as u,z as c,c as i,p as m,v as n,q as p,A as s,O as f,P as _,b as y,Q as b,x as V,L as F}from"./index-b160a4d6.js";import{c as h}from"./new-format-f712eb45.js";import{m as v}from"./message-6c553f21.js";import{d as k,e as g,f as x}from"./adnetwork-816c55e5.js";const w={class:"content-con flex column"},U={class:"flex jc-start form-one jc-start radio-box"},j=y(" whole traffic "),A=y(" diversity in platform "),N={class:"flex jc-start form-one jc-start radio-box"},O=y(" whole preclick "),S=y(" diversity in platform "),M={class:"flex jc-start form-one jc-start radio-box"},q={class:"flex jc-start form-one jc-start radio-box"},D=y(" app download "),P=y(" 非app download "),C={class:"flex jc-start form-one jc-start radio-box"},J=y(" 代理 "),T=y(" API "),R=y(" 直客 "),I={class:"flex jc-start form-one jc-start radio-box"},z={class:"w100 flex"},G=y(" Save "),L=e({__name:"details",setup(e){let{proxy:L}=F();const Q=l(),$="此项必填";let B=a({types:[{value:"1",label:"no creatives无素材"},{value:"2",label:"pictures图片广告"},{value:"3",label:"原生视频广告"},{value:"4",label:"rewarded video激励视频"},{value:"5",label:"敏感频道"},{value:"6",label:"CPS"},{value:"7",label:"新banner"},{value:"8",label:"新插屏"}]}),E=r(""),H=r(1),K=a({params:"",loading:!0,ruleForm:{name:"",short_name:"",desc:"",traffic_type:1,traffic_rate:{all:"100",ios:"100",android:"100"},pre_click_type:1,pre_click_rate:{all:"100",ios:"100",android:"100"},types:[],channel_content:1,channel_type:"1",fenix_connected:1,adv_id:"",group:""},rules:{name:[{required:!0,message:$,trigger:["blur","change"]}],short_name:[{required:!0,message:$,trigger:["blur","change"]}],desc:[{required:!0,message:$,trigger:["blur","change"]}],traffic_type:[{required:!0,message:$,trigger:["blur","change"]}],pre_click_type:[{required:!0,message:$,trigger:["blur","change"]}],types:[{required:!0,message:$,trigger:["blur","change"]}],channel_content:[{required:!0,message:$,trigger:["blur","change"]}],channel_type:[{required:!0,message:$,trigger:["blur","change"]}],fenix_connected:[{required:!0,message:$,trigger:["blur","change"]}]},siteData:[]});const W=()=>{X("ruleForm")},X=e=>{L.$refs[e].validate((e=>{if(!e)return!1;Z()}))},Y=["traffic_type","pre_click_type","fenix_connected","channel_content"],Z=async()=>{let e;K.ruleForm;let l={...b(K.ruleForm)};l=h(Y,l),1===l.traffic_type&&(delete l.traffic_rate.ios,delete l.traffic_rate.android),2===l.traffic_type&&delete l.traffic_rate.all,1===l.pre_click_type&&(delete l.pre_click_rate.ios,delete l.pre_click_rate.android),2===l.pre_click_type&&delete l.pre_click_rate.all,l.traffic_rate=JSON.stringify(l.traffic_rate),l.pre_click_rate=JSON.stringify(l.pre_click_rate),H.value,1===H.value&&(delete l.id,delete l.offer_id,e=await k(l)),2===H.value&&(e=await g(l)),v(e)&&window.close()};return o((()=>{if(E.value=Q.currentRoute.value.name,E.value,"ad-network-create"===E.value&&(H.value=1),"ad-network-edit"===E.value){H.value=2;const e=Q.currentRoute.value.params.id;(async e=>{const l=await x(e);let{data:a}=l;try{a.traffic_rate=JSON.parse(a.traffic_rate),a.pre_click_rate=JSON.parse(a.pre_click_rate),a.types=a.type?JSON.parse(a.type):[]}catch(r){}K.ruleForm={...a}})(e)}})),(e,l)=>{const a=t("el-input"),r=t("el-form-item"),o=t("el-radio"),b=t("el-checkbox"),F=t("el-checkbox-group"),h=t("el-switch"),v=t("el-form"),k=t("el-button");return d(),u("div",null,[c(" form "),i(v,{ref:"ruleForm",enctype:"multipart/form-data",rules:p(K).rules,model:p(K).ruleForm,"label-width":"240px","label-position":"right"},{default:m((()=>[n("div",w,[c(" AD Network Name "),i(r,{label:"AD Network Name:",prop:"name"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.name,"onUpdate:modelValue":l[0]||(l[0]=e=>p(K).ruleForm.name=e),modelModifiers:{trim:!0},class:"form-one",type:"text",placeholder:""},null,8,["modelValue"])])),_:1}),c(" AD Network Short Name "),i(r,{label:"AD Network Short Name:",prop:"short_name"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.short_name,"onUpdate:modelValue":l[1]||(l[1]=e=>p(K).ruleForm.short_name=e),modelModifiers:{trim:!0},class:"form-one",type:"text",placeholder:""},null,8,["modelValue"])])),_:1}),c(" AD Network Description "),i(r,{class:"mb-30",label:"AD Network Description:",prop:"desc"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.desc,"onUpdate:modelValue":l[2]||(l[2]=e=>p(K).ruleForm.desc=e),modelModifiers:{trim:!0},class:"form-one",type:"textarea",autosize:{minRows:8,maxRows:80},placeholder:""},null,8,["modelValue"])])),_:1}),c(" Percent Of Traffic "),i(r,{label:"Percent Of Traffic:",prop:"traffic_type"},{default:m((()=>[n("div",U,[i(o,{modelValue:p(K).ruleForm.traffic_type,"onUpdate:modelValue":l[3]||(l[3]=e=>p(K).ruleForm.traffic_type=e),label:1},{default:m((()=>[j])),_:1},8,["modelValue"]),i(o,{modelValue:p(K).ruleForm.traffic_type,"onUpdate:modelValue":l[4]||(l[4]=e=>p(K).ruleForm.traffic_type=e),label:2},{default:m((()=>[A])),_:1},8,["modelValue"])])])),_:1}),c(" All "),1==p(K).ruleForm.traffic_type?(d(),s(r,{key:0,label:"all(%)",prop:"traffic_rate.all"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.traffic_rate.all,"onUpdate:modelValue":l[5]||(l[5]=e=>p(K).ruleForm.traffic_rate.all=e),modelModifiers:{trim:!0},class:"form-one",type:"number",placeholder:""},null,8,["modelValue"])])),_:1})):c("v-if",!0),c(" iOS "),2==p(K).ruleForm.traffic_type?(d(),s(r,{key:1,label:"iOS(%):",prop:"traffic_rate.ios"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.traffic_rate.ios,"onUpdate:modelValue":l[6]||(l[6]=e=>p(K).ruleForm.traffic_rate.ios=e),modelModifiers:{trim:!0},class:"form-one",type:"number",placeholder:""},null,8,["modelValue"])])),_:1})):c("v-if",!0),c(" Android "),2==p(K).ruleForm.traffic_type?(d(),s(r,{key:2,label:"Android(%):",prop:"traffic_rate.android"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.traffic_rate.android,"onUpdate:modelValue":l[7]||(l[7]=e=>p(K).ruleForm.traffic_rate.android=e),modelModifiers:{trim:!0},class:"form-one",type:"number",placeholder:""},null,8,["modelValue"])])),_:1})):c("v-if",!0),c(" Percent Of Preclick "),i(r,{label:"Percent Of Preclick:",prop:"pre_click_type"},{default:m((()=>[n("div",N,[i(o,{modelValue:p(K).ruleForm.pre_click_type,"onUpdate:modelValue":l[8]||(l[8]=e=>p(K).ruleForm.pre_click_type=e),label:1},{default:m((()=>[O])),_:1},8,["modelValue"]),i(o,{modelValue:p(K).ruleForm.pre_click_type,"onUpdate:modelValue":l[9]||(l[9]=e=>p(K).ruleForm.pre_click_type=e),label:2},{default:m((()=>[S])),_:1},8,["modelValue"])])])),_:1}),c(" All "),1==p(K).ruleForm.pre_click_type?(d(),s(r,{key:3,label:"all(%)",prop:"pre_click_rate.all"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.pre_click_rate.all,"onUpdate:modelValue":l[10]||(l[10]=e=>p(K).ruleForm.pre_click_rate.all=e),modelModifiers:{trim:!0},class:"form-one",type:"number",placeholder:""},null,8,["modelValue"])])),_:1})):c("v-if",!0),c(" iOS "),2==p(K).ruleForm.pre_click_type?(d(),s(r,{key:4,label:"iOS(%):",prop:"pre_click_rate.ios"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.pre_click_rate.ios,"onUpdate:modelValue":l[11]||(l[11]=e=>p(K).ruleForm.pre_click_rate.ios=e),modelModifiers:{trim:!0},class:"form-one",type:"number",placeholder:""},null,8,["modelValue"])])),_:1})):c("v-if",!0),c(" Android "),2==p(K).ruleForm.pre_click_type?(d(),s(r,{key:5,label:"Android(%):",prop:"pre_click_rate.android"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.pre_click_rate.android,"onUpdate:modelValue":l[12]||(l[12]=e=>p(K).ruleForm.pre_click_rate.android=e),modelModifiers:{trim:!0},class:"form-one",type:"number",placeholder:""},null,8,["modelValue"])])),_:1})):c("v-if",!0),c(" type "),i(r,{label:"Type",prop:"type"},{default:m((()=>[n("div",M,[i(F,{modelValue:p(K).ruleForm.types,"onUpdate:modelValue":l[13]||(l[13]=e=>p(K).ruleForm.types=e)},{default:m((()=>[(d(!0),u(f,null,_(p(B).types,(e=>(d(),s(b,{key:e.value,label:e.value,disabled:e.require},{default:m((()=>[y(V(e.label),1)])),_:2},1032,["label","disabled"])))),128))])),_:1},8,["modelValue"])])])),_:1}),c(" 广告类型 "),i(r,{label:"广告类型:",prop:"channel_content"},{default:m((()=>[n("div",q,[i(o,{modelValue:p(K).ruleForm.channel_content,"onUpdate:modelValue":l[14]||(l[14]=e=>p(K).ruleForm.channel_content=e),label:1},{default:m((()=>[D])),_:1},8,["modelValue"]),i(o,{modelValue:p(K).ruleForm.channel_content,"onUpdate:modelValue":l[15]||(l[15]=e=>p(K).ruleForm.channel_content=e),label:2},{default:m((()=>[P])),_:1},8,["modelValue"])])])),_:1}),c(" Channel Type "),i(r,{label:"Channel Type:",prop:"channel_type"},{default:m((()=>[n("div",C,[i(o,{modelValue:p(K).ruleForm.channel_type,"onUpdate:modelValue":l[16]||(l[16]=e=>p(K).ruleForm.channel_type=e),label:"1"},{default:m((()=>[J])),_:1},8,["modelValue"]),i(o,{modelValue:p(K).ruleForm.channel_type,"onUpdate:modelValue":l[17]||(l[17]=e=>p(K).ruleForm.channel_type=e),label:"2"},{default:m((()=>[T])),_:1},8,["modelValue"]),i(o,{modelValue:p(K).ruleForm.channel_type,"onUpdate:modelValue":l[18]||(l[18]=e=>p(K).ruleForm.channel_type=e),label:"3"},{default:m((()=>[R])),_:1},8,["modelValue"])])])),_:1}),c(" Fenix Connected "),i(r,{label:"Fenix Connected:",prop:"fenix_connected"},{default:m((()=>[n("div",I,[i(h,{modelValue:p(K).ruleForm.fenix_connected,"onUpdate:modelValue":l[19]||(l[19]=e=>p(K).ruleForm.fenix_connected=e),"active-value":1,"inactive-value":2},null,8,["modelValue"])])])),_:1}),c(" Adv ID "),i(r,{label:"Adv ID:",prop:"adv_id"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.adv_id,"onUpdate:modelValue":l[20]||(l[20]=e=>p(K).ruleForm.adv_id=e),modelModifiers:{trim:!0},class:"form-one",type:"text",placeholder:""},null,8,["modelValue"])])),_:1}),c(" Group "),i(r,{label:"Group:",prop:"group"},{default:m((()=>[i(a,{modelValue:p(K).ruleForm.group,"onUpdate:modelValue":l[21]||(l[21]=e=>p(K).ruleForm.group=e),modelModifiers:{trim:!0},class:"form-one",type:"text",placeholder:""},null,8,["modelValue"])])),_:1})])])),_:1},8,["rules","model"]),c(" form "),c(" footer "),n("div",z,[i(k,{type:"primary",onClick:W},{default:m((()=>[G])),_:1})]),c(" footer ")])}}});export{L as default};
