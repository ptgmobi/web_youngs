var H=Object.defineProperty,J=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var S=(c,u,p)=>u in c?H(c,u,{enumerable:!0,configurable:!0,writable:!0,value:p}):c[u]=p,B=(c,u)=>{for(var p in u||(u={}))X.call(u,p)&&S(c,p,u[p]);if(z)for(var p of z(u))Y.call(u,p)&&S(c,p,u[p]);return c},E=(c,u)=>J(c,K(u));import{d as P,aj as Z,z as ee,C as ae,r as _,ak as le,k as x,v as d,i as V,x as l,h as i,j as o,N,c as w,O as te,o as b,F,l as k,y as C,t as O,q as oe,s as ne,W as re}from"./vendor-f1931894.js";import{P as ie}from"./index-72e015cb.js";import{A as se,a as ue,b as ce,c as de}from"./buzz-1c9c4a8d.js";import{m as D}from"./message-c1123ca0.js";import{_ as pe}from"./lodash-43532635.js";import{a as j}from"./new-format-e3b038cd.js";import{_ as me}from"./index-ee9f9318.js";const fe=c=>(oe("data-v-29c9e5d6"),c=c(),ne(),c),_e={class:"controlBox w100 mb-10"},be={class:"mb-10"},he=C(" Offer Create "),ve={class:"flex jc-start flex-wrap w100"},ge={class:"flex"},ye={class:"flex"},Ve=C(" \u67E5\u8BE2 "),xe={class:"flex jc-around"},we={class:"flex jc-around"},Fe=fe(()=>d("span",null,"-",-1)),ke={class:"flex mt-10"},Ce={class:"flex jc-around"},De={class:"w100 flex"},je=P({name:"buzz-list"}),Ue=P(E(B({},je),{setup(c){const u=Z({attribute_provider:[],platform:[],package_name:"",channel:"",id:"",offer_title:"",country:"",pid:""}),p=()=>[...new Array(20)].map((t,r)=>{const f=r*5/100;return{value:f,label:`${(Number(f)*100).toFixed(0)}%`}}),Q=()=>[...new Array(20)].map((t,r)=>{const f=(r*5+5)/100;return{value:f,label:`${(Number(f)*100).toFixed(0)}%`}});let e=ee({dialogVisible:!1,cache:{item:{},device:{}},searchForm:u.value,useData:u.value,loading:!0,options:{cutoff_start:p(),cutoff_end:Q(),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const U=()=>{e.useData=pe.cloneDeep(e.searchForm),A()},I=async n=>{let t={id:n.id,max_clk_num:n.max_clk_num};t=j(t);let r=await ue(t);console.log(r),D(r)},$=async n=>{console.log(n);const t=n.cutoff_start,r=n.cutoff_end,f=n.id;if(t<r){let h={cutoff_start:t,cutoff_end:r,id:f};h=j(h);const y=await ce(h);D(y)}else re({message:"start\u5FC5\u987B\u5C0F\u4E8Eend",type:"error",duration:2*1e3})},M=n=>{const r=(n.cutoff_end-n.cutoff_start)*n.device_num;return r?r.toFixed(0):""},L=async n=>{let t={id:n.id,status:n.status};t=j(t);const r=await de(t);D(r)},T=n=>`/buzz/edit/${n.id}`,A=async()=>{e.loading=!0;let n={page:e.pagination.listQuery.page,page_size:e.pagination.listQuery.limit};e.useData.attribute_provider&&(n.attribute_provider=e.useData.attribute_provider),e.useData.platform&&(n.platform=e.useData.platform),e.useData.package_name&&(n.pkg_name=e.useData.package_name),e.useData.channel&&(n.channel=e.useData.channel),e.useData.id&&(n.offer_id=e.useData.id),e.useData.offer_title&&(n.title=e.useData.offer_title),e.useData.country&&(n.country=e.useData.country),e.useData.pid&&(n.tracking_link=e.useData.pid);const t=await se(n),{data:r}=t;e.list=r==null?void 0:r.data,e.pagination.total=Number(r.count),e.loading=!1};return ae(()=>{U()}),(n,t)=>{const r=_("el-button"),f=_("router-link"),h=_("el-option"),y=_("el-select"),v=_("el-form-item"),g=_("el-input"),q=_("el-form"),m=_("el-table-column"),G=_("el-switch"),R=_("el-table"),W=le("loading");return b(),x("div",null,[d("div",_e,[d("div",be,[V(` <el-button type="primary" @click='createFun'>Offer Create</el-button> `),l(f,{to:"/buzz/create"},{default:i(()=>[l(r,{type:"primary"},{default:i(()=>[he]),_:1})]),_:1})]),l(q,{modelValue:o(e).searchForm,"onUpdate:modelValue":t[8]||(t[8]=a=>o(e).searchForm=a),inline:!0,class:"flex jc-between w100 ai-end"},{default:i(()=>[d("div",ve,[l(v,{label:""},{default:i(()=>[l(y,{modelValue:o(e).searchForm.attribute_provider,"onUpdate:modelValue":t[0]||(t[0]=a=>o(e).searchForm.attribute_provider=a),clearable:"",class:"search-con",placeholder:"Attribute Provider",style:{"min-width":"140px"}},{default:i(()=>[(b(!0),x(F,null,k(o(e).options.attribute_provider,a=>(b(),w(h,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(v,{label:""},{default:i(()=>[l(y,{modelValue:o(e).searchForm.platform,"onUpdate:modelValue":t[1]||(t[1]=a=>o(e).searchForm.platform=a),clearable:"",class:"search-con",placeholder:"Platform",style:{"min-width":"95px"}},{default:i(()=>[(b(!0),x(F,null,k(o(e).options.platform,a=>(b(),w(h,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(v,{label:""},{default:i(()=>[l(g,{modelValue:o(e).searchForm.package_name,"onUpdate:modelValue":t[2]||(t[2]=a=>o(e).searchForm.package_name=a),placeholder:"Package Name",class:"search-con",style:{"min-width":"120px"}},null,8,["modelValue"])]),_:1}),l(v,{label:""},{default:i(()=>[l(g,{modelValue:o(e).searchForm.channel,"onUpdate:modelValue":t[3]||(t[3]=a=>o(e).searchForm.channel=a),placeholder:"Channel",class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])]),_:1}),l(v,{label:""},{default:i(()=>[l(g,{modelValue:o(e).searchForm.id,"onUpdate:modelValue":t[4]||(t[4]=a=>o(e).searchForm.id=a),placeholder:"ID",class:"search-con"},null,8,["modelValue"])]),_:1}),l(v,{label:""},{default:i(()=>[l(g,{modelValue:o(e).searchForm.offer_title,"onUpdate:modelValue":t[5]||(t[5]=a=>o(e).searchForm.offer_title=a),placeholder:"Offer Title",class:"search-con",style:{"min-width":"90px"}},null,8,["modelValue"])]),_:1}),l(v,{label:""},{default:i(()=>[l(g,{modelValue:o(e).searchForm.country,"onUpdate:modelValue":t[6]||(t[6]=a=>o(e).searchForm.country=a),placeholder:"Country",class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])]),_:1}),l(v,{label:""},{default:i(()=>[l(g,{modelValue:o(e).searchForm.pid,"onUpdate:modelValue":t[7]||(t[7]=a=>o(e).searchForm.pid=a),placeholder:"Pid",class:"search-con"},null,8,["modelValue"])]),_:1})]),d("div",ge,[l(v,{class:"mr-0",style:{"margin-right":"0px"}},{default:i(()=>[d("div",ye,[l(r,{type:"primary",onClick:U},{default:i(()=>[Ve]),_:1}),V(' <el-button type="primary" @click="handleExportSearch">\u5BFC\u51FA</el-button> ')])]),_:1})])]),_:1},8,["modelValue"]),V(` <el-input placeholder="\u8BF7\u8F93\u5165\u5185\u5BB9" v-model="data.searchForm.data" class='search-input'>
        <el-button slot="append" icon="Search" @click='searchFun'></el-button>
      </el-input> `)]),V(" table "),N((b(),w(R,{center:"",data:o(e).list,class:"w100",height:"70vh",border:""},{default:i(()=>[l(m,{fixed:"",prop:"offer_id",label:"ID",align:"center"}),l(m,{fixed:"",prop:"channel",label:"Channel",align:"center"}),l(m,{prop:"pkg_name",label:"Package Name",align:"center"}),l(m,{prop:"title",label:"Offer Title",width:"120",align:"center"}),l(m,{prop:"attribute_provider",label:"Attribute Provider",align:"center"}),l(m,{prop:"pid",label:"Pid",align:"center"}),l(m,{prop:"platform",label:"Platform",align:"center"},{default:i(a=>[C(O(Number(a.row.platform)===1?"Android":"iOS"),1)]),_:1}),l(m,{prop:"country",label:"Country",align:"center"}),l(m,{prop:"payout",label:"Payout",align:"center"}),l(m,{label:"Click Limitation(w)",width:"150",align:"center"},{default:i(a=>[d("div",xe,[l(g,{modelValue:a.row.max_clk_num,"onUpdate:modelValue":s=>a.row.max_clk_num=s,placeholder:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),l(r,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:s=>I(a.row)},null,8,["onClick"])])]),_:1}),l(m,{label:"Device Cutoff",width:"250",align:"center"},{default:i(a=>[d("div",we,[d("div",null,[d("div",null,[l(y,{modelValue:a.row.cutoff_start,"onUpdate:modelValue":s=>a.row.cutoff_start=s,class:"cutoff",filterable:"",placeholder:"start"},{default:i(()=>[(b(!0),x(F,null,k(o(e).options.cutoff_start,s=>(b(),w(h,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),Fe,l(y,{modelValue:a.row.cutoff_end,"onUpdate:modelValue":s=>a.row.cutoff_end=s,class:"cutoff",filterable:"",placeholder:"end"},{default:i(()=>[(b(!0),x(F,null,k(o(e).options.cutoff_end,s=>(b(),w(h,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),d("div",ke,[d("span",null,O(M(a.row)),1)])]),l(r,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:s=>$(a.row)},null,8,["onClick"])])]),_:1}),l(m,{width:"100",label:"Operation",align:"center"},{default:i(a=>[d("div",Ce,[l(f,{to:T(a.row)},{default:i(()=>[l(r,{class:"cp mr-10",type:"primary",icon:"Edit",circle:""})]),_:2},1032,["to"]),V(` <el-button class='cp mr-10' type="primary" icon="Edit" circle @click='editFun(scope.row)'></el-button> `),l(G,{modelValue:a.row.status,"onUpdate:modelValue":s=>a.row.status=s,"active-value":1,"inactive-value":2,onChange:s=>L(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:1})]),_:1},8,["data"])),[[W,o(e).loading]]),V(" \u5206\u9875 "),d("div",De,[N(l(o(ie),{page:o(e).pagination.listQuery.page,"onUpdate:page":t[9]||(t[9]=a=>o(e).pagination.listQuery.page=a),limit:o(e).pagination.listQuery.limit,"onUpdate:limit":t[10]||(t[10]=a=>o(e).pagination.listQuery.limit=a),total:o(e).pagination.total,"page-sizes":o(e).pagination.pageSizes,onPagination:A},null,8,["page","limit","total","page-sizes"]),[[te,o(e).pagination.total]])])])}}}));var Qe=me(Ue,[["__scopeId","data-v-29c9e5d6"]]);export{Qe as default};
