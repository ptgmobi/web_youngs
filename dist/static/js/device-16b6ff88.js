import{d as e,y as t,r as s,o as a,i as o,s as l,v as r,f as u,h as n,x as c,t as d}from"./vendor-691ef2b9.js";const p={class:"full"},i={class:"w100 flex mt-20"},b=l("span",null,"选中合计：",-1),m=["textContent"],h=e({props:{json:{require:!0,default:()=>({}),type:Object}},emits:["kk","up"],setup(e,{emit:h}){let w=[];const _=t({search:{id:""},set:new Set,setObj:{},spanArr:w,arr:w,select:w,statisticsCount:0}),f=()=>{Object.keys(_.setObj).forEach((e=>{let t=[];_.arr.forEach((s=>{s.source===e&&t.push(s.select_status)})),_.setObj[e]=!0,t.includes(!1)&&(_.setObj[e]=!1)})),j()},j=()=>{let e=_.arr.reduce(((e,t)=>t.select_status?e+parseInt(t.device_count):e),0);_.statisticsCount=e},v=()=>{let e=[],t=0;_.arr.forEach((s=>{s.select_status&&(e.push({source:s.source,label:s.label}),t+=parseInt(s.device_count))})),h("kk",e)},C=({row:e,column:t,rowIndex:s,columnIndex:a})=>{if(0===a){const e=_.spanArr[s];return{rowspan:e,colspan:e>0?1:0}}};return(e,t)=>{const h=s("el-checkbox"),w=s("el-table-column"),j=s("el-table");return a(),o("div",null,[l("div",p,[r(j,{data:n(_).arr,"span-method":C,border:"",style:{width:"100%","margin-top":"20px"}},{default:u((()=>[r(w,{prop:"source",label:"Source",width:"180"},{default:u((e=>[r(h,{modelValue:n(_).setObj[e.row.source],"onUpdate:modelValue":t=>n(_).setObj[e.row.source]=t,onChange:t=>{return s=e.row.source,a=n(_).setObj[e.row.source],_.arr.map((e=>{e.source===s&&(e.select_status=a)})),void v();var s,a}},{default:u((()=>[c(d(e.row.source),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),r(w,{prop:"label",label:"Label"}),r(w,{prop:"slot_id",label:"Slot ID"}),r(w,{prop:"device_count",label:"Count"}),r(w,{prop:"select",label:"Select"},{default:u((e=>[r(h,{modelValue:e.row.select_status,"onUpdate:modelValue":t=>e.row.select_status=t,onChange:t=>(e.row,f(),void v())},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1})])),_:1},8,["data"]),l("div",i,[b,l("span",{textContent:d(n(_).statisticsCount)},null,8,m)])])])}}});export{h as _};
