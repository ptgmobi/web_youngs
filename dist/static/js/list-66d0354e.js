var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&s(e,l,a[l]);return e};import{_ as n,d as u,Z as p,h as d,r as c,L as m,q as b,$ as _,o as v,c as f,x as g,e as y,z as h,s as w,v as V,U as k,A as j,V as F,N as x,O as U,y as C,f as O}from"./main-10c8b00d.js";import{u as z,s as P}from"./useUtils-663e62f2.js";import{P as Q}from"./index-d89862df.js";import{m as D}from"./message-83da0e90.js";import{_ as S}from"./lodash-081287e7.js";import{h as A,g as I}from"./new-format-c9dfc3b7.js";import{c as $}from"./clipboard-5e2fa5f3.js";import{A as q,a as N,b as E}from"./dsp-adcontrol-eb65532e.js";import{_ as B}from"./search-b1ea636e.js";import"./format-7f997de4.js";import"./moment-9bd84dc2.js";const L={class:"controlBox w100 mb-10"},R={class:"mb-10 w100"},T=O("新建广告系列"),Z={class:"flex jc-start flex-wrap w100"},G={class:"flex"},H={class:"flex"},J=O(" 查询 "),K={class:"flex jc-around"},M=O("编辑"),W=O("复制"),X=O("归档"),Y={class:"w100 flex"},ee=O("复制"),ae=u({name:"adserieslist"});var le,te=n(u((le=i({},ae),a(le,l({setup(e){const{status:a,adv_type:l,ind_cla:t,third_party:o,return_mode:r}=P,{goNewUrl:s,openAlert:n}=z(),u=p({status:"",adv_series_type:"",marbet_target:"",is_del:"1",value_type:"adv_series_name",value:""}),O=d(!1),ae=c({report_api:""});let le=c({dialogVisible:!1,cache:{item:{}},searchForm:u.value,useData:u.value,loading:!0,options:{status:a,adv_series_type:[{value:1,label:"动态商品促销"},{value:2,label:"固定链接推广"}],marbet_target:[{value:1,label:"再营销"},{value:2,label:"拉新"}],value_type:[{value:"adv_series_name",label:"广告系列名称"},{value:"id",label:"广告系列ID"},{value:"desc",label:"描述"}]},list:[],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const te=()=>{le.useData=S.cloneDeep(le.searchForm),ie()};d([]);const oe=()=>{s({url:"/adcontrol/adgroup/create",query:{type:"create"}})},re=({row:e})=>{const{id:a}=e;s({url:`/adcontrol/adgroup/edit/${a}`,query:{type:"edit"}})},se=async e=>{n({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},(e=>async()=>{const{row:a,$index:l}=e,t=await E({id:a.id});D(t)&&le.list.splice(l,1)})(e))},ie=async()=>{le.loading=!0;let e=i({page:le.pagination.listQuery.page,limit:le.pagination.listQuery.limit},u.value);e[e.value_type]=e.value,delete e.value_type,delete e.value,e=A(e);const a=await q(e),{data:l}=a;le.list=null==l?void 0:l.data,le.pagination.total=Number(l.count),le.loading=!1};return m((()=>{te()})),(e,a)=>{const l=b("el-button"),t=b("el-option"),o=b("el-select"),r=b("el-form-item"),s=b("el-input"),i=b("el-checkbox"),n=b("el-form"),u=b("el-table-column"),p=b("el-switch"),d=b("el-table"),c=b("el-dialog"),m=_("loading");return v(),f("div",null,[g("div",L,[y(B),g("div",R,[h(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),h(' <router-link to="/buzz/create"> '),y(l,{type:"primary",onClick:oe},{default:w((()=>[T])),_:1}),h(" </router-link> ")]),y(n,{modelValue:V(le).searchForm,"onUpdate:modelValue":a[6]||(a[6]=e=>V(le).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:w((()=>[g("div",Z,[y(r,{label:""},{default:w((()=>[y(o,{modelValue:V(le).searchForm.status,"onUpdate:modelValue":a[0]||(a[0]=e=>V(le).searchForm.status=e),filterable:"",clearable:"",placeholder:"全部状态"},{default:w((()=>[(v(!0),f(x,null,U(V(le).options.status,(e=>(v(),j(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(r,{label:""},{default:w((()=>[y(o,{modelValue:V(le).searchForm.adv_series_type,"onUpdate:modelValue":a[1]||(a[1]=e=>V(le).searchForm.adv_series_type=e),filterable:"",clearable:"",placeholder:"广告类型"},{default:w((()=>[(v(!0),f(x,null,U(V(le).options.adv_series_type,(e=>(v(),j(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(r,{label:""},{default:w((()=>[y(o,{modelValue:V(le).searchForm.marbet_target,"onUpdate:modelValue":a[2]||(a[2]=e=>V(le).searchForm.marbet_target=e),filterable:"",clearable:"",placeholder:"营销目标"},{default:w((()=>[(v(!0),f(x,null,U(V(le).options.marbet_target,(e=>(v(),j(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(r,{label:""},{default:w((()=>[y(s,{modelValue:V(le).searchForm.value,"onUpdate:modelValue":a[4]||(a[4]=e=>V(le).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:w((()=>[y(o,{modelValue:V(le).searchForm.value_type,"onUpdate:modelValue":a[3]||(a[3]=e=>V(le).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:w((()=>[(v(!0),f(x,null,U(V(le).options.value_type,(e=>(v(),j(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),y(r,{label:""},{default:w((()=>[y(i,{modelValue:V(le).searchForm.is_del,"onUpdate:modelValue":a[5]||(a[5]=e=>V(le).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),g("div",G,[y(r,{class:"mr-0",style:{"margin-right":"0px"}},{default:w((()=>[g("div",H,[y(l,{type:"primary",onClick:te},{default:w((()=>[J])),_:1}),h(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),h(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),h(" table "),k((v(),j(d,{center:"",data:V(le).list,class:"w100",border:""},{default:w((()=>[y(u,{sortable:"",prop:"id",label:"广告系列ID",align:"center"}),y(u,{sortable:"",width:"120",prop:"adv_series_name",label:"广告系列名称",align:"center"}),y(u,{sortable:"",prop:"status",label:"开关",align:"center"},{default:w((e=>[y(p,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onClick:a=>(async({row:e})=>{let a={id:e.id,status:e.status},l=await N(a);D(l)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),h(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),y(u,{sortable:"",prop:"status",label:"状态",align:"center"},{default:w((e=>[g("span",null,C(V(I)(e.row.status,V(le).options.status)),1)])),_:1}),y(u,{sortable:"",prop:"ad_group",label:"广告组",align:"center"},{default:w((e=>[g("span",null,C(e.row.ad_group),1)])),_:1}),y(u,{sortable:"",prop:"ad",label:"广告",align:"center"},{default:w((e=>[g("span",null,C(e.row.ad),1)])),_:1}),y(u,{width:"200",label:"操作",align:"center"},{default:w((e=>[g("div",K,[y(l,{class:"cp",type:"primary",onClick:a=>re(e)},{default:w((()=>[M])),_:2},1032,["onClick"]),y(l,{class:"cp",type:"primary",onClick:a=>re(e)},{default:w((()=>[W])),_:2},1032,["onClick"]),h(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),y(l,{class:"cp",type:"danger",onClick:a=>se(e),disabled:2===e.row.is_del},{default:w((()=>[X])),_:2},1032,["onClick","disabled"])])])),_:1}),y(u,{sortable:"",width:"120",prop:"adv_series_type",label:"广告类型",align:"center"},{default:w((e=>[g("span",null,C(V(I)(e.row.adv_type,V(le).options.adv_series_type)),1)])),_:1}),y(u,{sortable:"",width:"120",prop:"marbet_target",label:"营销目标",align:"center"},{default:w((e=>[g("span",null,C(V(I)(e.row.adv_type,V(le).options.marbet_target)),1)])),_:1}),y(u,{sortable:"",width:"120",prop:"user",label:"创建人",align:"center"}),y(u,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),y(u,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"}),y(u,{sortable:"",width:"160",prop:"imp_number",label:"展示数",align:"center"})])),_:1},8,["data"])),[[m,V(le).loading]]),h(" 分页 "),g("div",Y,[k(y(Q,{page:V(le).pagination.listQuery.page,"onUpdate:page":a[7]||(a[7]=e=>V(le).pagination.listQuery.page=e),limit:V(le).pagination.listQuery.limit,"onUpdate:limit":a[8]||(a[8]=e=>V(le).pagination.listQuery.limit=e),total:V(le).pagination.total,"page-sizes":V(le).pagination.pageSizes,onPagination:ie},null,8,["page","limit","total","page-sizes"]),[[F,V(le).pagination.total]])]),h(" report api "),y(c,{modelValue:O.value,"onUpdate:modelValue":a[10]||(a[10]=e=>O.value=e),title:"Report Api",width:"90%"},{default:w((()=>[g("p",null,C(V(ae).report_api),1),y(l,{class:"cp mr-10",type:"default",onClick:a[9]||(a[9]=e=>{return a=V(ae).report_api,void $(a);var a})},{default:w((()=>[ee])),_:1})])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-3d91c0cc"]]);export{te as default};
