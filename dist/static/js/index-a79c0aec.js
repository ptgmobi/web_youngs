var q=Object.defineProperty;var T=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var M=(_,r,o)=>r in _?q(_,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):_[r]=o,A=(_,r)=>{for(var o in r||(r={}))z.call(r,o)&&M(_,o,r[o]);if(T)for(var o of T(r))L.call(r,o)&&M(_,o,r[o]);return _};import{d as C,z as V,C as O,r as y,o as d,k as b,v as x,x as c,h as m,j as a,F as D,l as j,i as B,y as $,af as R,c as w,w as P,t as N,q as H,s as W,b as Y}from"./vendor-bf64253d.js";import{f as G,h as K,i as J,j as Q}from"./overview-870ade87.js";import{g as F,a as X,t as E}from"./format-b76f9697.js";import{_ as Z}from"./lodash-05c10b51.js";import{h as U}from"./new-format-b98ea9a0.js";import{_ as ee}from"./index-9fef49c5.js";import{_ as ae}from"./index-1d6fe13a.js";import{W as te}from"./index-9a99ab6f.js";import"./moment-1cf83a0b.js";const le={class:"white-bg control-box flex jc-between ai-start p0-0"},oe={class:"flex jc-start flex-wrap ai-start"},ne={class:"flex"},re=$(" \u67E5\u8BE2 "),se=C({emits:["emitParent"],setup(_,{emit:r}){const o={adtype:"",channel_type:"",use_name:"",slot:"",country:"",date:F(6,"day")},e=V({shortcuts:[{text:"\u4ECA\u5929",value:F(0,"day")},{text:"\u6628\u5929",value:()=>X(1,1,"day")},{text:"\u6700\u8FD17\u5929",value:()=>F(6,"day")},{text:"\u6700\u8FD130\u5929",value:()=>F(29,"day")}],options:{adtype:["ssp","fenix"],channel_type:[{value:1,label:"\u4EE3\u7406"},{value:2,label:"API"},{value:3,label:"\u76F4\u5BA2"}],country:[{value:"",label:""}],user_name:[{label:"",value:""}],slot:[{value:"",label:""}]},data:o}),f=async()=>{const{data:i}=await G();e.options.user_name=i==null?void 0:i.user_name,e.options.slot=i==null?void 0:i.slot,e.options.country=i==null?void 0:i.country},g=()=>{},h=()=>{console.warn("set search data"),r("emitParent",Z.cloneDeep(R(e.data)))};return O(()=>{f(),h()}),(i,n)=>{const s=y("el-date-picker"),l=y("el-form-item"),p=y("el-option"),u=y("el-select"),v=y("el-button"),k=y("el-form");return d(),b("div",null,[x("div",le,[c(k,{inline:!0,model:a(e).data,class:"flex jc-between ai-start w100"},{default:m(()=>[x("div",oe,[c(l,{label:"\u65E5\u671F\u9009\u62E9"},{default:m(()=>[c(s,{modelValue:a(e).data.date,"onUpdate:modelValue":n[0]||(n[0]=t=>a(e).data.date=t),class:"search-con",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",shortcuts:a(e).shortcuts,clearable:!1},null,8,["modelValue","shortcuts"])]),_:1}),c(l,{label:"\u5206\u6210\u65B9\u6CD5"},{default:m(()=>[c(u,{modelValue:a(e).data.adtype,"onUpdate:modelValue":n[1]||(n[1]=t=>a(e).data.adtype=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",onChange:g},{default:m(()=>[(d(!0),b(D,null,j(a(e).options.adtype,t=>(d(),w(p,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),c(l,{label:"\u4E1A\u52A1\u7C7B\u578B"},{default:m(()=>[c(u,{modelValue:a(e).data.channel_type,"onUpdate:modelValue":n[2]||(n[2]=t=>a(e).data.channel_type=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:g},{default:m(()=>[B(` <div class="flex jc-between p10 pt-0">
                <el-button type="primary" plain size="mini" @click="selectAllProduct()">\u5168\u9009</el-button>
                <el-button size="mini" type="danger" plain @click="unSelectedAllProduct()">\u6E05\u7A7A</el-button>
              </div> `),(d(!0),b(D,null,j(a(e).options.channel_type,(t,S)=>(d(),w(p,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),c(l,{label:"User Name"},{default:m(()=>[c(u,{modelValue:a(e).data.user_name,"onUpdate:modelValue":n[3]||(n[3]=t=>a(e).data.user_name=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:g},{default:m(()=>[(d(!0),b(D,null,j(a(e).options.user_name,(t,S)=>(d(),w(p,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),c(l,{label:"Slot"},{default:m(()=>[c(u,{modelValue:a(e).data.slot,"onUpdate:modelValue":n[4]||(n[4]=t=>a(e).data.slot=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:g},{default:m(()=>[(d(!0),b(D,null,j(a(e).options.slot,(t,S)=>(d(),w(p,{key:t,label:t.toString(),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),c(l,{label:"\u56FD\u5BB6"},{default:m(()=>[c(u,{modelValue:a(e).data.country,"onUpdate:modelValue":n[5]||(n[5]=t=>a(e).data.country=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:g},{default:m(()=>[(d(!0),b(D,null,j(a(e).options.country,(t,S)=>(d(),w(p,{key:t,label:t.toString(),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),x("div",null,[x("div",ne,[c(v,{type:"primary",onClick:h},{default:m(()=>[re]),_:1})])])]),_:1},8,["model"])])])}}});const I=_=>(H("data-v-422fd230"),_=_(),W(),_),ue={class:"flex flex-wrap jc-between"},ce={class:"flex jc-between"},de={key:0,class:"color_primary"},ie=I(()=>x("span",{class:"small_icon"},"$",-1)),pe={key:1,class:"color_primary"},_e=I(()=>x("span",{class:"small_icon"},"%",-1)),fe=C({props:{json:{require:!0,default:{},type:Object}},setup(_){const r=_,o={profit:"\u6BDB\u5229\u5408\u8BA1",revenue:"\u6536\u5165\u5408\u8BA1",cost:"\u652F\u51FA\u5408\u8BA1",profit_rate:"\u6BDB\u5229\u7387"},e={},f=V({baseData:r.json,data:e,titleMap:o,groupVal:["profit","revenue","cost"],groupRate:["profit_rate"]}),g=async()=>{let h=A({},f.baseData.data);h=U(h);const{data:i}=await K(h);if(Array.isArray(i)&&i.length!==0)f.data=i[0];else for(const n in f.data)Object.prototype.hasOwnProperty.call(f.data,n)&&(f.data[n]=0)};return P(()=>f.baseData,(h,i)=>{console.warn("get card data"),g()},{deep:!0}),O(()=>{}),(h,i)=>{const n=y("el-card");return d(),b("div",null,[x("div",ue,[(d(!0),b(D,null,j(a(f).titleMap,(s,l)=>(d(),w(n,{class:"box-card m10"},{default:m(()=>[x("div",ce,[x("h3",null,N(a(f).titleMap[l]),1),a(f).groupVal.includes(l)?(d(),b("h2",de,[ie,$(" "+N(a(f).data[l]),1)])):B("v-if",!0),a(f).groupRate.includes(l)?(d(),b("h2",pe,[$(N(a(E)(a(f).data[l]*100))+" ",1),_e])):B("v-if",!0)])]),_:2},1024))),256))])])}}});var me=ee(fe,[["__scopeId","data-v-422fd230"]]);const be=C({props:{json:{require:!0,default:{},type:Object}},setup(_){const r=_,o=V({data:{target:"profit"},options:{target:[{value:"profit",label:"\u6BDB\u5229"},{value:"revenue",label:"\u6536\u5165"},{value:"cost",label:"\u652F\u51FA"},{value:"profit_rate",label:"\u6BDB\u5229\u7387"}]}}),e=V({data:r.json,baseCharData:{},chartData:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{show:!0,backgroundColor:"#6a7985"}}},legend:{show:!0,data:["all"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"",type:"line",stack:"Total",emphasis:{focus:"series"},data:[]}]}});P(()=>e.data,(s,l)=>{console.warn("get chart data"),n()},{deep:!0});const f=()=>{var l;let s=o.options.target.find(p=>p.value===o.data.target);return(l=s==null?void 0:s.label)!=null?l:""},g=["6"],h=()=>{i()},i=()=>{var p;let s=o.data.target;console.log(s);let l=(p=e.baseCharData[s])!=null?p:[];if(g.includes(o.data.target.toString())){let u=l.map(v=>E(v*100,2));e.chartData.series[0].data=u}else{let u=l.map(v=>E(v,2));e.chartData.series[0].data=u}},n=async()=>{var p;let s=A({},e.data.data);s=U(s),e.chartData.xAxis[0].data=[],e.chartData.series[0].data=[];const{data:l}=await J(s);console.log(l),e.baseCharData=l,e.chartData.xAxis[0].data=(p=l==null?void 0:l.date)!=null?p:[],e.chartData.series[0].name=f(),i()};return(s,l)=>{const p=y("el-option"),u=y("el-select"),v=y("el-form-item"),k=y("el-form");return d(),b("div",null,[x("div",null,[c(k,{inline:!0,model:a(o).data,class:"flex jc-between w100"},{default:m(()=>[c(v,{label:"\u6307\u6807"},{default:m(()=>[c(u,{modelValue:a(o).data.target,"onUpdate:modelValue":l[0]||(l[0]=t=>a(o).data.target=t),placeholder:"Select",onChange:h},{default:m(()=>[(d(!0),b(D,null,j(a(o).options.target,t=>(d(),w(p,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),x("div",null,[c(a(ae),{"chart-data":a(e).chartData},null,8,["chart-data"])])])}}}),he={class:"mt-20"},ve={class:"flex jc-end mb-10"},ye=C({props:{json:{require:!0,default:{},type:Object}},setup(_){let o=V({data:_.json,list:[],exportExcel:{buttonName:"\u5BFC\u51FA",tHeader:["\u65E5\u671F"],filterVal:["date"],fileName:"profit"}}),e=V([{value:"user_id",label:"User ID"},{value:"account_email",label:"Account Email"},{value:"user_name",label:"User Name"},{value:"profit",label:"\u6BDB\u5229"},{value:"revenue",label:"\u6536\u5165"},{value:"cost",label:"\u652F\u51FA"},{value:"profit_rate",label:"\u6BDB\u5229\u7387"}]);P(()=>o.data,(n,s)=>{console.warn("get table data"),f()},{deep:!0});const f=async()=>{let n=A({},o.data.data);n=U(n),o.list=[];const{data:s}=await Q(n);o.list=s};let g=["profit_rate"],h=Y(()=>{let n=[];return o.list.map(s=>{let l={},p=A({},s);for(const u in p)if(Object.prototype.hasOwnProperty.call(p,u)){const v=p[u];g.includes(u)?l[u]=`${E(v*100,2)}%`:l[u]=v}n.push(l)}),n});const i=Y(()=>{var s;let n=h.value;if(n&&Array.isArray(n)){let l=(s=n[0])!=null?s:{};return Object.keys(l)}});return(n,s)=>{const l=y("el-table-column"),p=y("el-table");return d(),b("div",he,[x("div",ve,[c(te,{"button-name":a(o).exportExcel.buttonName,list:a(h),"t-header":a(i),"filter-val":a(i),filename:a(o).exportExcel.fileName},null,8,["button-name","list","t-header","filter-val","filename"])]),B(" table "),c(p,{center:"",data:a(h),class:"w100",border:""},{default:m(()=>[(d(!0),b(D,null,j(a(e),u=>{var v;return d(),w(l,{key:u.value,prop:u.value,label:u.label,fixed:(v=u==null?void 0:u.fixed)!=null?v:!1,align:"center"},null,8,["prop","label","fixed"])}),128))]),_:1},8,["data"])])}}}),xe={class:"app-container"},ke=C({setup(_){let r=V({data:{adtype:"",channel_type:"",use_name:"",slot:"",country:"",st:"",et:""}});const o=e=>{console.log(e),r.data.adtype=e.adtype,r.data.channel_type=e.channel_type,r.data.use_name=e.use_name,r.data.slot=e.slot,r.data.country=e.country,r.data.st=e.date[0],r.data.et=e.date[1]};return(e,f)=>(d(),b("div",xe,[c(a(se),{onEmitParent:o}),c(a(me),{json:a(r)},null,8,["json"]),c(a(be),{json:a(r)},null,8,["json"]),c(a(ye),{json:a(r)},null,8,["json"])]))}});export{ke as default};
