import{R as l,d as e,r as a,I as o,M as t,m as i,s as n,n as s,z as r,c as d,p as c,v as u,x as p,A as f,O as y,P as w,q as b}from"./index-1cdb801e.js";import{m as _}from"./message-c3f52f6e.js";import{c as m}from"./new-format-a01940be.js";const h={key:0},v={key:0},k={key:0},V={key:0},g={key:0},O={key:0},C={key:0},A={key:0},S=e({setup(e){let S=a({androidArr:[],iOSArr:[]});const U=(l,e)=>{let a=l,o=[];for(const t in a)if(a.hasOwnProperty(t)){const l=a[t];let i={country:t,platform:e};i=Object.assign({},i,l),o.push(i)}return o},E=l=>{let e=new Set;if(Array.isArray(l))return l.map((l=>{l.all.map((l=>{e.add(null==l?void 0:l.lib_type)}))})),Array.from(e).sort()},j=o((()=>U(S.androidArr,"1"))),q=o((()=>U(S.iOSArr,"2"))),P=o((()=>E(j.value))),F=o((()=>E(q.value))),M=l=>{l.showtype=!l.showtype},T=async(e,a)=>{if("all"===a){let t={update_type:a,all:void 0};t=Object.assign({},t,e);t=m(["platform","thread_offer_num"],t),delete t.all;const i=await(o=t,l({url:"/server-click/overall-setting-all",data:o,method:"post",bfLoading:!1,isParams:!1,isAlertErrorMsg:!1}));_(i)&&(e.showtype=!e.showtype)}var o;if("one"===a){let o={update_type:a};o=Object.assign({},o,e);o=m(["id","platform","lib_status","lib_quantity_proportion"],o);const t=await function(e){return l({url:"/server-click/overall-setting-one",data:e,method:"post",bfLoading:!1,isParams:!1,isAlertErrorMsg:!1})}(o);_(t)&&(e.showtype=!e.showtype)}},x=async()=>{const e=await(a={},l({url:"/server-click/overall-setting-list",data:a,method:"get",bfLoading:!1,isParams:!1,isAlertErrorMsg:!1}));var a;const{data:o}=e;let t=(l=>{let e=[],a=[];for(const o in l)if(l.hasOwnProperty(o)){let t=l[o],i=o.split("_");t.platform=i[0],t.country=i[1],t.showtype=!1,t.all.map((l=>{l.showtype=!1})),"1"===t.platform&&e.push(t),"2"===t.platform&&a.push(t)}return{androidObj:e,iOSObj:a}})(o);S.androidArr=t.androidObj,S.iOSArr=t.iOSObj};return t((()=>{x()})),(l,e)=>{const a=i("el-table-column"),o=i("el-input"),t=i("el-button"),_=i("el-switch"),m=i("el-table");return n(),s(y,null,[r(" Android "),d(m,{center:"",data:b(j),class:"w100 mt-30",border:""},{default:c((()=>[d(a,{label:"Android服预配置"},{default:c((()=>[d(a,{label:"国家"},{default:c((l=>[u("span",null,p(l.row.country),1)])),_:1}),d(a,{label:"请求数"},{default:c((l=>[u("span",null,p(l.row.request),1)])),_:1}),d(a,{label:"总设备数"},{default:c((l=>[u("span",null,p(l.row.all_device_num),1)])),_:1}),d(a,{label:"每线程offer数"},{default:c((l=>[r(" <span>{{scope.row.content.thread_offer_num}}</span> "),d(o,{placeholder:"请输入内容",modelValue:l.row.thread_offer_num,"onUpdate:modelValue":e=>l.row.thread_offer_num=e,disabled:!l.row.showtype},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),d(a,{label:"操作"},{default:c((l=>[l.row.showtype?r("v-if",!0):(n(),f(t,{key:0,class:"cp",type:"default",icon:"Edit",circle:"",onClick:e=>M(l.row)},null,8,["onClick"])),l.row.showtype?(n(),f(t,{key:1,class:"cp",type:"primary",icon:"Edit",circle:"",onClick:e=>T(l.row,"all")},null,8,["onClick"])):r("v-if",!0),r(" <i class=\"el-icon-edit cp\" \n          v-if='!scope.row.showtype'\n          @click='changeShowType(scope.row)'></i>\n          <i class=\"el-icon-edit-outline cp\" \n          v-if='scope.row.showtype'\n          @click='submitFun(scope.row, \"all\")'></i> ")])),_:1})])),_:1}),(n(!0),s(y,null,w(b(P),(l=>(n(),f(a,{key:l,label:l},{default:c((()=>[d(a,{label:"设备数"},{default:c((e=>[(n(!0),s(y,null,w(e.row.all,(e=>(n(),s(y,null,[e.lib_type===l?(n(),s("span",h,p(e.lib_device_num),1)):r("v-if",!0)],64)))),256))])),_:2},1024),d(a,{label:"状态"},{default:c((e=>[(n(!0),s(y,null,w(e.row.all,(e=>(n(),s(y,null,[e.lib_type===l?(n(),s("div",v,[d(_,{disabled:!e.showtype,modelValue:e.lib_status,"onUpdate:modelValue":l=>e.lib_status=l,"active-value":1,"inactive-value":2},null,8,["disabled","modelValue","onUpdate:modelValue"])])):r("v-if",!0)],64)))),256))])),_:2},1024),d(a,{label:"线程数"},{default:c((e=>[(n(!0),s(y,null,w(e.row.all,(e=>(n(),s(y,null,[e.lib_type===l?(n(),s("div",k,[d(o,{placeholder:"请输入内容",modelValue:e.lib_quantity_proportion,"onUpdate:modelValue":l=>e.lib_quantity_proportion=l,disabled:!e.showtype},null,8,["modelValue","onUpdate:modelValue","disabled"])])):r("v-if",!0)],64)))),256))])),_:2},1024),d(a,{label:"操作"},{default:c((e=>[(n(!0),s(y,null,w(e.row.all,(e=>(n(),s(y,null,[e.lib_type===l?(n(),s("div",V,[e.showtype?r("v-if",!0):(n(),f(t,{key:0,class:"cp",type:"default",icon:"Edit",circle:"",onClick:l=>M(e)},null,8,["onClick"])),e.showtype?(n(),f(t,{key:1,class:"cp",type:"primary",icon:"Edit",circle:"",onClick:l=>T(e,"one")},null,8,["onClick"])):r("v-if",!0),r(" <i class=\"el-icon-edit cp\" \n              v-if='!p.showtype'\n              @click='changeShowType(p)'></i>\n              <i class=\"el-icon-edit-outline cp\" \n              v-if='p.showtype'\n              @click='submitFun(p, \"one\")'></i> ")])):r("v-if",!0)],64)))),256))])),_:2},1024)])),_:2},1032,["label"])))),128))])),_:1},8,["data"]),r(" iOS "),d(m,{center:"",data:b(q),style:{width:"100%"},class:"w100 mt-30",border:""},{default:c((()=>[d(a,{label:"iOS服预配置"},{default:c((()=>[d(a,{label:"国家"},{default:c((l=>[u("span",null,p(l.row.country),1)])),_:1}),d(a,{label:"请求数"},{default:c((l=>[u("span",null,p(l.row.request),1)])),_:1}),d(a,{label:"总设备数"},{default:c((l=>[u("span",null,p(l.row.all_device_num),1)])),_:1}),d(a,{label:"每线程offer数"},{default:c((l=>[r(" <span>{{scope.row.content.thread_offer_num}}</span> "),d(o,{placeholder:"请输入内容",modelValue:l.row.thread_offer_num,"onUpdate:modelValue":e=>l.row.thread_offer_num=e,disabled:!l.row.showtype},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),d(a,{label:"操作"},{default:c((l=>[l.row.showtype?r("v-if",!0):(n(),f(t,{key:0,class:"cp",type:"default",icon:"Edit",circle:"",onClick:e=>M(l.row)},null,8,["onClick"])),l.row.showtype?(n(),f(t,{key:1,class:"cp",type:"primary",icon:"Edit",circle:"",onClick:e=>T(l.row,"all")},null,8,["onClick"])):r("v-if",!0),r(" <i class=\"el-icon-edit cp\" \n          v-if='!scope.row.showtype'\n          @click='changeShowType(scope.row)'></i>\n          <i class=\"el-icon-edit-outline cp\" \n          v-if='scope.row.showtype'\n          @click='submitFun(scope.row, \"all\")'></i> ")])),_:1})])),_:1}),(n(!0),s(y,null,w(b(F),(l=>(n(),f(a,{key:l,label:l},{default:c((()=>[d(a,{label:"设备数"},{default:c((e=>[(n(!0),s(y,null,w(e.row.all,(e=>(n(),s(y,null,[e.lib_type===l?(n(),s("div",g,[u("span",null,p(e.lib_device_num),1)])):r("v-if",!0)],64)))),256))])),_:2},1024),d(a,{label:"状态"},{default:c((e=>[(n(!0),s(y,null,w(e.row.all,(e=>(n(),s(y,null,[e.lib_type===l?(n(),s("div",O,[d(_,{disabled:!e.showtype,modelValue:e.lib_status,"onUpdate:modelValue":l=>e.lib_status=l,"active-value":1,"inactive-value":2},null,8,["disabled","modelValue","onUpdate:modelValue"])])):r("v-if",!0)],64)))),256))])),_:2},1024),d(a,{label:"线程数"},{default:c((e=>[(n(!0),s(y,null,w(e.row.all,(e=>(n(),s(y,null,[e.lib_type===l?(n(),s("div",C,[d(o,{placeholder:"请输入内容",modelValue:e.lib_quantity_proportion,"onUpdate:modelValue":l=>e.lib_quantity_proportion=l,disabled:!e.showtype},null,8,["modelValue","onUpdate:modelValue","disabled"])])):r("v-if",!0)],64)))),256))])),_:2},1024),d(a,{label:"操作"},{default:c((e=>[(n(!0),s(y,null,w(e.row.all,(e=>(n(),s(y,null,[e.lib_type===l?(n(),s("div",A,[e.showtype?r("v-if",!0):(n(),f(t,{key:0,class:"cp",type:"default",icon:"Edit",circle:"",onClick:l=>M(e)},null,8,["onClick"])),e.showtype?(n(),f(t,{key:1,class:"cp",type:"primary",icon:"Edit",circle:"",onClick:l=>T(e,"one")},null,8,["onClick"])):r("v-if",!0),r(" <i class=\"el-icon-edit cp\" \n              v-if='!p.showtype'\n              @click='changeShowType(p)'></i>\n              <i class=\"el-icon-edit-outline cp\" \n              v-if='p.showtype'\n              @click='submitFun(p, \"one\")'></i> ")])):r("v-if",!0)],64)))),256))])),_:2},1024)])),_:2},1032,["label"])))),128))])),_:1},8,["data"])],64)}}});export{S as default};
