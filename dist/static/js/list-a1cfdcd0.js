import{d as T,ai as q,z as G,C as R,r as p,aj as W,k as g,v as u,i as v,x as l,h as i,j as o,N as A,c as y,O as H,o as m,F as x,l as w,y as F,t as z,q as J,s as K,W as X}from"./vendor-bf64253d.js";import{P as Y}from"./index-57cb31dc.js";import{A as Z,a as ee,b as ae,c as le}from"./buzz-666259d6.js";import{m as k}from"./message-da701484.js";import{_ as te}from"./lodash-05c10b51.js";import{a as C}from"./new-format-b98ea9a0.js";import{_ as oe}from"./index-a9586341.js";const ne=V=>(J("data-v-29c9e5d6"),V=V(),K(),V),re={class:"controlBox w100 mb-10"},ie={class:"mb-10"},se=F(" Offer Create "),ue={class:"flex jc-start flex-wrap w100"},de={class:"flex"},ce={class:"flex"},pe=F(" \u67E5\u8BE2 "),me={class:"flex jc-around"},fe={class:"flex jc-around"},_e=ne(()=>u("span",null,"-",-1)),be={class:"flex mt-10"},he={class:"flex jc-around"},ve={class:"w100 flex"},ge=T({setup(V){const D=q({attribute_provider:[],platform:[],package_name:"",channel:"",id:"",offer_title:"",country:"",pid:""}),S=()=>[...new Array(20)].map((t,r)=>{const c=r*5/100;return{value:c,label:`${(Number(c)*100).toFixed(0)}%`}}),B=()=>[...new Array(20)].map((t,r)=>{const c=(r*5+5)/100;return{value:c,label:`${(Number(c)*100).toFixed(0)}%`}});let e=G({dialogVisible:!1,cache:{item:{},device:{}},searchForm:D.value,useData:D.value,loading:!0,options:{cutoff_start:S(),cutoff_end:B(),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const j=()=>{e.useData=te.cloneDeep(e.searchForm),U()},E=async n=>{let t={id:n.id,max_clk_num:n.max_clk_num};t=C(t);let r=await ee(t);console.log(r),k(r)},P=async n=>{console.log(n);const t=n.cutoff_start,r=n.cutoff_end,c=n.id;if(t<r){let f={cutoff_start:t,cutoff_end:r,id:c};f=C(f);const h=await ae(f);k(h)}else X({message:"start\u5FC5\u987B\u5C0F\u4E8Eend",type:"error",duration:2*1e3})},N=n=>{const r=(n.cutoff_end-n.cutoff_start)*n.device_num;return r?r.toFixed(0):""},O=async n=>{let t={id:n.id,status:n.status};t=C(t);const r=await le(t);k(r)},Q=n=>`/buzz/edit/${n.id}`,U=async()=>{e.loading=!0;let n={page:e.pagination.listQuery.page,page_size:e.pagination.listQuery.limit};e.useData.attribute_provider&&(n.attribute_provider=e.useData.attribute_provider),e.useData.platform&&(n.platform=e.useData.platform),e.useData.package_name&&(n.pkg_name=e.useData.package_name),e.useData.channel&&(n.channel=e.useData.channel),e.useData.id&&(n.offer_id=e.useData.id),e.useData.offer_title&&(n.title=e.useData.offer_title),e.useData.country&&(n.country=e.useData.country),e.useData.pid&&(n.tracking_link=e.useData.pid);const t=await Z(n),{data:r}=t;e.list=r==null?void 0:r.data,e.pagination.total=Number(r.count),e.loading=!1};return R(()=>{j()}),(n,t)=>{const r=p("el-button"),c=p("router-link"),f=p("el-option"),h=p("el-select"),_=p("el-form-item"),b=p("el-input"),I=p("el-form"),d=p("el-table-column"),$=p("el-switch"),M=p("el-table"),L=W("loading");return m(),g("div",null,[u("div",re,[u("div",ie,[v(` <el-button type="primary" @click='createFun'>Offer Create</el-button> `),l(c,{to:"/buzz/create"},{default:i(()=>[l(r,{type:"primary"},{default:i(()=>[se]),_:1})]),_:1})]),l(I,{modelValue:o(e).searchForm,"onUpdate:modelValue":t[8]||(t[8]=a=>o(e).searchForm=a),inline:!0,class:"flex jc-between w100 ai-end"},{default:i(()=>[u("div",ue,[l(_,{label:""},{default:i(()=>[l(h,{modelValue:o(e).searchForm.attribute_provider,"onUpdate:modelValue":t[0]||(t[0]=a=>o(e).searchForm.attribute_provider=a),clearable:"",class:"search-con",placeholder:"Attribute Provider",style:{"min-width":"140px"}},{default:i(()=>[(m(!0),g(x,null,w(o(e).options.attribute_provider,a=>(m(),y(f,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(_,{label:""},{default:i(()=>[l(h,{modelValue:o(e).searchForm.platform,"onUpdate:modelValue":t[1]||(t[1]=a=>o(e).searchForm.platform=a),clearable:"",class:"search-con",placeholder:"Platform",style:{"min-width":"95px"}},{default:i(()=>[(m(!0),g(x,null,w(o(e).options.platform,a=>(m(),y(f,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(_,{label:""},{default:i(()=>[l(b,{modelValue:o(e).searchForm.package_name,"onUpdate:modelValue":t[2]||(t[2]=a=>o(e).searchForm.package_name=a),placeholder:"Package Name",class:"search-con",style:{"min-width":"120px"}},null,8,["modelValue"])]),_:1}),l(_,{label:""},{default:i(()=>[l(b,{modelValue:o(e).searchForm.channel,"onUpdate:modelValue":t[3]||(t[3]=a=>o(e).searchForm.channel=a),placeholder:"Channel",class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])]),_:1}),l(_,{label:""},{default:i(()=>[l(b,{modelValue:o(e).searchForm.id,"onUpdate:modelValue":t[4]||(t[4]=a=>o(e).searchForm.id=a),placeholder:"ID",class:"search-con"},null,8,["modelValue"])]),_:1}),l(_,{label:""},{default:i(()=>[l(b,{modelValue:o(e).searchForm.offer_title,"onUpdate:modelValue":t[5]||(t[5]=a=>o(e).searchForm.offer_title=a),placeholder:"Offer Title",class:"search-con",style:{"min-width":"90px"}},null,8,["modelValue"])]),_:1}),l(_,{label:""},{default:i(()=>[l(b,{modelValue:o(e).searchForm.country,"onUpdate:modelValue":t[6]||(t[6]=a=>o(e).searchForm.country=a),placeholder:"Country",class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])]),_:1}),l(_,{label:""},{default:i(()=>[l(b,{modelValue:o(e).searchForm.pid,"onUpdate:modelValue":t[7]||(t[7]=a=>o(e).searchForm.pid=a),placeholder:"Pid",class:"search-con"},null,8,["modelValue"])]),_:1})]),u("div",de,[l(_,{class:"mr-0",style:{"margin-right":"0px"}},{default:i(()=>[u("div",ce,[l(r,{type:"primary",onClick:j},{default:i(()=>[pe]),_:1}),v(' <el-button type="primary" @click="handleExportSearch">\u5BFC\u51FA</el-button> ')])]),_:1})])]),_:1},8,["modelValue"]),v(` <el-input placeholder="\u8BF7\u8F93\u5165\u5185\u5BB9" v-model="data.searchForm.data" class='search-input'>
        <el-button slot="append" icon="Search" @click='searchFun'></el-button>
      </el-input> `)]),v(" table "),A((m(),y(M,{center:"",data:o(e).list,class:"w100",height:"60vh",border:""},{default:i(()=>[l(d,{fixed:"",prop:"offer_id",label:"ID",align:"center"}),l(d,{fixed:"",prop:"channel",label:"Channel",align:"center"}),l(d,{prop:"pkg_name",label:"Package Name",align:"center"}),l(d,{prop:"title",label:"Offer Title",width:"120",align:"center"}),l(d,{prop:"attribute_provider",label:"Attribute Provider",align:"center"}),l(d,{prop:"pid",label:"Pid",align:"center"}),l(d,{prop:"platform",label:"Platform",align:"center"},{default:i(a=>[F(z(Number(a.row.platform)===1?"Android":"iOS"),1)]),_:1}),l(d,{prop:"country",label:"Country",align:"center"}),l(d,{prop:"payout",label:"Payout",align:"center"}),l(d,{label:"Click Limitation(w)",width:"150",align:"center"},{default:i(a=>[u("div",me,[l(b,{modelValue:a.row.max_clk_num,"onUpdate:modelValue":s=>a.row.max_clk_num=s,placeholder:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),l(r,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:s=>E(a.row)},null,8,["onClick"])])]),_:1}),l(d,{label:"Device Cutoff",width:"250",align:"center"},{default:i(a=>[u("div",fe,[u("div",null,[u("div",null,[l(h,{modelValue:a.row.cutoff_start,"onUpdate:modelValue":s=>a.row.cutoff_start=s,class:"cutoff",filterable:"",placeholder:"start"},{default:i(()=>[(m(!0),g(x,null,w(o(e).options.cutoff_start,s=>(m(),y(f,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),_e,l(h,{modelValue:a.row.cutoff_end,"onUpdate:modelValue":s=>a.row.cutoff_end=s,class:"cutoff",filterable:"",placeholder:"end"},{default:i(()=>[(m(!0),g(x,null,w(o(e).options.cutoff_end,s=>(m(),y(f,{key:s.value,label:s.label,value:s.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),u("div",be,[u("span",null,z(N(a.row)),1)])]),l(r,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:s=>P(a.row)},null,8,["onClick"])])]),_:1}),l(d,{width:"100",label:"Operation",align:"center"},{default:i(a=>[u("div",he,[l(c,{to:Q(a.row)},{default:i(()=>[l(r,{class:"cp mr-10",type:"primary",icon:"Edit",circle:""})]),_:2},1032,["to"]),v(` <el-button class='cp mr-10' type="primary" icon="Edit" circle @click='editFun(scope.row)'></el-button> `),l($,{modelValue:a.row.status,"onUpdate:modelValue":s=>a.row.status=s,"active-value":1,"inactive-value":2,onChange:s=>O(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),_:1})]),_:1},8,["data"])),[[L,o(e).loading]]),v(" \u5206\u9875 "),u("div",ve,[A(l(o(Y),{page:o(e).pagination.listQuery.page,"onUpdate:page":t[9]||(t[9]=a=>o(e).pagination.listQuery.page=a),limit:o(e).pagination.listQuery.limit,"onUpdate:limit":t[10]||(t[10]=a=>o(e).pagination.listQuery.limit=a),total:o(e).pagination.total,"page-sizes":o(e).pagination.pageSizes,onPagination:U},null,8,["page","limit","total","page-sizes"]),[[H,o(e).pagination.total]])])])}}});var De=oe(ge,[["__scopeId","data-v-29c9e5d6"]]);export{De as default};
