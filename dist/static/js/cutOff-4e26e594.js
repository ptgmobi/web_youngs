import{d as t,h as e,r as a,I as n,a1 as s,w as o,q as u,o as f,c as r,x as c,y as l,v as d,f as i,e as _,K as p}from"./main-0a777472.js";import{h as m}from"./buzz-a93f1a8a.js";const x={class:"w100"},y={class:"flex jc-start"},v=["textContent"],C=c("span",null,"-",-1),g=["textContent"],j=c("span",null,"总设备数:",-1),q=["textContent"],b=c("span",null,"选中设备数:",-1),h=["textContent"],w={class:"p0-10"},F=t({__name:"cutOff",props:{query:{require:!0,default:()=>({}),type:Object}},emits:["up"],setup(t,{emit:F}){const N=t;let V=e(0),k=a({cutoff_start:N.query.cutoff_start,cutoff_end:N.query.cutoff_end}),z=k.cutoff_start?100*Number(k.cutoff_start):0,A=k.cutoff_end?100*Number(k.cutoff_end):100,O=e([z,A]);const I=async()=>{const{pkg_name:t,country:e,platform:a}=N.query;if(t&&e&&a){const n={pkg_name:t,country:Array.isArray(e)?e.join(","):e,platform:a},s=await(async t=>{const e=await m(t),{data:a}=e;return 0!==a.length?a.findLast((t=>t)).device_num:0})(n);V.value=s}},K=n((()=>{const t=V.value,e=k.cutoff_start?Number(k.cutoff_start):0;return{judge:(((k.cutoff_end?Number(k.cutoff_end):1)-e)*t).toFixed(0),all:t.toFixed(0)}}));s((()=>{I()})),o((()=>N.query),((t,e)=>{void 0!==t.cutoff_start&&void 0!==t.cutoff_end&&(k.cutoff_start=t.cutoff_start,k.cutoff_end=t.cutoff_end)}),{immediate:!0,deep:!0});const L=t=>{var e;e=t,k.cutoff_start=e[0]/100,k.cutoff_end=e[1]/100,F("up",k)};return(t,e)=>{const a=u("el-slider");return f(),r("div",x,[c("div",y,[c("span",{textContent:l((100*d(k).cutoff_start).toFixed(0))},null,8,v),i(" % "),C,c("span",{textContent:l((100*d(k).cutoff_end).toFixed(0))},null,8,g),i(" % （ "),j,c("span",{textContent:l(d(K).all)},null,8,q),i(" ） （ "),b,c("span",{textContent:l(d(K).judge)},null,8,h),i(" ） ")]),c("div",w,[_(a,{modelValue:d(O),"onUpdate:modelValue":e[0]||(e[0]=t=>p(O)?O.value=t:O=t),class:"device-cutoff",range:"",step:5,"show-stops":!0,"show-input":"",min:0,max:100,onChange:L},null,8,["modelValue"])])])}}});export{F as _};
