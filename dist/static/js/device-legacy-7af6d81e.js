!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./index-legacy-bdfa680e.js","./format-legacy-b6794641.js","./lodash-legacy-3b6acfb1.js"],(function(t){"use strict";var n,r,o,u,l,a,c,s,i,f,p,d,b,m,v;return{setters:[function(e){n=e.d,r=e.r,o=e.w,u=e.M,l=e.m,a=e.s,c=e.n,s=e.v,i=e.c,f=e.p,p=e.q,d=e.b,b=e.x},function(e){m=e.b},function(e){v=e._}],execute:function(){var h={class:"full"},y={class:"w100 flex mt-20"},w=s("span",null,"选中合计：",-1),_=["textContent"];t("_",n({props:{all:{require:!0,default:function(){return{}},type:Object},select:{require:!0,default:function(){return{}},type:Object}},emits:["kk","count","up"],setup:function(t,n){var j=n.emit,g=t,A=[],O=r({search:{id:""},test:"",set:new Set,setObj:{},spanArr:A,all:A,select:A,statisticsCount:0}),C=function(){var t=e(O.set).map((function(e){return e=[e,!1]}));O.setObj=Object.fromEntries(t),S()},S=function(){Object.keys(O.setObj).forEach((function(e){var t=[];O.all.forEach((function(n){n.source===e&&t.push(n.select_status)})),O.setObj[e]=!0,t.includes(!1)&&(O.setObj[e]=!1)})),x()},x=function(){var e=O.all.reduce((function(e,t){return t.select_status?e+parseInt(t.device_count):e}),0);O.statisticsCount=m(e),j("count",e)},I=function(){var e=[];O.all.forEach((function(t){t.select_status&&(e.push({source:t.source,label:t.label}),parseInt(t.device_count))})),j("kk",e)},V=function(e,t){O.spanArr=[];for(var n=0,r=0;r<e.length;r++)0===r?O.spanArr.push(1):e[r][t]===e[r-1][t]?(O.spanArr[n]+=1,O.spanArr.push(0)):(O.spanArr.push(1),n=r)},k=function(e){e.row,e.column;var t=e.rowIndex;if(0===e.columnIndex){var n=O.spanArr[t];return{rowspan:n,colspan:n>0?1:0}}};return o((function(){return g.all}),(function(e,t){g.all&&g.all.length>0&&(O.all=v.cloneDeep(g.all),O.select=v.cloneDeep(g.select),O.set=new Set,O.all.map((function(e){return e.select_status=!1,O.set.add(e.source),O.select.map((function(t){return e.source===t.source&&e.label===t.label&&(e.select_status=!0),e})),e})),O.all.sort((function(e,t){return e.label>t.label?1:e.label<t.label?-1:1})),O.all.sort((function(e,t){return e.source>t.source?1:e.source<t.source?-1:1})),V(O.all,"source"),C())}),{immediate:!0}),u((function(){})),function(e,t){var n=l("el-checkbox"),r=l("el-table-column"),o=l("el-table");return a(),c("div",null,[s("div",h,[i(o,{data:p(O).all,"span-method":k,border:"",style:{width:"100%","margin-top":"20px"}},{default:f((function(){return[i(r,{prop:"source",label:"Source",width:"180"},{default:f((function(e){return[i(n,{modelValue:p(O).setObj[e.row.source],"onUpdate:modelValue":function(t){return p(O).setObj[e.row.source]=t},onChange:function(t){return n=e.row.source,r=p(O).setObj[e.row.source],O.all.map((function(e){e.source===n&&(e.select_status=r)})),S(),void I();var n,r}},{default:f((function(){return[d(b(e.row.source),1)]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),i(r,{prop:"label",label:"Label"}),i(r,{prop:"slot_id",label:"Slot ID"}),i(r,{prop:"device_count",label:"Count"},{default:f((function(e){return[s("span",null,b(p(m)(e.row.device_count)),1)]})),_:1}),i(r,{prop:"select",label:"Select"},{default:f((function(e){return[i(n,{modelValue:e.row.select_status,"onUpdate:modelValue":function(t){return e.row.select_status=t},onChange:function(t){return e.row,S(),void I()}},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:1})]})),_:1},8,["data"]),s("div",y,[w,s("span",{textContent:b(p(O).statisticsCount)},null,8,_)])])])}}}))}}}))}();
