var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,r=(e,l)=>{for(var a in l||(l={}))i.call(l,a)&&s(e,a,l[a]);if(t)for(var a of t(l))o.call(l,a)&&s(e,a,l[a]);return e};import{_ as n,d as p,h as u,Z as d,r as c,L as m,q as v,$ as b,o as f,c as y,x as g,e as h,s as _,v as w,z as x,U as V,A as k,a8 as F,V as j,N as U,O,y as z,f as C,D,F as P}from"./main-dae9cd13.js";import{u as Q,s as S}from"./useUtils-0c0cc193.js";import{P as I}from"./index-4fdf120d.js";import{m as A}from"./message-2d1d3f7c.js";import{_ as $}from"./lodash-edd1f566.js";import{h as q,g as N}from"./new-format-299c060c.js";import{c as E}from"./clipboard-e22032a2.js";import{A as R,a as T}from"./dsp-campaign-fbd07c68.js";const B={type:[{value:1,label:"图片"},{value:2,label:"视频"},{value:3,label:"原生"}],audit_status:[{value:1,label:"未审核"},{value:2,label:"审核通过"},{value:3,label:"审核未通过"}]};const L=e=>(D("data-v-93cffa54"),e=e(),P(),e),Z={class:"controlBox w100 mb-10"},G={class:"flex jc-start flex-wrap w100"},H={class:"flex"},J={class:"flex"},K=C(" 查询 "),M={class:"mb-10 w100"},W=C("新建创意"),X={class:"pr"},Y={class:"flex jc-around"},ee=C("编辑"),le=C("复制"),ae=C("归档"),te=L((()=>g("span",null,null,-1))),ie={class:"w100 flex"},oe=C("复制"),se=p({name:"adserieslist"});var re,ne=n(p((re=r({},se),l(re,a({setup(e){const l=u(),a=u([{id:""}]),{status:t,adv_type:i,ind_cla:o,third_party:s,return_mode:n}=S,{type:p,audit_status:C}=B,{goNewUrl:D,openAlert:P}=Q(),L=d({status:"",type:"",audit_status:"",is_del:"1",value_type:"name",value:""}),se=u({}),re=u(!1),ne=c({report_api:""});let pe=c({dialogVisible:!1,cache:{item:{}},searchForm:L.value,useData:L.value,loading:!0,options:{status:t,type:p,audit_status:C,value_type:[{value:"name",label:"名称"},{value:"id",label:"ID"}]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});c({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const ue=e=>{a.value=e},de=()=>{pe.useData=$.cloneDeep(pe.searchForm),ve()};u([]);const ce=()=>{D({url:"/campaign/administration/create",query:{type:"create"}})},me=e=>async()=>{const{row:l,$index:a}=e,t=await(async e=>await T({ids:e,is_del:2}))([l.id]);A(t)&&pe.list.splice(a,1)},ve=async()=>{pe.loading=!0;let e=r(r({page:pe.pagination.listQuery.page,limit:pe.pagination.listQuery.limit},L.value),se.value);e[e.value_type]=e.value,delete e.value_type,delete e.value,e=q(e);const l=await R(e);if(l){const{data:e}=l;pe.list=null==e?void 0:e.data,pe.pagination.total=Number(e.count)}pe.loading=!1};return m((()=>{de()})),(e,a)=>{const t=v("el-option"),i=v("el-select"),o=v("el-form-item"),s=v("el-input"),r=v("el-checkbox"),n=v("el-button"),p=v("el-form"),u=v("el-table-column"),d=v("el-image"),c=v("el-dialog"),m=b("loading");return f(),y("div",null,[g("div",Z,[h(p,{modelValue:w(pe).searchForm,"onUpdate:modelValue":a[5]||(a[5]=e=>w(pe).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:_((()=>[g("div",G,[x(' <el-form-item label="">\n            <el-select\n              v-model="state.searchForm.status"\n              filterable\n              clearable\n              placeholder="所有状态"\n            >\n              <el-option\n                v-for="item in state.options.status"\n                :key="item.value"\n                :label="item.label"\n                :value="item.value"\n              ></el-option>\n            </el-select>\n          </el-form-item> '),x(" 所有样式 "),h(o,{label:""},{default:_((()=>[h(i,{modelValue:w(pe).searchForm.type,"onUpdate:modelValue":a[0]||(a[0]=e=>w(pe).searchForm.type=e),filterable:"",clearable:"",placeholder:"所有样式"},{default:_((()=>[(f(!0),y(U,null,O(w(pe).options.type,(e=>(f(),k(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),x(" 所有审核状态 "),h(o,{label:""},{default:_((()=>[h(i,{modelValue:w(pe).searchForm.audit_status,"onUpdate:modelValue":a[1]||(a[1]=e=>w(pe).searchForm.audit_status=e),filterable:"",clearable:"",placeholder:"所有审核状态"},{default:_((()=>[(f(!0),y(U,null,O(w(pe).options.audit_status,(e=>(f(),k(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),x(" 输入 "),h(o,{label:""},{default:_((()=>[h(s,{modelValue:w(pe).searchForm.value,"onUpdate:modelValue":a[3]||(a[3]=e=>w(pe).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:_((()=>[h(i,{modelValue:w(pe).searchForm.value_type,"onUpdate:modelValue":a[2]||(a[2]=e=>w(pe).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:_((()=>[(f(!0),y(U,null,O(w(pe).options.value_type,(e=>(f(),k(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),h(o,{label:""},{default:_((()=>[h(r,{modelValue:w(pe).searchForm.is_del,"onUpdate:modelValue":a[4]||(a[4]=e=>w(pe).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),g("div",H,[h(o,{class:"mr-0",style:{"margin-right":"0px"}},{default:_((()=>[g("div",J,[h(n,{type:"primary",onClick:de},{default:_((()=>[K])),_:1}),x(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),x(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> '),g("div",M,[h(n,{type:"primary",onClick:ce},{default:_((()=>[W])),_:1})])]),x(" table "),V((f(),k(w(F),{ref_key:"multipleTableRef",ref:l,center:"",data:w(pe).list,class:"w100",border:"",onSelectionChange:ue},{default:_((()=>[x(" ID "),h(u,{sortable:"",prop:"id",label:"ID",align:"center"}),x(" 名称 "),h(u,{sortable:"",width:"120",prop:"name",label:"名称",align:"center"}),x(" 缩略图 "),h(u,{width:"120",prop:"url",label:"缩略图",align:"center"},{default:_((e=>[g("div",X,[2!==e.row.type?(f(),k(d,{key:0,"z-index":9999,style:{width:"100px",height:"100px"},src:e.row.url,"preview-src-list":[e.row.url],"initial-index":4,fit:"cover"},null,8,["src","preview-src-list"])):x("v-if",!0),2===e.row.type?(f(),k(d,{key:1,"z-index":9999,style:{width:"100px",height:"100px"},src:e.row.cover_url,"preview-src-list":[e.row.cover_url],"initial-index":4,fit:"cover"},null,8,["src","preview-src-list"])):x("v-if",!0)]),x(' <div v-if="scope.row.type !== 2">\n            <el-image\n              v-if="scope.row.url"\n              style="width: 100px; height: 100px"\n              :src="scope.row.url"\n              :preview-src-list="[scope.row.url]"\n              :initial-index="4"\n              fit="cover"\n            />\n          </div>\n          <div v-if="scope.row.type === 2">\n            <video\n              v-if="scope.row.url"\n              width="320"\n              height="320"\n              controls\n              :src="scope.row.url"\n            ></video>\n          </div> ')])),_:1}),x(" 操作 "),h(u,{width:"200",label:"操作",align:"center"},{default:_((e=>[g("div",Y,[h(n,{class:"cp",type:"primary",onClick:l=>(({row:e})=>{const{id:l}=e;D({url:`/campaign/administration/edit/${l}`,query:{type:"edit",campaign_type:e.type}})})(e)},{default:_((()=>[ee])),_:2},1032,["onClick"]),h(n,{class:"cp",type:"primary"},{default:_((()=>[le])),_:1}),x(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),h(n,{class:"cp",type:"danger",onClick:l=>(async e=>{P({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},me(e))})(e),disabled:2===e.row.is_del},{default:_((()=>[ae])),_:2},1032,["onClick","disabled"])])])),_:1}),x(" 开关 "),x(' <el-table-column sortable\n        prop="status"\n        label="开关"\n        align="center"\n      >\n        <template #default="scope">\n          <el-switch\n            v-model="scope.row.status"\n            :active-value="1"\n            :inactive-value="2"\n            @click="changeStatus(scope)"\n          />\n        </template>\n      </el-table-column> '),x(" 样式 "),h(u,{sortable:"",prop:"type",label:"样式",align:"center"},{default:_((e=>[g("span",null,z(w(N)(e.row.type,w(pe).options.type)),1)])),_:1}),x(" 审核状态 "),h(u,{sortable:"",prop:"audit_status",label:"审核状态",align:"center"},{default:_((e=>[g("span",null,z(w(N)(e.row.audit_status,w(pe).options.audit_status)),1)])),_:1}),x(" 尺寸 "),h(u,{sortable:"",width:"120",prop:"size",label:"尺寸",align:"center"}),x(" 格式 "),h(u,{sortable:"",width:"120",prop:"format",label:"格式",align:"center"}),x(" 大小 "),h(u,{sortable:"",width:"120",prop:"memory_size",label:"大小",align:"center"}),x(" 时长 "),h(u,{sortable:"",width:"120",prop:"duration",label:"时长",align:"center"}),x(" 关联广告 "),h(u,{sortable:"",width:"120",prop:"ads",label:"关联广告",align:"center"},{default:_((e=>[te])),_:1}),x(" 创建人 "),h(u,{sortable:"",width:"120",prop:"user",label:"创建人",align:"center"}),x(" 创建时间 "),h(u,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),x(" 更新时间 "),h(u,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"})])),_:1},8,["data"])),[[m,w(pe).loading]]),x(" 分页 "),g("div",ie,[V(h(I,{page:w(pe).pagination.listQuery.page,"onUpdate:page":a[6]||(a[6]=e=>w(pe).pagination.listQuery.page=e),limit:w(pe).pagination.listQuery.limit,"onUpdate:limit":a[7]||(a[7]=e=>w(pe).pagination.listQuery.limit=e),total:w(pe).pagination.total,"page-sizes":w(pe).pagination.pageSizes,onPagination:ve},null,8,["page","limit","total","page-sizes"]),[[j,w(pe).pagination.total]])]),x(" 复制 "),h(c,{modelValue:re.value,"onUpdate:modelValue":a[9]||(a[9]=e=>re.value=e),title:"Report Api",width:"90%"},{default:_((()=>[g("p",null,z(w(ne).report_api),1),h(n,{class:"cp mr-10",type:"default",onClick:a[8]||(a[8]=e=>{return l=w(ne).report_api,void E(l);var l})},{default:_((()=>[oe])),_:1})])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-93cffa54"]]);export{ne as default};
