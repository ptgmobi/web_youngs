var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e};import{_ as d,d as n,h as p,r as u,L as c,q as m,$ as b,o as _,c as v,x as f,e as y,v as g,s as w,z as h,U as V,A as j,V as x,N as k,O as U,y as F,f as C}from"./main-f5fc11c6.js";import{u as O,s as P}from"./useUtils-e29f5423.js";import{P as D}from"./index-25212d29.js";import{m as Q}from"./message-63eca02f.js";import{_ as S}from"./lodash-d099a0b1.js";import{h as q,g as z}from"./new-format-35937e70.js";import{c as A}from"./clipboard-e9047a61.js";import{a as I,f as N,g as $,h as E,i as L}from"./dsp-adcontrol-f9a35fbd.js";import{A as R}from"./dsp-advertiser-133f6b15.js";import{_ as B}from"./index-ce563a27.js";import"./clipboard-polyfill.text.esm-fc4f7791.js";import"./format-fb65a074.js";import"./moment-9bd84dc2.js";import"./dsp-2d82d1cf.js";const T={class:"controlBox w100 mb-10"},G={class:"flex jc-start flex-wrap w100"},H={class:"flex"},J={class:"flex"},K=C(" 查询 "),M={class:"mb-10 w100"},W=C("新建广告组"),X=["onClick"],Y={class:"flex jc-around"},Z=C("编辑"),ee=C("复制"),ae=C("归档"),le=C(" - "),te={class:"w100 flex"},oe=C("复制"),se=n({name:"adserieslist"});var re,ie=d(n((re=i({},se),a(re,l({setup(e){const a=p([{id:""}]),{status:l,adv_type:t,ind_cla:o,third_party:s,return_mode:r}=P,{goNewUrl:d,getRouterData:n,getCommonCountryList:C,openAlert:se}=O(),re=u({adv_series_id:"",status:"",adv_series_type:"",marbet_target:"",is_del:"1",value_type:"adv_group_name",value:""}),ie=p(!1),de=u({report_api:""});let ne=u({dialogVisible:!1,cache:{item:{}},searchForm:re,useData:re,loading:!0,options:{status:l,adv_series_type:[{value:1,label:"动态商品促销"},{value:2,label:"固定链接推广"}],marbet_target:[{value:1,label:"再营销"},{value:2,label:"拉新"}],value_type:[{value:"adv_group_name",label:"广告组名称"},{value:"id",label:"广告组ID"},{value:"descs",label:"描述"}],promotion_cycle:[{value:1,label:"从现在开始长期有效"},{value:2,label:"限定周期"}],country:[],advertiser:[],adv_series:[],adx:[]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}}),pe=u({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const ue=u({adv_id:"",st:"",et:""}),ce=()=>{ne.useData=S.cloneDeep(ne.searchForm),fe()},me=e=>{ue.adv_id=e.adv,e.date&&(ue.st=e.date[0],ue.et=e.date[1])};p([]);const be=()=>{d({url:"/adcontrol/adgroup/create",query:{type:"create"}})},_e=async e=>{se({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},(e=>async()=>{const{row:a,$index:l}=e,t=await L({id:a.id});Q(t)&&ne.list.splice(l,1)})(e))},ve=async()=>{a.value.map((e=>e.id));let e=pe.data.mode;e.toString(),e.toString(),e.toString()},fe=async()=>{ne.loading=!0;let{query:e,params:a}=n(),{adseries:l}=e;l&&(re.adv_series_id=Number(l));let t=i(i({page:ne.pagination.listQuery.page,limit:ne.pagination.listQuery.limit},re),ue);t[t.value_type]=t.value,delete t.value_type,delete t.value,t=q(t);const o=await $(t);if(o){const{data:e}=o;ne.list=null==e?void 0:e.data,ne.pagination.total=Number(e.count)}ne.loading=!1};return c((()=>{(()=>{let e={limit:1e4,page:1};Promise.all([C(),R(e),I(e),N()]).then((e=>{let a=e[0],l=e[1],t=e[2],o=e[3];ne.options.country=a,ne.options.advertiser=l.data.data,ne.options.adv_series=t.data.data,ne.options.adx=o.data.data}))})(),ce()})),(e,a)=>{const l=m("el-option"),t=m("el-select"),o=m("el-form-item"),s=m("el-input"),r=m("el-checkbox"),i=m("el-button"),n=m("el-form"),p=m("el-table-column"),u=m("el-switch"),c=m("el-table"),C=m("el-dialog"),O=b("loading");return _(),v("div",null,[f("div",T,[y(g(B),{onUp:me,arr:["adv","date"]}),y(n,{modelValue:g(ne).searchForm,"onUpdate:modelValue":a[5]||(a[5]=e=>g(ne).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:w((()=>[f("div",G,[y(o,{label:""},{default:w((()=>[y(t,{modelValue:g(ne).searchForm.status,"onUpdate:modelValue":a[0]||(a[0]=e=>g(ne).searchForm.status=e),filterable:"",clearable:"",placeholder:"全部状态"},{default:w((()=>[(_(!0),v(k,null,U(g(ne).options.status,(e=>(_(),j(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(o,{label:""},{default:w((()=>[y(t,{modelValue:g(ne).searchForm.adv_series_id,"onUpdate:modelValue":a[1]||(a[1]=e=>g(ne).searchForm.adv_series_id=e),filterable:"",clearable:"",placeholder:"广告系列"},{default:w((()=>[(_(!0),v(k,null,U(g(ne).options.adv_series,(e=>(_(),j(l,{key:e.id,label:e.adv_series_name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(o,{label:""},{default:w((()=>[y(s,{modelValue:g(ne).searchForm.value,"onUpdate:modelValue":a[3]||(a[3]=e=>g(ne).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:w((()=>[y(t,{modelValue:g(ne).searchForm.value_type,"onUpdate:modelValue":a[2]||(a[2]=e=>g(ne).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:w((()=>[(_(!0),v(k,null,U(g(ne).options.value_type,(e=>(_(),j(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),y(o,{label:""},{default:w((()=>[y(r,{modelValue:g(ne).searchForm.is_del,"onUpdate:modelValue":a[4]||(a[4]=e=>g(ne).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),f("div",H,[y(o,{class:"mr-0",style:{"margin-right":"0px"}},{default:w((()=>[f("div",J,[y(i,{type:"primary",onClick:ce},{default:w((()=>[K])),_:1}),h(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),f("div",M,[y(i,{type:"primary",onClick:be},{default:w((()=>[W])),_:1}),y(t,{class:"ml-10",modelValue:g(pe).data.mode,"onUpdate:modelValue":a[6]||(a[6]=e=>g(pe).data.mode=e),filterable:"",placeholder:"批量操作",onChange:ve},{default:w((()=>[(_(!0),v(k,null,U(g(pe).options.mode,(e=>(_(),j(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),h(" table "),V((_(),j(c,{center:"",data:g(ne).list,class:"w100",border:""},{default:w((()=>[y(p,{align:"center",type:"selection",width:"55"}),y(p,{sortable:"",prop:"id",label:"广告组ID",align:"center"}),y(p,{sortable:"",width:"120",prop:"adv_group_name",label:"广告组名称",align:"center"}),y(p,{sortable:"",prop:"status",label:"开关",align:"center"},{default:w((e=>[y(u,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onClick:a=>(async({row:e})=>{let a={id:e.id,status:e.status},l=await E(a);Q(l)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),h(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),y(p,{sortable:"",prop:"status",label:"状态",align:"center"},{default:w((e=>[f("span",null,F(g(z)(e.row.status,g(ne).options.status)),1)])),_:1}),y(p,{sortable:"",prop:"ad",label:"广告",align:"center"},{default:w((e=>[h(" <span>{{scope.row.ad}}</span> "),f("span",{class:"color_primary cp",onClick:a=>(({row:e})=>{d({url:"/adcontrol/ad/list",query:{adseries:e.adv_series_id,adgroup:e.id,type:"list"}})})(e)},F(e.row.ad?e.row.ad.length:0),9,X)])),_:1}),y(p,{width:"200",label:"操作",align:"center"},{default:w((e=>[f("div",Y,[y(i,{class:"cp",type:"primary",onClick:a=>(({row:e})=>{const{id:a}=e;d({url:`/adcontrol/adgroup/edit/${a}`,query:{type:"edit"}})})(e)},{default:w((()=>[Z])),_:2},1032,["onClick"]),y(i,{class:"cp",type:"primary"},{default:w((()=>[ee])),_:1}),h(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),y(i,{class:"cp",type:"danger",onClick:a=>_e(e),disabled:2===e.row.is_del},{default:w((()=>[ae])),_:2},1032,["onClick","disabled"])])])),_:1}),y(p,{sortable:"",width:"120",prop:"country",label:"国家",align:"center"},{default:w((e=>[f("span",null,F(e.row.country),1)])),_:1}),y(p,{sortable:"",width:"120",prop:"promotion_cycle",label:"推广周期",align:"center"},{default:w((e=>[h(" <span>{{getOptionsValue(scope.row.promotion_cycle, state.options.promotion_cycle)}}</span> "),f("span",null,F(e.row.promotion_cycle_st),1),le,f("span",null,F(e.row.promotion_cycle_et),1)])),_:1}),y(p,{sortable:"",width:"120",prop:"create_email",label:"创建人",align:"center"}),y(p,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),y(p,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"}),y(p,{sortable:"",width:"160",prop:"imp_number",label:"展示数",align:"center"})])),_:1},8,["data"])),[[O,g(ne).loading]]),h(" 分页 "),f("div",te,[V(y(D,{page:g(ne).pagination.listQuery.page,"onUpdate:page":a[7]||(a[7]=e=>g(ne).pagination.listQuery.page=e),limit:g(ne).pagination.listQuery.limit,"onUpdate:limit":a[8]||(a[8]=e=>g(ne).pagination.listQuery.limit=e),total:g(ne).pagination.total,"page-sizes":g(ne).pagination.pageSizes,onPagination:fe},null,8,["page","limit","total","page-sizes"]),[[x,g(ne).pagination.total]])]),h(" 复制 "),y(C,{modelValue:ie.value,"onUpdate:modelValue":a[10]||(a[10]=e=>ie.value=e),title:"Report Api",width:"90%"},{default:w((()=>[f("p",null,F(g(de).report_api),1),y(i,{class:"cp mr-10",type:"default",onClick:a[9]||(a[9]=e=>{return a=g(de).report_api,void A(a);var a})},{default:w((()=>[oe])),_:1})])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-3d91c0cc"]]);export{ie as default};
