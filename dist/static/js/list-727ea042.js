var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,a)=>{for(var l in a||(a={}))s.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&r(e,l,a[l]);return e};import{_ as n,d as u,h as p,Z as d,r as c,L as m,q as b,$ as v,o as _,c as g,x as f,e as y,s as h,v as w,z as V,U as x,A as F,a8 as k,V as j,N as U,O,y as C,f as D}from"./main-4108d4c8.js";import{u as P,s as Q}from"./useUtils-d0d2ed59.js";import{P as S}from"./index-31949e81.js";import{m as z}from"./message-c3fe1e43.js";import{_ as I}from"./lodash-cc1290e8.js";import{h as A,g as $}from"./new-format-e2d0b76c.js";import{c as q}from"./clipboard-2a7c3d22.js";import{a as N,b as E,A as R}from"./dsp-adcontrol-8ad7d853.js";const T={class:"controlBox w100 mb-10"},B={class:"flex jc-start flex-wrap w100"},L={class:"flex"},Z={class:"flex"},G=D(" 查询 "),H={class:"mb-10 w100"},J=D("新建创意"),K={class:"flex jc-around"},M=D("编辑"),W=D("复制"),X=D("归档"),Y={class:"w100 flex"},ee=D("复制"),ae=u({name:"adserieslist"});var le,te=n(u((le=i({},ae),a(le,l({setup(e){const a=p(),l=p([{id:""}]),{status:t,adv_type:s,ind_cla:o,third_party:r,return_mode:n}=Q,{goNewUrl:u,openAlert:D}=P(),ae=d({status:"",adv_series_type:"",marbet_target:"",is_del:"1",value_type:"name",value:""}),le=p({}),te=p(!1),se=c({report_api:""});let oe=c({dialogVisible:!1,cache:{item:{}},searchForm:ae.value,useData:ae.value,loading:!0,options:{status:t,adv_series_type:[{value:1,label:"动态商品促销"},{value:2,label:"固定链接推广"}],marbet_target:[{value:1,label:"再营销"},{value:2,label:"拉新"}],value_type:[{value:"name",label:"名称"},{value:"id",label:"ID"}]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});c({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const re=e=>{l.value=e},ie=()=>{oe.useData=I.cloneDeep(oe.searchForm),pe()};p([]);const ne=()=>{u({url:"/campaign/administration/create",query:{type:"create"}})},ue=e=>async()=>{const{row:a,$index:l}=e,t=await(async e=>await R({ids:e,is_del:2}))([a.id]);z(t)&&oe.list.splice(l,1)},pe=async()=>{oe.loading=!0;let e=i(i({page:oe.pagination.listQuery.page,limit:oe.pagination.listQuery.limit},ae.value),le.value);e[e.value_type]=e.value,delete e.value_type,delete e.value,e=A(e);const a=await N(e);if(a){const{data:e}=a;oe.list=null==e?void 0:e.data,oe.pagination.total=Number(e.count)}oe.loading=!1};return m((()=>{ie()})),(e,l)=>{const t=b("el-option"),s=b("el-select"),o=b("el-form-item"),r=b("el-input"),i=b("el-checkbox"),n=b("el-button"),p=b("el-form"),d=b("el-table-column"),c=b("el-image"),m=b("el-switch"),P=b("el-dialog"),Q=v("loading");return _(),g("div",null,[f("div",T,[y(p,{modelValue:w(oe).searchForm,"onUpdate:modelValue":l[6]||(l[6]=e=>w(oe).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:h((()=>[f("div",B,[V(" 广告主 "),y(o,{label:""},{default:h((()=>[y(s,{modelValue:w(oe).searchForm.status,"onUpdate:modelValue":l[0]||(l[0]=e=>w(oe).searchForm.status=e),filterable:"",clearable:"",placeholder:"所有广告主"},{default:h((()=>[(_(!0),g(U,null,O(w(oe).options.status,(e=>(_(),F(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),V(" 所有样式 "),y(o,{label:""},{default:h((()=>[y(s,{modelValue:w(oe).searchForm.status,"onUpdate:modelValue":l[1]||(l[1]=e=>w(oe).searchForm.status=e),filterable:"",clearable:"",placeholder:"所有样式"},{default:h((()=>[(_(!0),g(U,null,O(w(oe).options.status,(e=>(_(),F(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),V(" 所有审核状态 "),y(o,{label:""},{default:h((()=>[y(s,{modelValue:w(oe).searchForm.status,"onUpdate:modelValue":l[2]||(l[2]=e=>w(oe).searchForm.status=e),filterable:"",clearable:"",placeholder:"所有审核状态"},{default:h((()=>[(_(!0),g(U,null,O(w(oe).options.status,(e=>(_(),F(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),V(" 输入 "),y(o,{label:""},{default:h((()=>[y(r,{modelValue:w(oe).searchForm.value,"onUpdate:modelValue":l[4]||(l[4]=e=>w(oe).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:h((()=>[y(s,{modelValue:w(oe).searchForm.value_type,"onUpdate:modelValue":l[3]||(l[3]=e=>w(oe).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:h((()=>[(_(!0),g(U,null,O(w(oe).options.value_type,(e=>(_(),F(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),y(o,{label:""},{default:h((()=>[y(i,{modelValue:w(oe).searchForm.is_del,"onUpdate:modelValue":l[5]||(l[5]=e=>w(oe).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),f("div",L,[y(o,{class:"mr-0",style:{"margin-right":"0px"}},{default:h((()=>[f("div",Z,[y(n,{type:"primary",onClick:ie},{default:h((()=>[G])),_:1}),V(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),V(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> '),f("div",H,[y(n,{type:"primary",onClick:ne},{default:h((()=>[J])),_:1})])]),V(" table "),x((_(),F(w(k),{ref_key:"multipleTableRef",ref:a,center:"",data:w(oe).list,class:"w100",border:"",onSelectionChange:re},{default:h((()=>[V(" ID "),y(d,{sortable:"",prop:"id",label:"ID",align:"center"}),V(" 名称 "),y(d,{sortable:"",width:"120",prop:"adv_series_name",label:"名称",align:"center"}),V(" 缩略图 "),y(d,{width:"120",prop:"adv_series_name",label:"缩略图",align:"center"},{default:h((e=>[y(c,{style:{width:"100px",height:"100px"},src:e.row.logo,"preview-src-list":[e.row.logo],"initial-index":4,fit:"cover"},null,8,["src","preview-src-list"])])),_:1}),V(" 操作 "),y(d,{width:"200",label:"操作",align:"center"},{default:h((e=>[f("div",K,[y(n,{class:"cp",type:"primary",onClick:a=>(({row:e})=>{const{id:a}=e;u({url:`/campaign/administration/edit/${a}`,query:{type:"edit"}})})(e)},{default:h((()=>[M])),_:2},1032,["onClick"]),y(n,{class:"cp",type:"primary"},{default:h((()=>[W])),_:1}),V(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),y(n,{class:"cp",type:"danger",onClick:a=>(async e=>{D({text:`确认归档${e.row.adv_series_name}？`,title:"归档操作",buttonText:"确认"},ue(e))})(e),disabled:2===e.row.is_del},{default:h((()=>[X])),_:2},1032,["onClick","disabled"])])])),_:1}),V(" 开关 "),y(d,{sortable:"",prop:"status",label:"开关",align:"center"},{default:h((e=>[y(m,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onClick:a=>(async({row:e})=>{let a={id:e.id,status:e.status},l=await E(a);z(l)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),V(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),V(" 样式 "),y(d,{sortable:"",prop:"status",label:"样式",align:"center"},{default:h((e=>[f("span",null,C(w($)(e.row.status,w(oe).options.status)),1)])),_:1}),V(" 审核状态 "),y(d,{sortable:"",prop:"status",label:"审核状态",align:"center"},{default:h((e=>[f("span",null,C(w($)(e.row.status,w(oe).options.status)),1)])),_:1}),V(" 尺寸 "),y(d,{sortable:"",width:"120",prop:"adv_series_type",label:"尺寸",align:"center"},{default:h((e=>[f("span",null,C(w($)(e.row.adv_type,w(oe).options.adv_series_type)),1)])),_:1}),V(" 格式 "),y(d,{sortable:"",width:"120",prop:"marbet_target",label:"格式",align:"center"},{default:h((e=>[f("span",null,C(w($)(e.row.adv_type,w(oe).options.marbet_target)),1)])),_:1}),V(" 大小 "),y(d,{sortable:"",width:"120",prop:"marbet_target",label:"大小",align:"center"},{default:h((e=>[f("span",null,C(w($)(e.row.adv_type,w(oe).options.marbet_target)),1)])),_:1}),V(" 时长 "),y(d,{sortable:"",width:"120",prop:"marbet_target",label:"时长",align:"center"},{default:h((e=>[f("span",null,C(w($)(e.row.adv_type,w(oe).options.marbet_target)),1)])),_:1}),V(" 关联广告 "),y(d,{sortable:"",width:"120",prop:"marbet_target",label:"关联广告",align:"center"},{default:h((e=>[f("span",null,C(w($)(e.row.adv_type,w(oe).options.marbet_target)),1)])),_:1}),V(" 创建人 "),y(d,{sortable:"",width:"120",prop:"user",label:"创建人",align:"center"}),V(" 创建时间 "),y(d,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),V(" 更新时间 "),y(d,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"})])),_:1},8,["data"])),[[Q,w(oe).loading]]),V(" 分页 "),f("div",Y,[x(y(S,{page:w(oe).pagination.listQuery.page,"onUpdate:page":l[7]||(l[7]=e=>w(oe).pagination.listQuery.page=e),limit:w(oe).pagination.listQuery.limit,"onUpdate:limit":l[8]||(l[8]=e=>w(oe).pagination.listQuery.limit=e),total:w(oe).pagination.total,"page-sizes":w(oe).pagination.pageSizes,onPagination:pe},null,8,["page","limit","total","page-sizes"]),[[j,w(oe).pagination.total]])]),V(" 复制 "),y(P,{modelValue:te.value,"onUpdate:modelValue":l[10]||(l[10]=e=>te.value=e),title:"Report Api",width:"90%"},{default:h((()=>[f("p",null,C(w(se).report_api),1),y(n,{class:"cp mr-10",type:"default",onClick:l[9]||(l[9]=e=>{return a=w(se).report_api,void q(a);var a})},{default:h((()=>[ee])),_:1})])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-93cffa54"]]);export{te as default};
