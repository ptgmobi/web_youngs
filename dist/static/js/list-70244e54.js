var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,r=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))i.call(a,l)&&s(e,l,a[l]);return e};import{_ as n,d,h as u,Z as p,r as c,L as m,q as b,$ as f,o as g,c as v,x as y,e as _,v as h,s as w,z as j,U as x,A as V,a8 as F,V as U,K as k,f as O}from"./main-c289050e.js";import{s as C}from"./setting-c7abf732.js";import{P}from"./index-19cba061.js";import{m as Q}from"./message-7c571a95.js";import{_ as S}from"./lodash-6a3426b2.js";import{h as z}from"./new-format-0cb28217.js";import{u as D}from"./useUtils-034ffd86.js";import"./clipboard-polyfill.text.esm-fc4f7791.js";import{e as $,f as A,g as E}from"./dsp-media-93cb6169.js";import{_ as I}from"./index-15b94426.js";import"./format-fb65a074.js";import"./moment-9bd84dc2.js";import"./dsp-advertiser-d95bf0ce.js";import"./dsp-7b5725df.js";const N={class:"controlBox w100 mb-10"},T={class:"flex jc-start flex-wrap w100"},q={class:"flex"},B={class:"flex"},K=O(" 查询 "),L={class:"mb-10 w100"},R=O("添加媒体"),Z={class:"flex jc-around"},G=O("删除"),H={class:"w100 flex"},J={class:"dialog-footer"},M=O("取消"),W=O(" 保存 "),X=d({name:"adserieslist"});var Y,ee=n(d((Y=r({},X),a(Y,l({setup(e){const a=u(),l=u([{id:""}]);let t=u(""),o=u(!1);const{adv_type:i,audience_manage_type:s,build_status:n,audit_status:d}=C,{goNewUrl:O,openAlert:X}=D(),Y=p({status:"",type:"",build_status:"",is_del:"1",value_type:"bundle",value:""}),ee=c({adv_id:"",st:"",et:""});c({report_api:""});let ae=c({dialogVisible:!1,ruleForm:{bundle:""},cache:{item:{}},searchForm:Y.value,useData:Y.value,loading:!0,options:{adv_type:i,audience_manage_type:s,build_status:n,country:[],value_type:[{value:"id",label:"媒体列表名称"},{value:"name",label:"媒体列表id"},{value:"descs",label:"创建人"}]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});c({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const le=e=>{l.value=e},te=()=>{ae.useData=S.cloneDeep(ae.searchForm),re()};u([]);const oe=()=>{t.value="create",o.value=!0,ae.ruleForm.bundle=""},ie=e=>async()=>{const{row:a,$index:l}=e,t=await(async e=>await E({ids:e,is_del:2}))([a.id]);Q(t)&&ae.list.splice(l,1)},se=e=>{ee.adv_id=e.adv,e.date&&(ee.st=e.date[0],ee.et=e.date[1])},re=async()=>{ae.loading=!0;let e=r(r({page:ae.pagination.listQuery.page,limit:ae.pagination.listQuery.limit},Y.value),ee);e[e.value_type]=e.value,delete e.value_type,delete e.value,e=z(e);const a=await $(e);if(a){const{data:e}=a;ae.list=null==e?void 0:e.data,ae.pagination.total=Number(e.count)}ae.loading=!1};return m((()=>{te()})),(e,l)=>{const t=b("el-input"),i=b("el-form-item"),s=b("el-button"),n=b("el-form"),d=b("el-table-column"),u=b("el-dialog"),p=f("loading");return g(),v("div",null,[y("div",N,[_(h(I),{onUp:se}),_(n,{modelValue:h(ae).searchForm,"onUpdate:modelValue":l[1]||(l[1]=e=>h(ae).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:w((()=>[y("div",T,[j(" 输入 "),_(i,{label:""},{default:w((()=>[_(t,{modelValue:h(ae).searchForm.value,"onUpdate:modelValue":l[0]||(l[0]=e=>h(ae).searchForm.value=e),placeholder:"请输入媒体bundle",class:"input-with-select"},null,8,["modelValue"])])),_:1})]),y("div",q,[_(i,{class:"mr-0",style:{"margin-right":"0px"}},{default:w((()=>[y("div",B,[_(s,{type:"primary",onClick:te},{default:w((()=>[K])),_:1}),j(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),j(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> '),y("div",L,[_(s,{type:"primary",onClick:oe},{default:w((()=>[R])),_:1})])]),j(" table "),x((g(),V(h(F),{ref_key:"multipleTableRef",ref:a,center:"",data:h(ae).list,class:"w100",border:"",onSelectionChange:le},{default:w((()=>[j(" 序列 "),_(d,{sortable:"",prop:"id",label:"序列",align:"center"}),j(" 媒体bundle "),_(d,{sortable:"",prop:"bundle",label:"媒体bundle",align:"center"}),j(" 操作 "),_(d,{label:"操作",align:"center"},{default:w((e=>[y("div",Z,[_(s,{class:"cp",type:"danger",onClick:a=>(async e=>{X({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},ie(e))})(e),disabled:2===e.row.is_del},{default:w((()=>[G])),_:2},1032,["onClick","disabled"])])])),_:1}),j(" 创建人 "),_(d,{sortable:"",prop:"create_email",label:"创建人",align:"center"}),j(" 创建时间 "),_(d,{sortable:"",prop:"create_time",label:"创建时间",align:"center"})])),_:1},8,["data"])),[[p,h(ae).loading]]),j(" 分页 "),y("div",H,[x(_(P,{page:h(ae).pagination.listQuery.page,"onUpdate:page":l[2]||(l[2]=e=>h(ae).pagination.listQuery.page=e),limit:h(ae).pagination.listQuery.limit,"onUpdate:limit":l[3]||(l[3]=e=>h(ae).pagination.listQuery.limit=e),total:h(ae).pagination.total,"page-sizes":h(ae).pagination.pageSizes,onPagination:re},null,8,["page","limit","total","page-sizes"]),[[U,h(ae).pagination.total]])]),j(" 复制 "),_(u,{modelValue:h(o),"onUpdate:modelValue":l[8]||(l[8]=e=>k(o)?o.value=e:o=e),title:"添加公共媒体黑名单",width:"90%"},{footer:w((()=>[y("span",J,[_(s,{onClick:l[6]||(l[6]=e=>k(o)?o.value=!1:o=!1)},{default:w((()=>[M])),_:1}),_(s,{type:"primary",onClick:l[7]||(l[7]=e=>(async()=>{const e=r({},ae.ruleForm),a=await A(e);Q(a)&&te(),o.value=!1})())},{default:w((()=>[W])),_:1})])])),default:w((()=>[_(n,{modelValue:h(ae).searchForm,"onUpdate:modelValue":l[5]||(l[5]=e=>h(ae).searchForm=e),inline:!0,class:"flex w100"},{default:w((()=>[_(t,{modelValue:h(ae).ruleForm.bundle,"onUpdate:modelValue":l[4]||(l[4]=e=>h(ae).ruleForm.bundle=e),class:"form-one",placeholder:"请输入bundle，多个媒体bundle请换行，一行一个bundle，最多支持1000行。",rows:8,type:"textarea"},null,8,["modelValue"])])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-1d88f1a3"]]);export{ee as default};
