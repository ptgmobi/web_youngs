import{d as t,h as e,r as a,I as n,a0 as s,w as o,q as u,o as f,c as r,x as c,y as l,v as d,e as i,K as p,f as _}from"./main-52a8165b.js";import{h as m}from"./buzz-18a1024a.js";const x={class:"w100"},y={class:"flex jc-start"},v=["textContent"],C=_(" % "),b=c("span",null,"-",-1),g=["textContent"],j=_(" % （ "),q=c("span",null,"总设备数:",-1),h=["textContent"],w=_(" ） （ "),F=c("span",null,"选中设备数:",-1),N=["textContent"],V=_(" ） "),k={class:"p0-10"},z=t({props:{query:{require:!0,default:()=>({}),type:Object}},emits:["up"],setup(t,{emit:_}){const z=t;let A=e(0),I=a({cutoff_start:z.query.cutoff_start,cutoff_end:z.query.cutoff_end}),K=I.cutoff_start?100*Number(I.cutoff_start):0,L=I.cutoff_end?100*Number(I.cutoff_end):100,O=e([K,L]);const U=async()=>{const{pkg_name:t,country:e,platform:a}=z.query;if(t&&e&&a){const n={pkg_name:t,country:Array.isArray(e)?e.join(","):e,platform:a},s=await(async t=>{const e=await m(t),{data:a}=e;return 0!==a.length?a.findLast((t=>t)).device_num:0})(n);A.value=s}},B=n((()=>{const t=A.value,e=I.cutoff_start?Number(I.cutoff_start):0;return{judge:(((I.cutoff_end?Number(I.cutoff_end):1)-e)*t).toFixed(0),all:t.toFixed(0)}}));s((()=>{U()})),o((()=>z.query),((t,e)=>{void 0!==t.cutoff_start&&void 0!==t.cutoff_end&&(I.cutoff_start=t.cutoff_start,I.cutoff_end=t.cutoff_end)}),{immediate:!0,deep:!0});const D=t=>{var e;e=t,I.cutoff_start=e[0]/100,I.cutoff_end=e[1]/100,_("up",I)};return(t,e)=>{const a=u("el-slider");return f(),r("div",x,[c("div",y,[c("span",{textContent:l((100*d(I).cutoff_start).toFixed(0))},null,8,v),C,b,c("span",{textContent:l((100*d(I).cutoff_end).toFixed(0))},null,8,g),j,q,c("span",{textContent:l(d(B).all)},null,8,h),w,F,c("span",{textContent:l(d(B).judge)},null,8,N),V]),c("div",k,[i(a,{modelValue:d(O),"onUpdate:modelValue":e[0]||(e[0]=t=>p(O)?O.value=t:O=t),class:"device-cutoff",range:"",step:5,"show-stops":!0,"show-input":"",min:0,max:100,onChange:D},null,8,["modelValue"])])])}}});export{z as _};
