var z=Object.defineProperty;var F=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var j=(i,e,o)=>e in i?z(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o,E=(i,e)=>{for(var o in e||(e={}))B.call(e,o)&&j(i,o,e[o]);if(F)for(var o of F(e))H.call(e,o)&&j(i,o,e[o]);return i};import{d as O,z as M,C as I,b as A,r as s,k as f,v as c,x as n,h as m,j as l,i as v,N as R,O as T,o as d,F as g,l as x,y as L,c as y,t as N}from"./vendor-f1931894.js";import{P as W}from"./index-72e015cb.js";import{W as $}from"./index-4d1e0e8b.js";import{k as G}from"./overview-c6a37651.js";import{g as k,a as K}from"./format-b76f9697.js";import{_ as J}from"./index-ee9f9318.js";import"./moment-1cf83a0b.js";const X={class:"search-box"},Z={class:"mb-10"},ee={class:"flex jc-between ai-start"},ae={class:"flex jc-start ai-start flex-wrap"},le=L(" Run "),te={class:"mb-10"},oe={style:{"margin-left":"10px"}},re={class:"w100 flex"},ne=O({setup(i){let e=M({shortcuts:[{text:"\u4ECA\u5929",value:k(0,"day")},{text:"\u6628\u5929",value:()=>K(1,1,"day")},{text:"\u6700\u8FD17\u5929",value:()=>k(6,"day")}],clumon:{base:[{label:"Impression",value:"impression"},{label:"Click",value:"click"},{label:"CVR",value:"cvr"},{label:"Conversion",value:"conversion"},{label:"Revenue($)",value:"revenue"}],choice:[{label:"Date",value:"date",require:!0,width:"100"},{label:"Hour",value:"hour",require:!1},{label:"Country",value:"country",require:!1},{label:"Platform",value:"platform",require:!1},{label:"PKG",value:"pkg",require:!1},{label:"Offer",value:"offer",require:!1}]},search:{date:k(6,"day"),checkList:["date"],filter:{country:"",platform:"",pkg:"",offer:""}},options:{platform:[{value:"Android",label:"Android"},{value:"iOS",label:"iOS"}]},tableData:{all:[],arr:[]},exportExcel:{buttonName:"\u5BFC\u51FA",tHeader:["\u65E5\u671F"],filterVal:["date"],fileName:"test"},pagination:{pageSizes:["10","20","40","100"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}},handleClumon:[],busHandleClumon:[]});I(()=>{console.log("mounted")});const o=A(()=>e.handleClumon.map(r=>r.label)),S=A(()=>e.handleClumon.map(r=>r.value)),C=async()=>{const r=e.search.checkList,u=V(r).map(_=>_.value).join(",");let b=E({page:e.pagination.listQuery.page,page_size:e.pagination.listQuery.limit,st:e.search.date[0],et:e.search.date[1]},e.search.filter);u&&(b.dimension=u);const h=await G(b),{data:p}=h;e.tableData.arr=p.data,e.pagination.total=parseInt(p.count)},V=r=>{const t=[];return e.clumon.choice.map(u=>{r.includes(u.value)&&t.push(u)}),t},w=r=>{const t=V(r);e.busHandleClumon=[...t,...e.clumon.base]},D=()=>{e.handleClumon=e.busHandleClumon,C()};return w(e.search.checkList),D(),(r,t)=>{const u=s("el-checkbox"),b=s("el-checkbox-group"),h=s("el-date-picker"),p=s("el-input"),_=s("el-option"),U=s("el-select"),Y=s("el-button"),q=s("el-table-column"),P=s("el-table");return d(),f("div",null,[c("div",X,[c("div",Z,[n(b,{modelValue:l(e).search.checkList,"onUpdate:modelValue":t[0]||(t[0]=a=>l(e).search.checkList=a),onChange:w},{default:m(()=>[(d(!0),f(g,null,x(l(e).clumon.choice,a=>(d(),y(u,{key:a.value,label:a.value,disabled:a.require},{default:m(()=>[L(N(a.label),1)]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["modelValue"])]),c("div",ee,[c("div",ae,[n(h,{modelValue:l(e).search.date,"onUpdate:modelValue":t[1]||(t[1]=a=>l(e).search.date=a),class:"mr-10 mb-10",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",shortcuts:l(e).shortcuts},null,8,["modelValue","shortcuts"]),n(p,{modelValue:l(e).search.filter.country,"onUpdate:modelValue":t[2]||(t[2]=a=>l(e).search.filter.country=a),placeholder:"Country",class:"mr-10 mb-10 search-con"},null,8,["modelValue"]),n(U,{modelValue:l(e).search.filter.platform,"onUpdate:modelValue":t[3]||(t[3]=a=>l(e).search.filter.platform=a),clearable:"",filterable:"",placeholder:"Platform",class:"mr-10 search-con"},{default:m(()=>[(d(!0),f(g,null,x(l(e).options.platform,a=>(d(),y(_,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),n(p,{modelValue:l(e).search.filter.pkg,"onUpdate:modelValue":t[4]||(t[4]=a=>l(e).search.filter.pkg=a),placeholder:"Pkg",class:"mr-10 mb-10 search-con"},null,8,["modelValue"]),n(p,{modelValue:l(e).search.filter.offer,"onUpdate:modelValue":t[5]||(t[5]=a=>l(e).search.filter.offer=a),placeholder:"Offer",class:"mr-10 mb-10 search-con"},null,8,["modelValue"])]),n(Y,{type:"primary",onClick:D},{default:m(()=>[le]),_:1})])]),v(" all "),v(` <el-table :data="tableData.all" border style="width: 100%" class="mb-10">
      <el-table-column prop="impression" label="Impression" />
      <el-table-column prop="click" label="Click" />
      <el-table-column prop="revenue" label="Revenue($)" />
      <el-table-column prop="conversion" label="Conversion" />
    </el-table> `),c("div",te,[n($,{"button-name":l(e).exportExcel.buttonName,list:l(e).tableData.arr,"t-header":l(o),"filter-val":l(S),filename:l(e).exportExcel.fileName},null,8,["button-name","list","t-header","filter-val","filename"])]),v(" arr "),n(P,{data:l(e).tableData.arr,border:!0,style:{width:"100%"}},{default:m(()=>[(d(!0),f(g,null,x(l(e).handleClumon,a=>(d(),y(q,{key:a.value,align:"center",sortable:"",prop:a.value,label:a.label,width:a.width},{default:m(Q=>[v(' <i class="el-icon-time"></i> '),c("span",oe,N(Q.row[a.value]),1)]),_:2},1032,["prop","label","width"]))),128))]),_:1},8,["data"]),c("div",re,[R(n(l(W),{page:l(e).pagination.listQuery.page,"onUpdate:page":t[6]||(t[6]=a=>l(e).pagination.listQuery.page=a),limit:l(e).pagination.listQuery.limit,"onUpdate:limit":t[7]||(t[7]=a=>l(e).pagination.listQuery.limit=a),total:l(e).pagination.total,"page-sizes":l(e).pagination.pageSizes,onPagination:C},null,8,["page","limit","total","page-sizes"]),[[T,l(e).pagination.total]])])])}}});var fe=J(ne,[["__scopeId","data-v-66630144"]]);export{fe as default};
