import{d as e,ai as a,y as l,B as t,r as o,aj as i,i as r,s as c,g as d,v as u,f as n,h as s,P as m,c as p,Q as f,o as b,F as _,j as y,x as v,t as h,p as w,q as g}from"./vendor-29be9345.js";import{P as V}from"./index-462d3a64.js";import{A as x,_ as U,a as k,b as D}from"./device-f74f8a74.js";import{m as F}from"./message-30c5e552.js";import{_ as R}from"./lodash-62ea137f.js";import{h as j}from"./new-format-1656c250.js";import{_ as z}from"./index-9f72a6d4.js";import"./format-bcf1fb2b.js";import"./moment-1cf83a0b.js";const C=e=>(w("data-v-0b56db22"),e=e(),g(),e),A={class:"controlBox w100 mb-10"},P={class:"mb-10"},S=v("Offer Create"),Q={class:"flex jc-start flex-wrap w100"},O={class:"flex"},N={class:"flex"},E=v("查询"),B={class:"flex jc-around"},$={class:"flex jc-around"},I=C((()=>c("span",{class:"cp icon ml-10"},[c("i",{class:"el-icon-edit"})],-1))),L=["textContent"],M={class:"flex jc-around"},T={class:"w100 flex"},q={class:"dialog-footer"},K=v("确 定");var G=z(e({setup(e){const w=a({attribute_provider:[],platform:[],package_name:"",channel:"",id:"",offer_title:"",country:"",pid:""});let g=l({offer:{},index:null,cacheDevice:{}}),z=l({dialogVisible:!1,dialogVisibleDevice:!1,cache:{item:{},device:{}},searchForm:w.value,useData:w.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((e,a)=>{const l=5*a/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((e,a)=>{const l=(5*a+5)/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const C=()=>{z.useData=R.cloneDeep(z.searchForm),G()},G=async()=>{z.loading=!0;let e={page:z.pagination.listQuery.page,page_size:z.pagination.listQuery.limit};z.useData.attribute_provider&&(e.attribute_provider=z.useData.attribute_provider),z.useData.platform&&(e.platform=z.useData.platform),z.useData.package_name&&(e.pkg_name=z.useData.package_name),z.useData.channel&&(e.channel=z.useData.channel),z.useData.id&&(e.offer_id=z.useData.id),z.useData.offer_title&&(e.title=z.useData.offer_title),z.useData.country&&(e.country=z.useData.country),z.useData.pid&&(e.tracking_link=z.useData.pid);const a=await x(e),{data:l}=a;z.list=null==l?void 0:l.data,z.pagination.total=Number(l.count),z.loading=!1},H=e=>{g.cacheDevice.select=e},J=()=>{g.offer.id,g.cacheDevice.select};return t((()=>{C()})),(e,a)=>{const l=o("el-button"),t=o("router-link"),w=o("el-option"),x=o("el-select"),R=o("el-form-item"),W=o("el-input"),X=o("el-form"),Y=o("el-table-column"),Z=o("el-switch"),ee=o("el-table"),ae=o("el-dialog"),le=i("loading");return b(),r("div",null,[c("div",A,[c("div",P,[d(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),u(t,{to:"/buzz/old-buzz/create"},{default:n((()=>[u(l,{type:"primary"},{default:n((()=>[S])),_:1})])),_:1})]),u(X,{inline:!0,modelValue:s(z).searchForm,"onUpdate:modelValue":a[8]||(a[8]=e=>s(z).searchForm=e),class:"flex jc-between w100 ai-end"},{default:n((()=>[c("div",Q,[u(R,{label:""},{default:n((()=>[u(x,{modelValue:s(z).searchForm.attribute_provider,"onUpdate:modelValue":a[0]||(a[0]=e=>s(z).searchForm.attribute_provider=e),clearable:"",class:"search-con",placeholder:"Attribute Provider",style:{"min-width":"140px"}},{default:n((()=>[(b(!0),r(_,null,y(s(z).options.attribute_provider,(e=>(b(),p(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(R,{label:""},{default:n((()=>[u(x,{modelValue:s(z).searchForm.platform,"onUpdate:modelValue":a[1]||(a[1]=e=>s(z).searchForm.platform=e),clearable:"",class:"search-con",placeholder:"Platform",style:{"min-width":"95px"}},{default:n((()=>[(b(!0),r(_,null,y(s(z).options.platform,(e=>(b(),p(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(R,{label:""},{default:n((()=>[u(W,{placeholder:"Package Name",modelValue:s(z).searchForm.package_name,"onUpdate:modelValue":a[2]||(a[2]=e=>s(z).searchForm.package_name=e),class:"search-con",style:{"min-width":"120px"}},null,8,["modelValue"])])),_:1}),u(R,{label:""},{default:n((()=>[u(W,{placeholder:"Channel",modelValue:s(z).searchForm.channel,"onUpdate:modelValue":a[3]||(a[3]=e=>s(z).searchForm.channel=e),class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),u(R,{label:""},{default:n((()=>[u(W,{placeholder:"ID",modelValue:s(z).searchForm.id,"onUpdate:modelValue":a[4]||(a[4]=e=>s(z).searchForm.id=e),class:"search-con"},null,8,["modelValue"])])),_:1}),u(R,{label:""},{default:n((()=>[u(W,{placeholder:"Offer Title",modelValue:s(z).searchForm.offer_title,"onUpdate:modelValue":a[5]||(a[5]=e=>s(z).searchForm.offer_title=e),class:"search-con",style:{"min-width":"90px"}},null,8,["modelValue"])])),_:1}),u(R,{label:""},{default:n((()=>[u(W,{placeholder:"Country",modelValue:s(z).searchForm.country,"onUpdate:modelValue":a[6]||(a[6]=e=>s(z).searchForm.country=e),class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),u(R,{label:""},{default:n((()=>[u(W,{placeholder:"Pid",modelValue:s(z).searchForm.pid,"onUpdate:modelValue":a[7]||(a[7]=e=>s(z).searchForm.pid=e),class:"search-con"},null,8,["modelValue"])])),_:1})]),c("div",O,[u(R,{class:"mr-0",style:{"margin-right":"0px"}},{default:n((()=>[c("div",N,[u(l,{type:"primary",onClick:C},{default:n((()=>[E])),_:1}),d(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),d(' <el-input placeholder="请输入内容" v-model="data.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),d(" table "),m((b(),p(ee,{center:"",data:s(z).list,class:"w100",height:"60vh",border:""},{default:n((()=>[u(Y,{fixed:"",prop:"offer_id",label:"ID"}),u(Y,{fixed:"",prop:"channel",label:"Channel"}),u(Y,{prop:"pkg_name",label:"Package Name"}),u(Y,{prop:"title",label:"Offer Title",width:"120"}),u(Y,{prop:"attribute_provider",label:"Attribute Provider"}),u(Y,{prop:"pid",label:"Pid"}),u(Y,{prop:"platform",label:"Platform"},{default:n((e=>[v(h(1===Number(e.row.platform)?"Android":"iOS"),1)])),_:1}),u(Y,{prop:"country",label:"Country"}),u(Y,{prop:"payout",label:"Payout"}),u(Y,{label:"Click Limitation(w)",width:"150"},{default:n((e=>[c("div",B,[u(W,{modelValue:e.row.max_clk_num,"onUpdate:modelValue":a=>e.row.max_clk_num=a,placeholder:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),u(l,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(async e=>{let a={id:e.id,max_clk_num:e.max_clk_num};a=j(a);let l=await k(a);F(l)})(e.row)},null,8,["onClick"])])])),_:1}),u(Y,{label:"Site Click Limitation",width:"150"},{default:n((e=>[c("div",$,[u(W,{modelValue:e.row.site_clk_limit,"onUpdate:modelValue":a=>e.row.site_clk_limit=a,placeholder:""},null,8,["modelValue","onUpdate:modelValue"]),I])])),_:1}),u(Y,{label:"Select Device"},{default:n((e=>[c("span",{textContent:h(e.row.device_count)},null,8,L),u(l,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:a=>{return l=e.$index,t=e.row,z.dialogVisibleDevice=!0,g.offer=t,g.index=l,void(g.cacheDevice={select:[{id:"627909",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"by",slot_id:"37641287",device_count:"3092161"},{id:"628270",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"bz",slot_id:"19760998",device_count:"894270"},{id:"627595",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"cy",slot_id:"78317974",device_count:"5650213"},{id:"627755",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"cz",slot_id:"35082647",device_count:"2579008"},{id:"627664",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"dy",slot_id:"46634509",device_count:"17162151"},{id:"628339",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"dz",slot_id:"33488006",device_count:"20869879"}],all:[{id:"627657",day:"2022-01-11",platform:"1",country:"RU",source:"adx",label:"aw",slot_id:"57351627",device_count:"3094129"},{id:"628012",day:"2022-01-11",platform:"1",country:"RU",source:"direct",label:"ax",slot_id:"35653768",device_count:"2276277"},{id:"627689",day:"2022-01-11",platform:"1",country:"RU",source:"direct",label:"ay",slot_id:"44225907",device_count:"1219696"},{id:"627706",day:"2022-01-11",platform:"1",country:"RU",source:"direct",label:"az",slot_id:"33347536",device_count:"182883"},{id:"627434",day:"2022-01-11",platform:"1",country:"RU",source:"direct",label:"bw",slot_id:"66660203",device_count:"3313520"},{id:"628046",day:"2022-01-11",platform:"1",country:"RU",source:"direct",label:"cw",slot_id:"14372948",device_count:"2841368"},{id:"627753",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"bx",slot_id:"59188090",device_count:"3168514"},{id:"627909",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"by",slot_id:"37641287",device_count:"3092161"},{id:"628270",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"bz",slot_id:"19760998",device_count:"894270"},{id:"627732",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"cx",slot_id:"99431779",device_count:"4906792"},{id:"627595",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"cy",slot_id:"78317974",device_count:"5650213"},{id:"627755",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"cz",slot_id:"35082647",device_count:"2579008"},{id:"628057",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"dw",slot_id:"66196474",device_count:"4170112"},{id:"627426",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"dx",slot_id:"43347563",device_count:"7879852"},{id:"627664",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"dy",slot_id:"46634509",device_count:"17162151"},{id:"628339",day:"2022-01-11",platform:"1",country:"RU",source:"wm",label:"dz",slot_id:"33488006",device_count:"20869879"}]});var l,t}},null,8,["onClick"])])),_:1}),u(Y,{width:"100",label:"Operation"},{default:n((e=>{return[c("div",M,[u(t,{to:(a=e.row,`/buzz/old-buzz/edit/${a.id}`)},{default:n((()=>[u(l,{class:"cp mr-10",type:"primary",icon:"Edit",circle:""})])),_:2},1032,["to"]),d(" <el-button class='cp mr-10' type=\"primary\" icon=\"Edit\" circle @click='editFun(scope.row)'></el-button> "),u(Z,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onChange:a=>(async e=>{let a={id:e.id,status:e.status};a=j(a);const l=await D(a);F(l)})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])];var a})),_:1})])),_:1},8,["data"])),[[le,s(z).loading]]),d(" 分页 "),c("div",T,[m(u(s(V),{total:s(z).pagination.total,"page-sizes":s(z).pagination.pageSizes,page:s(z).pagination.listQuery.page,"onUpdate:page":a[9]||(a[9]=e=>s(z).pagination.listQuery.page=e),limit:s(z).pagination.listQuery.limit,"onUpdate:limit":a[10]||(a[10]=e=>s(z).pagination.listQuery.limit=e),onPagination:G},null,8,["total","page-sizes","page","limit"]),[[f,s(z).pagination.total]])]),d(" device "),u(ae,{title:"Device",modelValue:s(z).dialogVisibleDevice,"onUpdate:modelValue":a[11]||(a[11]=e=>s(z).dialogVisibleDevice=e)},{default:n((()=>[u(U,{json:s(g).cacheDevice,onKk:H},null,8,["json"]),c("span",q,[d(' <el-button @click="cancleDevice">取 消</el-button> '),u(l,{type:"primary",onClick:J},{default:n((()=>[K])),_:1})])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-0b56db22"]]);export{G as default};
