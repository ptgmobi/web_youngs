var q=Object.defineProperty;var M=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var O=(_,s,o)=>s in _?q(_,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):_[s]=o,A=(_,s)=>{for(var o in s||(s={}))z.call(s,o)&&O(_,o,s[o]);if(M)for(var o of M(s))L.call(s,o)&&O(_,o,s[o]);return _};import{d as C,z as V,C as T,r as h,o as p,k as b,v,x as r,h as f,j as a,F as D,l as j,i as F,y as $,af as R,c as w,w as P,t as N,q as H,s as W,b as Y}from"./vendor-bf64253d.js";import{f as G,h as K,i as J,j as Q}from"./overview-a1082d39.js";import{g as E,a as X,t as B}from"./format-b76f9697.js";import{_ as Z}from"./lodash-05c10b51.js";import{h as U}from"./new-format-b98ea9a0.js";import{_ as ee}from"./index-df839a74.js";import{_ as ae}from"./index-1d6fe13a.js";import{W as te}from"./index-11857f4a.js";import"./moment-1cf83a0b.js";const le={class:"white-bg control-box flex jc-between ai-start p0-0"},oe={class:"flex jc-start flex-wrap ai-start"},ne={class:"flex"},re=$(" \u67E5\u8BE2 "),se=C({emits:["emitParent"],setup(_,{emit:s}){const o={adtype:"",channel_type:"",use_name:"",slot:"",country:"",date:E(6,"day")},e=V({shortcuts:[{text:"\u4ECA\u5929",value:E(0,"day")},{text:"\u6628\u5929",value:()=>X(1,1,"day")},{text:"\u6700\u8FD17\u5929",value:()=>E(6,"day")},{text:"\u6700\u8FD130\u5929",value:()=>E(29,"day")}],options:{adtype:["ssp","fenix"],channel_type:[{value:1,label:"\u4EE3\u7406"},{value:2,label:"API"},{value:3,label:"\u76F4\u5BA2"}],country:[{value:"",label:""}],user_name:[{label:"",value:""}],slot:[{value:"",label:""}]},data:o}),d=async()=>{const{data:u}=await G();e.options.user_name=u==null?void 0:u.user_name,e.options.slot=u==null?void 0:u.slot,e.options.country=u==null?void 0:u.country},y=()=>{},c=()=>{console.warn("set search data"),s("emitParent",Z.cloneDeep(R(e.data)))};return T(()=>{d(),c()}),(u,n)=>{const i=h("el-date-picker"),l=h("el-form-item"),m=h("el-option"),g=h("el-select"),x=h("el-button"),k=h("el-form");return p(),b("div",null,[v("div",le,[r(k,{inline:!0,model:a(e).data,class:"flex jc-between ai-start w100"},{default:f(()=>[v("div",oe,[r(l,{label:"\u65E5\u671F\u9009\u62E9"},{default:f(()=>[r(i,{modelValue:a(e).data.date,"onUpdate:modelValue":n[0]||(n[0]=t=>a(e).data.date=t),class:"search-con",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",shortcuts:a(e).shortcuts,clearable:!1},null,8,["modelValue","shortcuts"])]),_:1}),r(l,{label:"\u5206\u6210\u65B9\u6CD5"},{default:f(()=>[r(g,{modelValue:a(e).data.adtype,"onUpdate:modelValue":n[1]||(n[1]=t=>a(e).data.adtype=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",onChange:y},{default:f(()=>[(p(!0),b(D,null,j(a(e).options.adtype,t=>(p(),w(m,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(l,{label:"\u4E1A\u52A1\u7C7B\u578B"},{default:f(()=>[r(g,{modelValue:a(e).data.channel_type,"onUpdate:modelValue":n[2]||(n[2]=t=>a(e).data.channel_type=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:y},{default:f(()=>[F(` <div class="flex jc-between p10 pt-0">
                <el-button type="primary" plain size="mini" @click="selectAllProduct()">\u5168\u9009</el-button>
                <el-button size="mini" type="danger" plain @click="unSelectedAllProduct()">\u6E05\u7A7A</el-button>
              </div> `),(p(!0),b(D,null,j(a(e).options.channel_type,(t,S)=>(p(),w(m,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(l,{label:"User Name"},{default:f(()=>[r(g,{modelValue:a(e).data.user_name,"onUpdate:modelValue":n[3]||(n[3]=t=>a(e).data.user_name=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:y},{default:f(()=>[(p(!0),b(D,null,j(a(e).options.user_name,(t,S)=>(p(),w(m,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(l,{label:"Slot"},{default:f(()=>[r(g,{modelValue:a(e).data.slot,"onUpdate:modelValue":n[4]||(n[4]=t=>a(e).data.slot=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:y},{default:f(()=>[(p(!0),b(D,null,j(a(e).options.slot,(t,S)=>(p(),w(m,{key:t,label:t.toString(),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(l,{label:"\u56FD\u5BB6"},{default:f(()=>[r(g,{modelValue:a(e).data.country,"onUpdate:modelValue":n[5]||(n[5]=t=>a(e).data.country=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:y},{default:f(()=>[(p(!0),b(D,null,j(a(e).options.country,(t,S)=>(p(),w(m,{key:t,label:t.toString(),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),v("div",null,[v("div",ne,[r(x,{type:"primary",onClick:c},{default:f(()=>[re]),_:1})])])]),_:1},8,["model"])])])}}});const I=_=>(H("data-v-422fd230"),_=_(),W(),_),ue={class:"flex flex-wrap jc-between"},ce={class:"flex jc-between"},de={key:0,class:"color_primary"},ie=I(()=>v("span",{class:"small_icon"},"$",-1)),pe={key:1,class:"color_primary"},_e=I(()=>v("span",{class:"small_icon"},"%",-1)),me=C({props:{json:{require:!0,default:{},type:Object}},setup(_){const s=_,o={profit:"\u6BDB\u5229\u5408\u8BA1",revenue:"\u6536\u5165\u5408\u8BA1",cost:"\u652F\u51FA\u5408\u8BA1",profit_rate:"\u6BDB\u5229\u7387"},e={},d=V({baseData:s.json,data:e,titleMap:o,groupVal:["profit","revenue","cost"],groupRate:["profit_rate"]}),y=async()=>{let c=A({},d.baseData.data);c=U(c);const{data:u}=await K(c);if(Array.isArray(u)&&u.length!==0)d.data=u[0];else for(const n in d.data)Object.prototype.hasOwnProperty.call(d.data,n)&&(d.data[n]=0)};return P(()=>d.baseData,(c,u)=>{console.warn("get card data"),y()},{deep:!0}),T(()=>{}),(c,u)=>{const n=h("el-card");return p(),b("div",null,[v("div",ue,[(p(!0),b(D,null,j(a(d).titleMap,(i,l)=>(p(),w(n,{class:"box-card m10"},{default:f(()=>[v("div",ce,[v("h3",null,N(a(d).titleMap[l]),1),a(d).groupVal.includes(l)?(p(),b("h2",de,[ie,$(" "+N(a(d).data[l]),1)])):F("v-if",!0),a(d).groupRate.includes(l)?(p(),b("h2",pe,[$(N(a(B)(a(d).data[l]*100))+" ",1),_e])):F("v-if",!0)])]),_:2},1024))),256))])])}}});var fe=ee(me,[["__scopeId","data-v-422fd230"]]);const be=C({props:{json:{require:!0,default:{},type:Object}},setup(_){const s=_,o=V({data:{target:"profit"},options:{target:[{value:"profit",label:"\u6BDB\u5229"},{value:"revenue",label:"\u6536\u5165"},{value:"cost",label:"\u652F\u51FA"},{value:"profit_rate",label:"\u6BDB\u5229\u7387"}]}}),e=V({data:s.json,baseCharData:{},chartData:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{show:!0,backgroundColor:"#6a7985"}}},legend:{show:!0,data:["all"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"",type:"line",stack:"Total",emphasis:{focus:"series"},data:[]}]}});P(()=>e.data,(i,l)=>{console.warn("get chart data"),n()},{deep:!0});const d=()=>{var l;let i=o.options.target.find(m=>m.value===o.data.target);return(l=i==null?void 0:i.label)!=null?l:""},y=["6"],c=()=>{u()},u=()=>{var m;let i=o.data.target;console.log(i);let l=(m=e.baseCharData[i])!=null?m:[];if(y.includes(o.data.target.toString())){let g=l.map(x=>B(x*100,2));e.chartData.series[0].data=g}else{let g=l.map(x=>B(x,2));e.chartData.series[0].data=g}},n=async()=>{var m;let i=A({},e.data.data);i=U(i),e.chartData.xAxis[0].data=[],e.chartData.series[0].data=[];const{data:l}=await J(i);console.log(l),e.baseCharData=l,e.chartData.xAxis[0].data=(m=l==null?void 0:l.date)!=null?m:[],e.chartData.series[0].name=d(),u()};return(i,l)=>{const m=h("el-option"),g=h("el-select"),x=h("el-form-item"),k=h("el-form");return p(),b("div",null,[v("div",null,[r(k,{inline:!0,model:a(o).data,class:"flex jc-between w100"},{default:f(()=>[r(x,{label:"\u6307\u6807"},{default:f(()=>[r(g,{modelValue:a(o).data.target,"onUpdate:modelValue":l[0]||(l[0]=t=>a(o).data.target=t),placeholder:"Select",onChange:c},{default:f(()=>[(p(!0),b(D,null,j(a(o).options.target,t=>(p(),w(m,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),v("div",null,[r(a(ae),{"chart-data":a(e).chartData},null,8,["chart-data"])])])}}}),he={class:"mt-20"},ye={class:"flex jc-end mb-10"},ve=C({props:{json:{require:!0,default:{},type:Object}},setup(_){let o=V({data:_.json,list:[],exportExcel:{buttonName:"\u5BFC\u51FA",tHeader:["\u65E5\u671F"],filterVal:["date"],fileName:"profit"}});P(()=>o.data,(c,u)=>{console.warn("get table data"),e()},{deep:!0});const e=async()=>{let c=A({},o.data.data);c=U(c),o.list=[];const{data:u}=await Q(c);o.list=u};let d=Y(()=>{let c=[];return o.list.map(u=>{let n={},i=A({},u);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const m=i[l];l.includes("rate")?n[l]=`${B(m*100,2)}%`:n[l]=B(m,2)}c.push(n)}),c});const y=Y(()=>{var u;let c=d.value;if(c&&Array.isArray(c)){let n=(u=c[0])!=null?u:{};return Object.keys(n)}});return(c,u)=>{const n=h("el-table-column"),i=h("el-table");return p(),b("div",he,[v("div",ye,[r(te,{"button-name":a(o).exportExcel.buttonName,list:a(d),"t-header":a(y),"filter-val":a(y),filename:a(o).exportExcel.fileName},null,8,["button-name","list","t-header","filter-val","filename"])]),F(" table "),r(i,{center:"",data:a(d),class:"w100",border:""},{default:f(()=>[r(n,{prop:"user_id",label:"User ID",align:"center"}),r(n,{prop:"account_email",label:"Account Email",align:"center"}),r(n,{prop:"user_name",label:"User Name",align:"center"}),r(n,{prop:"profit",label:"\u6BDB\u5229",align:"center"}),r(n,{prop:"revenue",label:"\u6536\u5165",align:"center"}),r(n,{prop:"cost",label:"\u652F\u51FA",align:"center"}),r(n,{prop:"profit_rate",label:"\u6BDB\u5229\u7387",align:"center"})]),_:1},8,["data"])])}}}),ge={class:"app-container"},ke=C({setup(_){let s=V({data:{adtype:"",channel_type:"",use_name:"",slot:"",country:"",st:"",et:""}});const o=e=>{console.log(e),s.data.adtype=e.adtype,s.data.channel_type=e.channel_type,s.data.use_name=e.use_name,s.data.slot=e.slot,s.data.country=e.country,s.data.st=e.date[0],s.data.et=e.date[1]};return(e,d)=>(p(),b("div",ge,[r(a(se),{onEmitParent:o}),r(a(fe),{json:a(s)},null,8,["json"]),r(a(be),{json:a(s)},null,8,["json"]),r(a(ve),{json:a(s)},null,8,["json"])]))}});export{ke as default};
