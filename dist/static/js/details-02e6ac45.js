import{d as e,r as l,L as r,q as a,o,c as t,e as i,s as u,v as n,f as d,x as s,z as m,N as c,a as p,h as f,I as _,w as v,y,O as g,A as b,R as F,g as h,E as k}from"./main-ce43ffdd.js";import{g as V,h as w,i as D,j as x,k as U,_ as C,l as E,d as j}from"./device-10aae116.js";import{_ as S}from"./lodash-6b3789ad.js";import{m as q}from"./message-1c1d9ef1.js";import{_ as A}from"./cutOff-d1f285f5.js";import{c as R,d as O}from"./format-00f0450d.js";import{h as M}from"./moment-56f006b0.js";import"./buzz-a744532d.js";const P={class:"dialog-footer mt-10"},I=e({__name:"site",props:{msg:{require:!0,default:()=>"",type:Array}},emits:["kk","up"],setup(e,{emit:p}){const f=e,_="此项必填";const v=e=>{let l=new RegExp(/\n+/),r=new RegExp(/[\S]+/),a=e.split(l),o=!0,t=[];return a.forEach(((e,l)=>{if(e&&r.test(e)){let l=e.trim().split(/\s+/);if(2===l.length){let e={diy_siteid:l[0],weight:l[1]};t.push(e)}else o=!1}else o=!1})),o?t:[]};let y=l({siteData:Array.isArray(f.msg)?f.msg:[],siteRules:{site:[{required:!0,validator:(e,l,r)=>{if(""!==l){const e=v(l);r(e?void 0:new Error("格式错误！"))}else r(new Error(_))},trigger:"blur"}]},siteRuleForm:{site:""}});const g=()=>{y.siteData=[...v(y.siteRuleForm.site)]},b=()=>{y.siteData=[]},F=()=>{p("kk",y.siteData)};return r((()=>{})),(e,l)=>{const r=a("el-input"),p=a("el-form-item"),f=a("el-button"),_=a("el-form"),v=a("el-table-column"),h=a("el-table");return o(),t(c,null,[i(_,{ref:"siteRuleForm",enctype:"multipart/form-data",rules:n(y).siteRules,model:n(y).siteRuleForm,"label-position":"right"},{default:u((()=>[i(p,{label:"diy_siteid:",prop:"site"},{default:u((()=>[i(r,{modelValue:n(y).siteRuleForm.site,"onUpdate:modelValue":l[0]||(l[0]=e=>n(y).siteRuleForm.site=e),class:"w100",type:"textarea",rows:4,placeholder:""},null,8,["modelValue"])])),_:1}),i(p,null,{default:u((()=>[i(f,{type:"primary",onClick:g},{default:u((()=>[d(" 添加 ")])),_:1})])),_:1})])),_:1},8,["rules","model"]),i(h,{data:n(y).siteData},{default:u((()=>[i(v,{align:"center",property:"diy_siteid",label:"diy_siteid"}),i(v,{align:"center",property:"weight",label:"权重"}),i(v,{align:"center",label:"操作"},{default:u((e=>[i(f,{type:"danger",onClick:l=>{return e.row,r=e.$index,void y.siteData.splice(r,1);var r}},{default:u((()=>[d(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("span",P,[m(' <el-button @click="cancleDevice">取 消</el-button> '),i(f,{type:"primary",onClick:b},{default:u((()=>[d("清 空")])),_:1}),i(f,{type:"primary",onClick:F},{default:u((()=>[d("确 定")])),_:1})])],64)}}}),z={class:"content-con flex column"},L={class:"flex jc-start form-one radio-box"},N=["textContent"],H={class:"form-one flex jc-start"},Y={class:"form-one"},T={class:"form-one fb"},$={class:"form-one flex jc-start"},J={class:"flex jc-start"},X={class:"flex jc-start form-one"},K={class:"flex jc-start form-one"},B={class:"flex jc-start form-one"},G={class:"flex form-one jc-start radio-box"},Q={class:"flex jc-start form-one jc-start radio-box"},W={class:"w100 flex"},Z={slot:"footer",class:"dialog-footer"},ee=e({__name:"details",setup(e){let{proxy:P}=h();const ee=p(),le="此项必填";let re=(e,l,r)=>{"AppsFlyer"===ne.ruleForm.attribute_provider?ne.ruleForm.tracking_link.includes(ne.ruleForm.pkg_name)?r(void 0):r(new Error("Attribute Provider:为Appsflyer时Package Name的值必须包含在Traking Link中")):r(void 0)},ae=l({offer:{},index:null,cacheDevice:{}}),oe=R(),te=O(1),ie=f(""),ue=f(""),ne=l({dialogVisibleDevice:!1,dialogVisibleSite:!1,search:{id:"",baseDeviceSelect:{},deviceData:{all:[],select:[],count:0}},type:"1",params:"",loading:!0,options:{channel:[],attribute_provider:["AppsFlyer","Branch","Adjust","Singular","AppMetrica","Lazada","Other"],time:[-1,...[...new Array(24)].map(((e,l)=>l))],platform:[{value:1,label:"Android"},{value:2,label:"iOS"}],country:[],site_id:["0.2","0.4","0.6","1","2","4","8","24","72","168"],category:[],devices:[],pid:[]},ruleForm:{type:"",id:"",offer_id:void 0,operation_type:"",channel:"",copy_offer:"",attribute_provider:"AppsFlyer",title:"",tracking_link:"",pid:"",pkg_name:"",conversion_flow:"",event_name:"",payout:void 0,platform:"",country:[],max_clk_num:void 0,site_clk_limit:void 0,site_install_limitation:void 0,start_hour:"-1",end_hour:"-1",line_arr:[oe,te],online_st:"",offline_et:"",device:[],cutoff_start:0,cutoff_end:1,diy_siteid:"",site_id:"",hour:void 0,clk_id:"",site_clk_id:"",campaign_id:"",note:"",p_type:2,hunl_type:!1},rules:{channel:[{required:!0,message:le,trigger:["blur","change"]}],attribute_provider:[{required:!0,message:le,trigger:["blur","change"]}],title:[{required:!0,message:le,trigger:["blur","change"]}],tracking_link:[{required:!0,message:le,trigger:["blur","change"]},{validator:(e,l,r)=>{new RegExp("\\s+","g").test(l)?r(new Error("链接中有空格")):r(void 0),r(void 0)}},{validator:(e,l,r)=>{/^http/.test(l)?r(void 0):r(new Error("必须为有效链接")),r(void 0)}},{validator:(e,l,r)=>{if("AppsFlyer"===ne.ruleForm.attribute_provider){["af_sub_siteid","af_installpostback"].map((e=>{l.includes(e)&&r(new Error(`链接有错误，不能包含${e}`))}))}else"Adjust"===ne.ruleForm.attribute_provider&&(l.includes("install_callback")||l.includes("event_callback")?r(new Error("链接里不可以包含install_callback和event_callback")):r(void 0));r(void 0)}},{validator:re}],pid:[{required:!0,message:le,trigger:["blur","change"]},{validator:(e,l,r)=>{""===l?r(new Error(le)):l.includes("，")?r(new Error("请使用英文逗号分割")):("1"===ie.value&&(ne.ruleForm.country.length>1&&l.includes(",")?r(new Error("由于国家选择了多个，所以pid不能填多个")):r(void 0)),"2"===ie.value&&(l.includes(",")?r(new Error("修改状态下PID不能有逗号")):r(void 0)))}}],pkg_name:[{required:!0,message:le,trigger:["blur","change"]},{validator:re}],conversion_flow:[{required:!0,message:le,trigger:["blur","change"]}],event_name:[{required:!0,message:le,trigger:["blur","change"]},{validator:(e,l,r)=>{"1"===ne.ruleForm.conversion_flow?r(void 0):r(l?void 0:new Error(le))}}],payout:[{required:!0,message:le,trigger:["blur","change"]}],platform:[{required:!0,message:le,trigger:["blur","change"]}],country:[{required:!0,message:le,trigger:["blur","change"]},{validator:(e,l,r)=>{if(""===l)r(new Error(le));else{let e=ne.ruleForm.pid,a=e?e.split(","):[];"1"===ie.value?e&&a.length>1&&l.length>1?r(new Error("由于pid有多个，所以不能选择多个国家")):r(void 0):l.length>1?r(new Error("修改状态下不能选择多个国家")):r(void 0)}}}],max_clk_num:[{required:!0,message:le,trigger:["blur","change"]}],device:[{required:!0,validator:(e,l,r)=>{r(void 0)},trigger:["blur","change"]}],site_id:[{required:!0,validator:(e,l,r)=>{l?"1"===l.toString()||ne.ruleForm.hour?r(void 0):r(new Error("请选择具体数值")):r(new Error(le))},trigger:["blur","change"]}],clk_id:[{required:!0,message:le,trigger:["blur","change"]}],start_hour:[{required:!1,validator:(e,l,r)=>{""!==l&&(""===ne.ruleForm.end_hour?r(new Error(le)):r(void 0))},trigger:["blur","change"]}],end_hour:[{required:!1,validator:(e,l,r)=>{""!==l&&(""===ne.ruleForm.start_hour?r(new Error(le)):r(void 0))},trigger:["blur","change"]}],cutoff_start:[{required:!0,trigger:["blur","change"]}],cutoff_end:[{required:!0,trigger:["blur","change"]}],p_type:[{required:!0,trigger:["blur","change"]}],line_arr:[{required:!0,validator:(e,l,r)=>{if(l&&0!==l.length&&l[0]&&l[1]){let e=M(oe).format("X"),a=M(l[0]).format("X"),o=M(l[1]).format("X");"1"===ie.value&&a<e&&r(new Error("开始时间不能早于现在")),o<a&&r(new Error("结束时间必须大于开始时间")),r(void 0)}else r(new Error("必填项"))},trigger:["blur","change"]}]},siteData:[]});const de=()=>{ne.dialogVisibleSite=!0;const e=ne.ruleForm.diy_siteid;ne.siteData=e},se=()=>{me("ruleForm")},me=e=>{P.$refs[e].validate((e=>{if(!e)return!1;ce()}))},ce=async()=>{let e;ne.ruleForm;let l={...ne.ruleForm};l.online_st=l.line_arr[0],l.offline_et=l.line_arr[1],l.clk_id=parseFloat(l.clk_id),l.conversion_flow=parseFloat(l.conversion_flow),l.cutoff_end=parseFloat(l.cutoff_end),l.cutoff_start=parseFloat(l.cutoff_start),l.end_hour=parseFloat(l.end_hour),l.start_hour=parseFloat(l.start_hour),l.hour=parseFloat(l.hour),l.max_clk_num=parseFloat(l.max_clk_num),l.payout=parseFloat(l.payout),l.platform=parseFloat(l.platform),l.site_clk_id=parseFloat(l.site_clk_id),l.site_clk_limit=parseFloat(l.site_clk_limit),l.site_id=parseFloat(l.site_id),l.site_install_limitation=parseFloat(l.site_install_limitation),l.diy_siteid=JSON.stringify(l.diy_siteid),l.device=JSON.stringify(l.device),l.country=l.country.join(","),"1"===ne.ruleForm.type&&(delete l.id,delete l.offer_id,e=await V(l)),"2"===ne.ruleForm.type&&(e=await w(l)),q(e)&&window.close()},pe=e=>{ne.ruleForm.diy_siteid=e,ne.dialogVisibleSite=!1},fe=e=>{ae.cacheDevice.select=e},_e=()=>{ne.ruleForm.device=ae.cacheDevice.select,ne.dialogVisibleDevice=!1},ve=e=>{ne.ruleForm.cutoff_start=e.cutoff_start,ne.ruleForm.cutoff_end=e.cutoff_end},ye=(e,l)=>{let r={};if(l.type,e.device&&(e.device=JSON.parse(e.device)),e.diy_siteid)try{e.diy_siteid=JSON.parse(e.diy_siteid)}catch(a){}return"2"===l.type&&(e.id=e.id,e.offer_id=e.offer_id,e.line_arr=[e.online_st,e.offline_et]),e.country=e.country?e.country.split(","):[],r={...e,...l},"1"===l.type&&(delete r.id,delete r.offer_id),r},ge=()=>{ne.ruleForm.platform&&ne.ruleForm.country?(ne.dialogVisibleDevice=!0,ae.cacheDevice.select=ne.ruleForm.device,(async()=>{const e={id:ne.ruleForm.id,platform:ne.ruleForm.platform,country:Array.isArray(ne.ruleForm.country)?ne.ruleForm.country.join(","):ne.ruleForm.country},{data:l}=await j(e);ae.cacheDevice.all=l.all})()):k.error("请提前选择平台和国家")},be=()=>{(async e=>{const l=await E({offer_id:e}),{data:r}=l,a=ye(r,{type:ne.ruleForm.type,isCopy:!0});ne.ruleForm={...ne.ruleForm,...a}})(ne.ruleForm.copy_offer)};_((()=>{let e=0;if(ae.cacheDevice,ae.cacheDevice.hasOwnProperty("all")&&ae.cacheDevice.hasOwnProperty("select")){let l=ae.cacheDevice.all,r=ae.cacheDevice.select;0!==l.length&&0!==r.length&&l.forEach((l=>{r.forEach((r=>{l.source===r.source&&l.label===r.label&&(e+=parseInt(l.device_count))}))})),ne.search.deviceData.count=e}return null!=e?e:ne.search.deviceData.count}));const Fe=()=>{P.$refs.ruleForm.validateField("pid")};v((()=>ne.ruleForm.tracking_link),((e,l)=>{(()=>{const e=ne.ruleForm.tracking_link,l=ne.ruleForm.attribute_provider;let r="";if(e.includes("pid={PID}"))return!1;if("AppsFlyer"===l){const l=/pid=([\s\S]*)_int/g,a=[...e.matchAll(l)];0!==a.length&&(r=a[0][1])}"Adjust"===l&&(r=new URL(e).pathname.split("/").findLast((e=>e)));ne.ruleForm.pid=r})()}),{deep:!0});const he=S.debounce((async()=>{if(ne.ruleForm.pkg_name){const e={pkg_name:ne.ruleForm.pkg_name},l=await U(e),{data:r}=l;ne.ruleForm.hunl_type=r}}),1e3);v((()=>ne.ruleForm.pkg_name),(async(e,l)=>{he()}));const ke=_((()=>ne.ruleForm.hunl_type?"是":"否"));return r((()=>{if((async()=>{const e=await D();if(e){const{data:l}=e;return ne.options.channel=Object.values(l.channel),ne.options.country=Object.values(l.country),ne.options.category=Object.values(l.category),"获取配置成功"}})(),ue.value=ee.currentRoute.value.name,ue.value,"buzz-async-create"===ue.value&&(ne.ruleForm.operation_type="1",ne.ruleForm.type="1",ie.value="1"),"buzz-async-edit"===ue.value){ne.ruleForm.operation_type="2",ne.ruleForm.type="2",ie.value="2";(async e=>{const l=await x(e),{data:r}=l;ne.ruleForm=ye(r,{type:ne.ruleForm.type,isCopy:!1}),ae.offer=r})(ee.currentRoute.value.params.id)}})),(e,l)=>{const r=a("el-form-item"),p=a("el-option"),f=a("el-select"),_=a("el-button"),v=a("el-input"),h=a("el-radio"),k=a("el-date-picker"),V=a("el-form"),w=a("el-dialog");return o(),t("div",null,[m(" form "),i(V,{ref:"ruleForm",enctype:"multipart/form-data",rules:n(ne).rules,model:n(ne).ruleForm,"label-width":"240px","label-position":"right"},{default:u((()=>[s("div",z,[m(" offer_id "),i(r,{label:"Offer ID:",prop:"offer_id"},{default:u((()=>[s("div",L,[s("span",{textContent:y(n(ne).ruleForm.offer_id)},null,8,N)])])),_:1}),m(" channel "),i(r,{label:"Channel:",prop:"channel"},{default:u((()=>[i(f,{modelValue:n(ne).ruleForm.channel,"onUpdate:modelValue":l[0]||(l[0]=e=>n(ne).ruleForm.channel=e),filterable:"",class:"form-one",clearable:"",placeholder:""},{default:u((()=>[(o(!0),t(c,null,g(n(ne).options.channel,(e=>(o(),b(p,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(" copy_offer "),i(r,{label:"Copy Offer:",prop:"copy_offer"},{default:u((()=>[i(v,{modelValue:n(ne).ruleForm.copy_offer,"onUpdate:modelValue":l[1]||(l[1]=e=>n(ne).ruleForm.copy_offer=e),modelModifiers:{trim:!0},class:"form-one copy-btn search-input",placeholder:""},{append:u((()=>[i(_,{slot:"append",type:"primary",icon:"Search",onClick:be})])),_:1},8,["modelValue"])])),_:1}),m(" attribute_provider "),i(r,{label:"Attribute Provider:",prop:"attribute_provider"},{default:u((()=>[i(f,{modelValue:n(ne).ruleForm.attribute_provider,"onUpdate:modelValue":l[2]||(l[2]=e=>n(ne).ruleForm.attribute_provider=e),filterable:"",class:"form-one",clearable:"",placeholder:""},{default:u((()=>[(o(!0),t(c,null,g(n(ne).options.attribute_provider,(e=>(o(),b(p,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(" title "),i(r,{label:"Offer Title:",prop:"title"},{default:u((()=>[i(v,{modelValue:n(ne).ruleForm.title,"onUpdate:modelValue":l[3]||(l[3]=e=>n(ne).ruleForm.title=e),modelModifiers:{trim:!0},class:"form-one",type:"text",placeholder:""},null,8,["modelValue"])])),_:1}),m(" tracking_link "),m(" 此处需要去除空格和制表符 "),i(r,{class:"mb-30",label:"Traking Link:",prop:"tracking_link"},{default:u((()=>[i(v,{modelValue:n(ne).ruleForm.tracking_link,"onUpdate:modelValue":l[4]||(l[4]=e=>n(ne).ruleForm.tracking_link=e),modelModifiers:{trim:!0},class:"form-one",type:"textarea",autosize:{minRows:8,maxRows:80},placeholder:""},null,8,["modelValue"])])),_:1}),m(" pid "),i(r,{label:"Pid:",prop:"pid"},{default:u((()=>[s("div",H,[m(" <span>{{ handlePid }}</span> "),m(" <span>{{data.ruleForm.pid}}</span> "),i(v,{modelValue:n(ne).ruleForm.pid,"onUpdate:modelValue":l[5]||(l[5]=e=>n(ne).ruleForm.pid=e),modelModifiers:{trim:!0},class:"form-one",type:"textarea",autosize:{minRows:1,maxRows:80},placeholder:"多个pid请使用英文逗号分割"},null,8,["modelValue"])])])),_:1}),m(" pkg_name "),i(r,{label:"Package Name:",prop:"pkg_name"},{default:u((()=>[s("div",Y,[i(v,{modelValue:n(ne).ruleForm.pkg_name,"onUpdate:modelValue":l[6]||(l[6]=e=>n(ne).ruleForm.pkg_name=e),modelModifiers:{trim:!0},type:"text",placeholder:""},null,8,["modelValue"])])])),_:1}),i(r,{label:"Hunl是否已开发完毕:",prop:"hunl_type"},{default:u((()=>[s("div",T,[s("span",{class:F({color_success:n(ne).ruleForm.hunl_type,color_warning:!n(ne).ruleForm.hunl_type})},y(n(ke)),3)])])),_:1}),m(" conversion_flow_type "),i(r,{label:"Conversion Flow:",prop:"conversion_flow"},{default:u((()=>[s("div",$,[i(h,{modelValue:n(ne).ruleForm.conversion_flow,"onUpdate:modelValue":l[7]||(l[7]=e=>n(ne).ruleForm.conversion_flow=e),label:1},{default:u((()=>[d(" CPI ")])),_:1},8,["modelValue"]),i(h,{modelValue:n(ne).ruleForm.conversion_flow,"onUpdate:modelValue":l[8]||(l[8]=e=>n(ne).ruleForm.conversion_flow=e),label:2},{default:u((()=>[d(" CPA ")])),_:1},8,["modelValue"])])])),_:1}),m(" conversion_flow "),2===n(ne).ruleForm.conversion_flow?(o(),b(r,{key:0,label:"Event Name:",prop:"event_name"},{default:u((()=>[i(v,{modelValue:n(ne).ruleForm.event_name,"onUpdate:modelValue":l[9]||(l[9]=e=>n(ne).ruleForm.event_name=e),modelModifiers:{trim:!0},class:"form-one",type:"text",placeholder:""},null,8,["modelValue"])])),_:1})):m("v-if",!0),m(" payout "),i(r,{label:"Payout($):",prop:"payout"},{default:u((()=>[i(v,{modelValue:n(ne).ruleForm.payout,"onUpdate:modelValue":l[10]||(l[10]=e=>n(ne).ruleForm.payout=e),modelModifiers:{trim:!0},class:"form-one",type:"number",placeholder:""},null,8,["modelValue"])])),_:1}),m(" platform "),i(r,{label:"Select Platform:",prop:"platform"},{default:u((()=>[i(f,{modelValue:n(ne).ruleForm.platform,"onUpdate:modelValue":l[11]||(l[11]=e=>n(ne).ruleForm.platform=e),filterable:"",class:"form-one",clearable:"",placeholder:""},{default:u((()=>[(o(!0),t(c,null,g(n(ne).options.platform,(e=>(o(),b(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(" country "),i(r,{label:"Targeting Countries:",prop:"country"},{default:u((()=>[i(f,{modelValue:n(ne).ruleForm.country,"onUpdate:modelValue":l[12]||(l[12]=e=>n(ne).ruleForm.country=e),multiple:"",filterable:"",class:"form-one",clearable:"",placeholder:"",onChange:Fe},{default:u((()=>[(o(!0),t(c,null,g(n(ne).options.country,(e=>(o(),b(p,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(" max_clk_num "),i(r,{label:"Click Limitation:",prop:"max_clk_num"},{default:u((()=>[i(v,{modelValue:n(ne).ruleForm.max_clk_num,"onUpdate:modelValue":l[13]||(l[13]=e=>n(ne).ruleForm.max_clk_num=e),modelModifiers:{trim:!0},class:"form-one",type:"number",placeholder:""},null,8,["modelValue"])])),_:1}),m(" Site Click Limitation "),i(r,{label:"Site Click Limitation:",prop:"site_clk_limit"},{default:u((()=>[i(v,{modelValue:n(ne).ruleForm.site_clk_limit,"onUpdate:modelValue":l[14]||(l[14]=e=>n(ne).ruleForm.site_clk_limit=e),modelModifiers:{trim:!0},class:"form-one",type:"number",placeholder:""},null,8,["modelValue"])])),_:1}),m(" start_hour "),i(r,{label:"Start Hour:",prop:"start_hour"},{default:u((()=>[i(f,{modelValue:n(ne).ruleForm.start_hour,"onUpdate:modelValue":l[15]||(l[15]=e=>n(ne).ruleForm.start_hour=e),filterable:"",class:"form-one",placeholder:""},{default:u((()=>[(o(!0),t(c,null,g(n(ne).options.time,(e=>(o(),b(p,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(" end_hour "),i(r,{label:"End Hour:",prop:"end_hour"},{default:u((()=>[i(f,{modelValue:n(ne).ruleForm.end_hour,"onUpdate:modelValue":l[16]||(l[16]=e=>n(ne).ruleForm.end_hour=e),filterable:"",class:"form-one",placeholder:""},{default:u((()=>[(o(!0),t(c,null,g(n(ne).options.time,(e=>(o(),b(p,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(" site_install_limitation"),m(' <el-form-item label="Site Install Limitation:" prop="site_install_limitation">\n          <el-select filterable class=\'form-one\' v-model="data.ruleForm.site_install_limitation" clearable placeholder="">\n            <el-option\n              v-for="item in 6"\n              :key="item"\n              :label="item - 1"\n              :value="item - 1">\n            </el-option>\n          </el-select>\n        </el-form-item> '),m(" Select Device "),i(r,{label:"自动上下线时间(UTC):",prop:"line_arr"},{default:u((()=>[s("div",J,[i(k,{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:n(ne).ruleForm.line_arr,"onUpdate:modelValue":l[17]||(l[17]=e=>n(ne).ruleForm.line_arr=e),type:"datetimerange","range-separator":"-","start-placeholder":"上线时间","end-placeholder":"下线时间",class:"form-one"},null,8,["modelValue"])])])),_:1}),i(r,{label:"Delivery mode:",prop:"p_type"},{default:u((()=>[s("div",X,[i(h,{modelValue:n(ne).ruleForm.p_type,"onUpdate:modelValue":l[18]||(l[18]=e=>n(ne).ruleForm.p_type=e),label:1},{default:u((()=>[d(" 算法 ")])),_:1},8,["modelValue"]),i(h,{modelValue:n(ne).ruleForm.p_type,"onUpdate:modelValue":l[19]||(l[19]=e=>n(ne).ruleForm.p_type=e),label:2},{default:u((()=>[d(" 标签 ")])),_:1},8,["modelValue"])])])),_:1}),2==n(ne).ruleForm.p_type?(o(),b(r,{key:1,label:"Select Device:",prop:"device"},{default:u((()=>[s("div",K,[i(_,{class:"cp ml-10",type:"primary",icon:"Setting",circle:"",onClick:ge}),m(" <span class=\"ml-10\" v-text='countDevice'></span> ")])])),_:1})):m("v-if",!0),m(" Device Cutoff "),1==n(ne).ruleForm.p_type?(o(),b(r,{key:2,label:"Device Cutoff:",prop:"cutoff_start"},{default:u((()=>[i(A,{class:"form-one",query:n(ne).ruleForm,onUp:ve},null,8,["query"])])),_:1})):m("v-if",!0),m(" diy_siteid "),i(r,{label:"Diy SiteID:",prop:"site"},{default:u((()=>[s("div",B,[i(_,{class:"cp ml-10",icon:"Tools",circle:"",onClick:de})])])),_:1}),m(" site_id "),i(r,{label:"Site ID:",prop:"site_id"},{default:u((()=>[s("div",G,[i(h,{modelValue:n(ne).ruleForm.site_id,"onUpdate:modelValue":l[20]||(l[20]=e=>n(ne).ruleForm.site_id=e),label:1},{default:u((()=>[d(" Slot_ID ")])),_:1},8,["modelValue"]),i(h,{modelValue:n(ne).ruleForm.site_id,"onUpdate:modelValue":l[21]||(l[21]=e=>n(ne).ruleForm.site_id=e),label:2},{default:u((()=>[d(" Update(Hours) ")])),_:1},8,["modelValue"]),i(f,{modelValue:n(ne).ruleForm.hour,"onUpdate:modelValue":l[22]||(l[22]=e=>n(ne).ruleForm.hour=e),filterable:"",class:"form-one ml-10",clearable:"",placeholder:"",disabled:2!==n(ne).ruleForm.site_id},{default:u((()=>[(o(!0),t(c,null,g(n(ne).options.site_id,(e=>(o(),b(p,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])])),_:1}),m(" clk_id "),i(r,{label:"Click ID:",prop:"clk_id"},{default:u((()=>[s("div",Q,[i(h,{modelValue:n(ne).ruleForm.clk_id,"onUpdate:modelValue":l[23]||(l[23]=e=>n(ne).ruleForm.clk_id=e),label:1},{default:u((()=>[d(" Real ")])),_:1},8,["modelValue"]),i(h,{modelValue:n(ne).ruleForm.clk_id,"onUpdate:modelValue":l[24]||(l[24]=e=>n(ne).ruleForm.clk_id=e),label:2},{default:u((()=>[d(" Virtual ")])),_:1},8,["modelValue"])])])),_:1}),m(" site_clk_id "),m(' <el-form-item label="Site Click ID:" prop="site_clk_id">\n          <div class=\'flex jc-start form-one jc-start radio-box\'>\n            <el-radio v-model="data.ruleForm.site_clk_id" :label="1">ON</el-radio>\n            <el-radio v-model="data.ruleForm.site_clk_id" :label="2">OFF</el-radio>\n          </div>\n        </el-form-item> '),m(" category "),m(' <el-form-item label="Category:" prop="category_id">\n          <el-select filterable class=\'form-one\' v-model="data.ruleForm.category_id" clearable placeholder="">\n            <el-option\n              v-for="(value, key) in handleOptionsCategory"\n              :key="key"\n              :label="value"\n              :value="key">\n            </el-option>\n          </el-select>\n        </el-form-item> '),m(" note "),i(r,{label:"Note:",prop:"note"},{default:u((()=>[i(v,{modelValue:n(ne).ruleForm.note,"onUpdate:modelValue":l[25]||(l[25]=e=>n(ne).ruleForm.note=e),modelModifiers:{trim:!0},class:"form-one",type:"textarea",autosize:{minRows:8,maxRows:80},placeholder:""},null,8,["modelValue"])])),_:1})])])),_:1},8,["rules","model"]),m(" form "),m(" footer "),s("div",W,[i(_,{type:"primary",onClick:se},{default:u((()=>[d(" Save ")])),_:1})]),m(" footer "),m(" dialog "),m(" device "),i(w,{modelValue:n(ne).dialogVisibleDevice,"onUpdate:modelValue":l[28]||(l[28]=e=>n(ne).dialogVisibleDevice=e),title:"Device",width:"90%"},{default:u((()=>[n(ne).dialogVisibleDevice?(o(),b(C,{key:0,all:n(ae).cacheDevice.all,"onUpdate:all":l[26]||(l[26]=e=>n(ae).cacheDevice.all=e),select:n(ae).cacheDevice.select,"onUpdate:select":l[27]||(l[27]=e=>n(ae).cacheDevice.select=e),onKk:fe},null,8,["all","select"])):m("v-if",!0),s("span",Z,[m(' <el-button @click="cancleDevice">取 消</el-button> '),i(_,{type:"primary",onClick:_e},{default:u((()=>[d("确 定")])),_:1})])])),_:1},8,["modelValue"]),m(" site "),i(w,{modelValue:n(ne).dialogVisibleSite,"onUpdate:modelValue":l[29]||(l[29]=e=>n(ne).dialogVisibleSite=e),title:"diy_siteid",width:"90%"},{default:u((()=>[i(n(I),{msg:n(ne).siteData,onKk:pe},null,8,["msg"])])),_:1},8,["modelValue"])])}}});export{ee as default};
