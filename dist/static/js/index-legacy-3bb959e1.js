!function(){function e(e,t,a,n,r,i,o){try{var l=e[i](o),u=l.value}catch(s){return void a(s)}l.done?t(u):Promise.resolve(u).then(n,r)}function t(t){return function(){var a=this,n=arguments;return new Promise((function(r,i){var o=t.apply(a,n);function l(t){e(o,r,i,l,u,"next",t)}function u(t){e(o,r,i,l,u,"throw",t)}l(void 0)}))}}function a(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}System.register(["./vendor-legacy-2c896af1.js","./product-legacy-56576ed2.js","./index-legacy-eda81053.js","./message-legacy-6318d865.js","./self-legacy-7549fc31.js","./lodash-legacy-59de762d.js","./index-legacy-eb9f24f2.js"],(function(e){"use strict";var a,r,i,o,l,u,s,c,d,p,f,m,g,b,h,v,y,D,w,j,_,k,x,C,P,V,T,O,F;return{setters:[function(e){a=e.af,r=e.r,i=e.o,o=e.i,l=e.g,u=e.v,s=e.f,c=e.F,d=e.j,p=e.s,f=e.c,m=e.x,g=e.t,b=e.P,h=e.Q},function(e){v=e.w,y=e.a,D=e.g,w=e.b,j=e.s,_=e.c,k=e.d,x=e.e,C=e.f},function(e){P=e.P},function(e){V=e.m},function(e){T=e.m},function(e){O=e._},function(e){F=e._}],execute:function(){var R={id:"",name:"",product:[]},S={mixins:[T],components:{Pagination:P},directives:{waves:v},data:function(){return{date:"",passwordType:"password",dialogVisible:!1,dialogType:"new",busData:{setting:{filterMethod:function(e,t){return t.label.indexOf(e)>-1}},options:{product:[]},data:{id:"",name:"",product:[]},rules:{}},control:{search:""},list:[],pagination:{pageSizes:["10","20","40"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}}}},computed:n({},a(["element"])),created:function(){this.getConfig(),this.init()},methods:{init:function(){this.getList()},getConfig:function(){var e=this;return t(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={name:"",page:1,limit:999,project_id:"",order:"desc"},t.next=3,y(a);case 3:n=t.sent,r=n.data,e.busData.options.product=r;case 6:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return t(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:a=t.sent,n=a.data,e.list=n;case 6:case"end":return t.stop()}}),t)})))()},handleSearch:function(){},handleCreate:function(){this.dialogType="new",this.dialogVisible=!0;var e=new Date;this.date=e.getTime()},handleEdit:function(e){var a=this;return t(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.dialogType="edit",a.busData.data.id=e.row.id,t.next=4,w(a.busData.data.id);case 4:n=t.sent,r=n.data,a.busData.data.id=r.project.id,a.busData.data.name=r.project.name,a.busData.data.product=r.product_id,a.dialogVisible=!0,i=new Date,a.date=i.getTime();case 12:case"end":return t.stop()}}),t)})))()},handleDelete:function(e){},roleChangeChoice:function(e,t){this.busData.choiceData[e]=t},clearBusData:function(){this.busData.data=O.cloneDeep(R)},submitFn:function(){var e=this;return t(regeneratorRuntime.mark((function t(){var a,n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("new"!==e.dialogType){t.next=7;break}return a={name:e.busData.data.name,product_id:e.busData.data.product},t.next=4,j(a);case 4:(n=t.sent)&&V(n),e.getList();case 7:if("edit"!==e.dialogType){t.next=13;break}return r={id:e.busData.data.id,name:e.busData.data.name,product_id:e.busData.data.product},t.next=11,_(e.busData.data.id,r);case 11:(i=t.sent)&&V(i);case 13:e.clearBusData(),e.dialogVisible=!1;case 15:case"end":return t.stop()}}),t)})))()}}},E={class:"app-container"},A={style:{"text-align":"right"}},U=m("取消"),I=m("确定"),L={class:"w100 control-box flex jc-end"},Q={class:"flex flex-end"},z=m("搜索"),N=m(" 创建项目组 "),q={class:"flex"},M=m(" 编辑 "),B=m(" 删除 "),J={class:"w100 flex"};var $=F(S,[["render",function(e,t,a,n,v,y){var D=r("el-input"),w=r("el-form-item"),j=r("el-option"),_=r("el-select"),k=r("el-form"),x=r("el-button"),C=r("el-dialog"),P=r("el-table-column"),V=r("el-table"),T=r("pagination");return i(),o("div",E,[l(" dialog "),u(C,{modelValue:v.dialogVisible,"onUpdate:modelValue":t[3]||(t[3]=function(e){return v.dialogVisible=e}),title:"edit"===v.dialogType?"修改项目组":"创建项目组",width:"80%"},{default:s((function(){return[u(k,{ref:"ruleForm",model:v.busData.data,rules:v.busData.rules,"label-width":"150px","label-position":"left"},{default:s((function(){return[u(w,{label:"项目名称",prop:"name"},{default:s((function(){return[u(D,{modelValue:v.busData.data.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return v.busData.data.name=e}),placeholder:"",disabled:"edit"===v.dialogType},null,8,["modelValue","disabled"])]})),_:1}),u(w,{label:"产品",prop:"project"},{default:s((function(){return[u(_,{modelValue:v.busData.data.product,"onUpdate:modelValue":t[1]||(t[1]=function(e){return v.busData.data.product=e}),filterable:"",multiple:"",class:"w100",placeholder:"产品"},{default:s((function(){return[(i(!0),o(c,null,d(v.busData.options.product,(function(e){return i(),f(j,{key:e.id,label:e.name,value:e.id,disabled:"2"===e.status},null,8,["label","value","disabled"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"]),p("div",A,[u(x,{type:"danger",onClick:t[2]||(t[2]=function(e){return v.dialogVisible=!1})},{default:s((function(){return[U]})),_:1}),u(x,{type:"primary",onClick:y.submitFn},{default:s((function(){return[I]})),_:1},8,["onClick"])])]})),_:1},8,["modelValue","title"]),l(" dialog "),p("div",L,[p("div",Q,[l(' <el-input placeholder="请输入内容" v-model="control.search" class="input-with-select">\n          <el-button type="primary" slot="append">搜索</el-button>\n        </el-input> '),u(D,{modelValue:v.control.search,"onUpdate:modelValue":t[4]||(t[4]=function(e){return v.control.search=e}),class:"mr-10",placeholder:"请输入内容"},null,8,["modelValue"]),u(x,{type:"primary",onClick:y.handleSearch},{default:s((function(){return[z]})),_:1},8,["onClick"]),e.judgePermissionElementFn("A-AP-PROJECT-ADD-V")?(i(),f(x,{key:0,type:"primary",onClick:y.handleCreate},{default:s((function(){return[N]})),_:1},8,["onClick"])):l("v-if",!0)])]),u(V,{data:v.list,style:{width:"100%","margin-top":"30px"},border:""},{default:s((function(){return[u(P,{align:"center",label:"项目组ID"},{default:s((function(e){return[m(g(e.row.id),1)]})),_:1}),u(P,{align:"center",label:"项目名称"},{default:s((function(e){return[m(g(e.row.name),1)]})),_:1}),u(P,{align:"center",label:"产品数"},{default:s((function(e){return[m(g(e.row.product_count),1)]})),_:1}),u(P,{align:"center",label:"创建时间"},{default:s((function(e){return[m(g(e.row.create_time),1)]})),_:1}),u(P,{align:"center",label:"更新时间"},{default:s((function(e){return[m(g(e.row.id),1)]})),_:1}),u(P,{align:"center",label:"操作"},{default:s((function(t){return[p("div",q,[e.judgePermissionElementFn("A-AP-PROJECT-EDIT-V")?(i(),f(x,{key:0,type:"primary",size:"small",onClick:function(e){return y.handleEdit(t)}},{default:s((function(){return[M]})),_:2},1032,["onClick"])):l("v-if",!0),e.judgePermissionElementFn("A-AP-PROJECT-DEL-V")?(i(),f(x,{key:1,type:"danger",size:"small",onClick:function(e){return y.handleDelete(t)}},{default:s((function(){return[B]})),_:2},1032,["onClick"])):l("v-if",!0)])]})),_:1})]})),_:1},8,["data"]),l(" pagination "),p("div",J,[b(u(T,{total:v.pagination.total,"page-sizes":v.pagination.pageSizes,page:v.pagination.listQuery.page,"onUpdate:page":t[5]||(t[5]=function(e){return v.pagination.listQuery.page=e}),limit:v.pagination.listQuery.limit,"onUpdate:limit":t[6]||(t[6]=function(e){return v.pagination.listQuery.limit=e}),onPagination:y.init},null,8,["total","page-sizes","page","limit","onPagination"]),[[h,v.pagination.total]])])])}]]),K={id:"",name:"",project:"",appid:"",projectId:"",appkey:"",status:"1"},Y={mixins:[T],components:{Pagination:P},directives:{waves:v},data:function(){return{date:"",statusMessage:"产品状态关闭后,产品数据将不在报表中显示",tableOrder:"desc",passwordType:"password",dialogVisible:!1,dialogType:"new",productStatus:"",busData:{setting:{filterMethod:function(e,t){return t.label.indexOf(e)>-1}},options:{project:[],status:[{id:"1",name:"启动"},{id:"2",name:"禁止"}]},data:{id:"",name:"",project:"",appid:"",projectId:"",appkey:"",status:"1"},projectName:"",rules:{name:[{required:!0,message:"必填",trigger:["change","blur"]},{min:1,max:50,message:"字符长度为1-50",trigger:["change","blur"]}],project:[{required:!0,message:"必填",trigger:["change","blur"]}],status:[{required:!0,message:"必填",trigger:["change","blur"]}],appid:[{required:!1,message:"必填",trigger:["change","blur"]}],projectId:[{required:!1,message:"必填",trigger:["change","blur"]}],appkey:[{required:!1,message:"非必填",trigger:["change","blur"]}]}},control:{search:""},filters:{projectFilter:[],currentProjectFilter:""},list:[],pagination:{pageSizes:["10"],total:1,listQuery:{page:1,limit:10,importance:void 0,title:void 0,type:void 0,sort:"+id"}}}},created:function(){this.getConfig(),this.init()},methods:{init:function(){this.getList()},getConfig:function(){var e=this;return t(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:a=t.sent,n=a.data,e.busData.options.project=n,null==n||n.map((function(t){e.filters.projectFilter.push({text:t.name,value:t.id})}));case 6:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return t(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={name:e.control.search,page:e.pagination.listQuery.page,limit:e.pagination.listQuery.limit,project_id:e.filters.currentProjectFilter,order:e.tableOrder},t.next=3,y(a);case 3:return t.sent,t.next=6,y(a);case 6:n=t.sent,r=n.data,e.list=r;case 10:case"end":return t.stop()}}),t)})))()},handleSearch:function(){this.getList()},handleCreate:function(){this.dialogType="new",this.clearBusData(),this.dialogVisible=!0;var e=new Date;this.date=e.getTime()},handleEdit:function(e){var a=this;return t(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.dialogType="edit",a.busData.data.id=e.row.id,a.busData.data.name=e.row.name,a.busData.data.appid=e.row.app_id,a.busData.data.project=e.row.project_id,a.busData.data.projectId=e.row.ss_project_id,a.busData.data.appkey=e.row.ry_appkey,a.dialogVisible=!0,n=new Date,a.date=n.getTime();case 10:case"end":return t.stop()}}),t)})))()},handleDelete:function(e){},roleChangeChoice:function(e,t){this.busData.choiceData[e]=t},clearBusData:function(){this.busData.data=O.cloneDeep(K)},changeStatus:function(e,a){return t(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:a.id,status:a.status},e.next=3,k(a.id,t);case 3:n=e.sent,V(n);case 5:case"end":return e.stop()}}),e)})))()},submitFn:function(){var e=this;return t(regeneratorRuntime.mark((function t(){var a,n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("new"!==e.dialogType){t.next=7;break}return a={name:e.busData.data.name,project_id:e.busData.data.project,app_id:e.busData.data.appid,ss_project_id:e.busData.data.projectId,ry_appkey:e.busData.data.appkey,status:Number(e.busData.data.status)},t.next=4,x(a);case 4:(n=t.sent)&&V(n),e.getList();case 7:if("edit"!==e.dialogType){t.next=14;break}return r={id:e.busData.data.id,name:e.busData.data.name,project_id:e.busData.data.project,app_id:e.busData.data.appid,ss_project_id:e.busData.data.projectId,ry_appkey:e.busData.data.appkey,status:Number(e.busData.data.status)},t.next=11,C(e.busData.data.id,r);case 11:(i=t.sent)&&V(i),e.getList();case 14:e.clearBusData(),e.dialogVisible=!1,e.$refs.ruleForm.resetFields();case 17:case"end":return t.stop()}}),t)})))()},showCurrentProject:function(e){var t,a;return null===(a=(null===(t=this.busData.options.project)||void 0===t?void 0:t.filter((function(t){return t.id===e})))[0])||void 0===a?void 0:a.name},cancelFn:function(){this.dialogVisible=!1,this.$refs.ruleForm.resetFields()},filterChange:function(e){var t=Object.values(e)[0];this.filters.currentProjectFilter=t.length===this.filters.projectFilter.length?"":t,this.getList()},switchStatus:function(e,t){this.statusMessage=1===e?"产品状态开启后，产品数据开始在平台上展示":"产品状态关闭后,产品数据将不在报表中显示"},cancelStatus:function(e){this.getList()},confirmStatus:function(e){var a=this;return t(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e.id,{id:e.id,status:e.status});case 2:a.getList();case 3:case"end":return t.stop()}}),t)})))()},sortChange:function(e,t,a){"ascending"===e.order?this.tableOrder="asc":"descending"===e.order&&(this.tableOrder="desc"),this.getList()}}},G={class:"app-container"},H={style:{"text-align":"right"}},W=m("取消"),X=m("确认"),Z={class:"w100 control-box flex jc-end"},ee={class:"flex flex-end"},te=m("搜索"),ae=m(" 创建产品 "),ne={class:"w100 flex"};var re={components:{Project:$,Product:F(Y,[["render",function(e,t,a,n,v,y){var D=r("el-input"),w=r("el-form-item"),j=r("el-option"),_=r("el-select"),k=r("el-form"),x=r("el-button"),C=r("el-dialog"),P=r("el-table-column"),V=r("el-switch"),T=r("el-table"),O=r("pagination");return i(),o("div",G,[l(" dialog "),u(C,{modelValue:v.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=function(e){return v.dialogVisible=e}),title:"edit"===v.dialogType?"编辑产品":"创建产品",width:"80%"},{default:s((function(){return[u(k,{ref:"ruleForm",model:v.busData.data,rules:v.busData.rules,"label-width":"150px","label-position":"left"},{default:s((function(){return[u(w,{label:"产品名称",prop:"name"},{default:s((function(){return[u(D,{modelValue:v.busData.data.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return v.busData.data.name=e}),placeholder:"请输入产品名称",disabled:"edit"===v.dialogType},null,8,["modelValue","disabled"])]})),_:1}),u(w,{label:"项目组",prop:"project"},{default:s((function(){return[u(_,{modelValue:v.busData.data.project,"onUpdate:modelValue":t[1]||(t[1]=function(e){return v.busData.data.project=e}),class:"w100",placeholder:"请选择所属项目组"},{default:s((function(){return[(i(!0),o(c,null,d(v.busData.options.project,(function(e){return i(),f(j,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),l(' <el-form-item label="APP_ID" prop="appid">\n          <el-input v-model="busData.data.appid" placeholder="请输入app_id" />\n        </el-form-item>\n        <el-form-item label="数数项目ID" prop="projectId">\n          <el-input v-model="busData.data.projectId" placeholder="请输入数数项目ID" :disabled="dialogType===\'edit\'" />\n        </el-form-item>\n        <el-form-item label="热云APPKEY" prop="appkey">\n          <el-input v-model="busData.data.appkey" placeholder="请输入热云APPKEY" :disabled="dialogType===\'edit\'" />\n        </el-form-item>\n        <el-form-item label="状态" prop="status">\n          <el-select v-model="busData.data.status" class="w100">\n            <el-option\n              v-for="item in busData.options.status"\n              :key="item.id"\n              :label="item.name"\n              :value="item.id"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label="产品配置" prop="conf">\n          <el-transfer\n            filterable\n            :filter-method="busData.setting.filterMethod"\n            filter-placeholder="请输入搜索"\n            v-model="busData.data.conf"\n            :data="busData.data.data"\n            :titles="[\'Source\', \'Target\']"\n          >\n          </el-transfer>\n        </el-form-item> ')]})),_:1},8,["model","rules"]),p("div",H,[u(x,{type:"danger",onClick:y.cancelFn},{default:s((function(){return[W]})),_:1},8,["onClick"]),u(x,{type:"primary",onClick:y.submitFn},{default:s((function(){return[X]})),_:1},8,["onClick"])])]})),_:1},8,["modelValue","title"]),l(" dialog "),p("div",Z,[p("div",ee,[l(' <el-input placeholder="请输入内容" v-model="control.search" class="input-with-select">\n          <el-button type="primary" slot="append">搜索</el-button>\n        </el-input> '),u(D,{modelValue:v.control.search,"onUpdate:modelValue":t[3]||(t[3]=function(e){return v.control.search=e}),class:"sw-200 mr-10",placeholder:"请输入产品名称或APPID"},null,8,["modelValue"]),u(x,{type:"primary",onClick:y.handleSearch},{default:s((function(){return[te]})),_:1},8,["onClick"]),e.judgePermissionElementFn("A-AP-PRODUCT-ADD-V")?(i(),f(x,{key:0,type:"primary",onClick:y.handleCreate},{default:s((function(){return[ae]})),_:1},8,["onClick"])):l("v-if",!0)])]),u(T,{data:v.list,style:{width:"100%","margin-top":"30px"},border:"",onFilterChange:y.filterChange,onSortChange:y.sortChange},{default:s((function(){return[u(P,{align:"center",label:"ID",prop:"id",sortable:"custom"}),u(P,{align:"center",label:"项目组",filters:v.filters.projectFilter},{default:s((function(e){return[m(g(y.showCurrentProject(e.row.project_id)),1)]})),_:1},8,["filters"]),u(P,{align:"center",label:"产品名称"},{default:s((function(e){return[m(g(e.row.name),1)]})),_:1}),u(P,{align:"center",label:"创建时间"},{default:s((function(e){return[m(g(e.row.create_time),1)]})),_:1}),u(P,{align:"center",label:"更新时间"},{default:s((function(e){return[m(g(e.row.update_time),1)]})),_:1}),u(P,{align:"center",label:"产品状态"},{default:s((function(e){return[l(' <el-popconfirm\n            :title="statusMessage"\n            @onConfirm="confirmStatus(scope.row)"\n            @onCancel="cancelStatus(scope.row)"\n          > '),u(V,{slot:"reference",modelValue:e.row.status,"onUpdate:modelValue":function(t){return e.row.status=t},"active-value":1,"inactive-value":2,onChange:function(t){return y.changeStatus(t,e.row)}},null,8,["modelValue","onUpdate:modelValue","onChange"]),l(" </el-popconfirm> "),l(' <el-popover\n            v-model="productPopVisible"\n            placement="top"\n            width="200"\n          >\n            <p>确定删除吗？</p>\n            <div style="text-align: right; margin: 0">\n              <el-button type="text" @click="cancelStatus(scope.row)">取消</el-button>\n              <el-button type="text" @click="confirmStatus(scope.row)">确定</el-button>\n            </div>\n            <el-switch\n              slot="reference"\n              v-model="scope.row.status"\n              active-value="1"\n              inactive-value="2"\n              @change="switchStatus($event, scope.row)"\n            />\n          </el-popover> ')]})),_:1}),l(' <el-table-column v-if="judgePermissionElementFn(\'A-AP-PRODUCT-EDIT-V\')" align="center" label="操作">\n        <template #default="scope">\n          <div class="flex">\n            <el-button type="primary" size="small" @click="handleEdit(scope)">编辑</el-button>\n            <el-button v-if="judgePermissionElementFn(\'A-AP-PRODUCT-DEL-V\')" type="danger" size="small" @click="handleDelete(scope)">删除</el-button>\n          </div>\n        </template>\n      </el-table-column> ')]})),_:1},8,["data","onFilterChange","onSortChange"]),l(" pagination "),p("div",ne,[b(u(O,{total:v.pagination.total,"page-sizes":v.pagination.pageSizes,page:v.pagination.listQuery.page,"onUpdate:page":t[4]||(t[4]=function(e){return v.pagination.listQuery.page=e}),limit:v.pagination.listQuery.limit,"onUpdate:limit":t[5]||(t[5]=function(e){return v.pagination.listQuery.limit=e}),onPagination:y.init},null,8,["total","page-sizes","page","limit","onPagination"]),[[h,v.pagination.total]])])])}]])},data:function(){return{activeName:"product"}},computed:n({},a(["element"])),methods:{handleClick:function(e,t){this.activeName=e.props.name}}},ie={class:"app-container"};e("default",F(re,[["render",function(e,t,a,n,c,d){var p=r("product"),m=r("el-tab-pane"),g=r("project"),b=r("el-tabs");return i(),o("div",ie,[u(b,{modelValue:c.activeName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.activeName=e}),type:"card",onTabClick:d.handleClick},{default:s((function(){return[u(m,{name:"product",label:"产品信息"},{default:s((function(){return["product"===c.activeName?(i(),f(p,{key:0})):l("v-if",!0)]})),_:1}),u(m,{name:"project",label:"项目组"},{default:s((function(){return["project"===c.activeName?(i(),f(g,{key:0})):l("v-if",!0)]})),_:1})]})),_:1},8,["modelValue","onTabClick"])])}]]))}}}))}();
