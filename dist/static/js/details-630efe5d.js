import{_ as e,d as a,h as l,r,L as o,q as s,c as t,z as u,e as d,s as m,v as n,x as i,P as f,o as c,f as p,g as v}from"./main-ce43ffdd.js";import{f as y}from"./dsp-media-892024fd.js";import{m as b}from"./message-1c1d9ef1.js";import{u as _}from"./useUtils-d1805f03.js";import{d as g,e as x,i as F}from"./new-format-368dcfb0.js";import{_ as j}from"./lodash-6b3789ad.js";const w={class:"content-con from-one flex column"},h={class:"w100 flex"};var C=e(a({__name:"details",setup(e){const{getRouterData:a,getCommonCountryList:C,goNewUrl:U}=_();let{proxy:V}=v(),k=l("create");const q={id:void 0,bundle:""},D=r({ruleForm:q,rules:{}}),L=()=>{V.$refs.ruleForm.validate((e=>{if(!e)return!1;M()}))},z=["id","adv_type","type","build_status","num_people"],I=["country"],M=async()=>{let e=f(D.ruleForm);if(e=g(e),e=x(e,z),e=F(e,I),k.value,"create"===k.value){delete e.id;const a=await y(e);b(a)&&N()}},N=()=>{U({url:"/audienceManage/list"})};return o((()=>{(()=>{var e,l;let{query:r,params:o}=a();k.value=null!=(l=null==(e=r.type)?void 0:e.toString())?l:"",k.value,(async()=>{})(),"create"===k.value&&(D.ruleForm=j.cloneDeep(q)),"edit"===k.value&&(async(e,a)=>{})()})()})),(e,a)=>{const l=s("el-input"),r=s("el-form-item"),o=s("el-form"),f=s("el-button");return c(),t("div",null,[u(" form "),d(o,{ref:"ruleForm",enctype:"multipart/form-data",rules:n(D).rules,model:n(D).ruleForm,"label-width":"150px","label-position":"right",class:"flex column"},{default:m((()=>[i("div",w,[u(" 媒体bundle "),d(r,{class:"self-el-form-item",label:"媒体bundle:",prop:"descs"},{default:m((()=>[d(l,{modelValue:n(D).ruleForm.bundle,"onUpdate:modelValue":a[0]||(a[0]=e=>n(D).ruleForm.bundle=e),class:"form-one",placeholder:"",rows:8,type:"textarea"},null,8,["modelValue"])])),_:1})])])),_:1},8,["rules","model"]),u(" form "),u(" footer "),i("div",h,[d(f,{type:"primary",onClick:L},{default:m((()=>[p(" 确认 ")])),_:1}),d(f,{type:"primary",onClick:N},{default:m((()=>[p(" 取消 ")])),_:1})])])}}}),[["__scopeId","data-v-ed43d966"]]);export{C as default};
