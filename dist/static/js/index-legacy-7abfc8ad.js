!function(){function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t,a,n,r,l,u){try{var o=e[l](u),c=o.value}catch(i){return void a(i)}o.done?t(c):Promise.resolve(c).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,l){var u=e.apply(t,a);function o(e){n(u,r,l,o,c,"next",e)}function c(e){n(u,r,l,o,c,"throw",e)}o(void 0)}))}}var l=document.createElement("style");l.innerHTML=".box-card[data-v-422fd230]{width:240px;height:60px}.box-card .valueBox[data-v-422fd230]{overflow:hidden}.box-card .valueBox .value-box[data-v-422fd230]{margin:8px 0;display:flex;justify-content:space-between}.box-card .valueBox .value-box .value-right[data-v-422fd230]{width:120px;display:flex;justify-content:space-between;align-items:flex-end}.box-card .valueBox .value-box .value-right .value-val[data-v-422fd230]{width:100%;margin-left:10px;text-align:right;overflow:hidden}.small_icon[data-v-422fd230]{font-size:12px}\n",document.head.appendChild(l),System.register(["./index-legacy-3182ba3f.js","./overview-legacy-fad8da3e.js","./format-legacy-b6794641.js","./lodash-legacy-44d52ec2.js","./new-format-legacy-0a897204.js","./index-legacy-2bfc4123.js","./index-legacy-d02944fd.js","./moment-legacy-2456bd0f.js"],(function(e){"use strict";var a,n,l,u,o,c,i,s,d,f,p,v,b,m,y,h,g,x,_,j,w,D,O,V,P,k,S,C,A,R,U,M,E,Y;return{setters:[function(e){a=e.d,n=e.r,l=e.M,u=e.N,o=e.m,c=e.s,i=e.n,s=e.v,d=e.c,f=e.p,p=e.q,v=e.O,b=e.P,m=e.A,y=e.z,h=e.b,g=e.Q,x=e._,_=e.w,j=e.x,w=e.D,D=e.F,O=e.I},function(e){V=e.f,P=e.h,k=e.i,S=e.j},function(e){C=e.g,A=e.a,R=e.t},function(e){U=e._},function(e){M=e.h},function(e){E=e._},function(e){Y=e.W},function(){}],execute:function(){var N={class:"white-bg control-box flex jc-between ai-start p0-0"},q={class:"flex jc-start flex-wrap ai-start"},z={class:"flex"},B=h(" 查询 "),I=a({emits:["emitParent"],setup:function(e,t){var a=t.emit,h={adtype:"",channel_type:"",user_name:"",slot:"",country:"",date:C(6,"day")},x=n({shortcuts:[{text:"今天",value:C(0,"day")},{text:"昨天",value:function(){return A(1,1,"day")}},{text:"最近7天",value:function(){return C(6,"day")}},{text:"最近30天",value:function(){return C(29,"day")}}],options:{adtype:["ssp","fenix"],channel_type:[{value:1,label:"代理"},{value:2,label:"API"},{value:3,label:"直客"}],country:[{value:"",label:""}],user_name:[{label:"",value:""}],slot:[{value:"",label:""}]},data:h}),_=function(){var e=r(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:t=e.sent,a=t.data,x.options.user_name=null==a?void 0:a.user_name,x.options.slot=null==a?void 0:a.slot,x.options.country=null==a?void 0:a.country;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){},w=function(){console.warn("set search data"),a("emitParent",U.cloneDeep(g(x.data)))};return l((function(){_(),w()})),u((function(){_(),w()})),function(e,t){var a=o("el-date-picker"),n=o("el-form-item"),r=o("el-option"),l=o("el-select"),u=o("el-button"),h=o("el-form");return c(),i("div",null,[s("div",N,[d(h,{inline:!0,model:p(x).data,class:"flex jc-between ai-start w100"},{default:f((function(){return[s("div",q,[d(n,{label:"日期选择"},{default:f((function(){return[d(a,{modelValue:p(x).data.date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return p(x).data.date=e}),class:"search-con",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",shortcuts:p(x).shortcuts,clearable:!1},null,8,["modelValue","shortcuts"])]})),_:1}),d(n,{label:"分成方法"},{default:f((function(){return[d(l,{modelValue:p(x).data.adtype,"onUpdate:modelValue":t[1]||(t[1]=function(e){return p(x).data.adtype=e}),class:"search-con",clearable:"",placeholder:"搜索",onChange:j},{default:f((function(){return[(c(!0),i(v,null,b(p(x).options.adtype,(function(e){return c(),m(r,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),d(n,{label:"业务类型"},{default:f((function(){return[d(l,{modelValue:p(x).data.channel_type,"onUpdate:modelValue":t[2]||(t[2]=function(e){return p(x).data.channel_type=e}),class:"search-con",clearable:"",placeholder:"搜索",filterable:"",onChange:j},{default:f((function(){return[y(' <div class="flex jc-between p10 pt-0">\n                <el-button type="primary" plain size="mini" @click="selectAllProduct()">全选</el-button>\n                <el-button size="mini" type="danger" plain @click="unSelectedAllProduct()">清空</el-button>\n              </div> '),(c(!0),i(v,null,b(p(x).options.channel_type,(function(e,t){return c(),m(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),d(n,{label:"User Name"},{default:f((function(){return[d(l,{modelValue:p(x).data.user_name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return p(x).data.user_name=e}),class:"search-con",clearable:"",placeholder:"搜索",filterable:"",onChange:j},{default:f((function(){return[(c(!0),i(v,null,b(p(x).options.user_name,(function(e,t){return c(),m(r,{key:e.toString(),label:e.toString(),value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),d(n,{label:"Slot"},{default:f((function(){return[d(l,{modelValue:p(x).data.slot,"onUpdate:modelValue":t[4]||(t[4]=function(e){return p(x).data.slot=e}),class:"search-con",clearable:"",placeholder:"搜索","collapse-tags":"",filterable:"",onChange:j},{default:f((function(){return[(c(!0),i(v,null,b(p(x).options.slot,(function(e,t){return c(),m(r,{key:e.toString(),label:e.toString(),value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),d(n,{label:"国家"},{default:f((function(){return[d(l,{modelValue:p(x).data.country,"onUpdate:modelValue":t[5]||(t[5]=function(e){return p(x).data.country=e}),class:"search-con",clearable:"",placeholder:"搜索","collapse-tags":"",filterable:"",onChange:j},{default:f((function(){return[(c(!0),i(v,null,b(p(x).options.country,(function(e,t){return c(),m(r,{key:e.toString(),label:e.toString(),value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]),s("div",null,[s("div",z,[d(u,{type:"primary",onClick:w},{default:f((function(){return[B]})),_:1})])])]})),_:1},8,["model"])])])}}}),H=function(e){return w("data-v-422fd230"),e=e(),D(),e},L={class:"flex flex-wrap jc-between"},T={class:"flex jc-between"},F={key:0,class:"color_primary"},G=H((function(){return s("span",{class:"small_icon"},"$",-1)})),Q={key:1,class:"color_primary"},W=H((function(){return s("span",{class:"small_icon"},"%",-1)})),$=a({props:{json:{require:!0,default:{},type:Object}},setup:function(e){var a=n({baseData:e.json,data:{},titleMap:{profit:"毛利合计",revenue:"收入合计",cost:"支出合计",profit_rate:"毛利率"},groupVal:["profit","revenue","cost"],groupRate:["profit_rate"]}),u=function(){var e=r(regeneratorRuntime.mark((function e(){var n,r,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t({},a.baseData.data),n=M(n),e.next=4,P(n);case 4:if(r=e.sent,l=r.data,Array.isArray(l)&&0!==l.length)a.data=l[0];else for(u in a.data)Object.prototype.hasOwnProperty.call(a.data,u)&&(a.data[u]=0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return _((function(){return a.baseData}),(function(e,t){console.warn("get card data"),u()}),{deep:!0}),l((function(){})),function(e,t){var n=o("el-card");return c(),i("div",null,[s("div",L,[(c(!0),i(v,null,b(p(a).titleMap,(function(e,t){return c(),m(n,{class:"box-card m10"},{default:f((function(){return[s("div",T,[s("h3",null,j(p(a).titleMap[t]),1),p(a).groupVal.includes(t)?(c(),i("h2",F,[G,h(" "+j(p(a).data[t]),1)])):y("v-if",!0),p(a).groupRate.includes(t)?(c(),i("h2",Q,[h(j(p(R)(100*p(a).data[t]))+" ",1),W])):y("v-if",!0)])]})),_:2},1024)})),256))])])}}}),J=x($,[["__scopeId","data-v-422fd230"]]),K=a({props:{json:{require:!0,default:{},type:Object}},setup:function(e){var a=e,l=n({data:{target:"cost"},options:{target:[{value:"profit",label:"毛利"},{value:"revenue",label:"收入"},{value:"cost",label:"支出"},{value:"profit_rate",label:"毛利率"}]}}),u=n({data:a.json,baseCharData:{},chartData:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{show:!0,backgroundColor:"#6a7985"}}},legend:{show:!0,data:["all"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"",type:"line",stack:"Total",emphasis:{focus:"series"},data:[]}]}});_((function(){return u.data}),(function(e,t){console.warn("get chart data"),j()}),{deep:!0});var y=function(){var e,t=l.options.target.find((function(e){return e.value===l.data.target}));return null!==(e=null==t?void 0:t.label)&&void 0!==e?e:""},h=["6"],g=function(){x()},x=function(){var e,t=l.data.target,a=null!==(e=u.baseCharData[t])&&void 0!==e?e:[];if(h.includes(l.data.target.toString())){var n=a.map((function(e){return R(100*e,2)}));u.chartData.series[0].data=n}else{var r=a.map((function(e){return R(e,2)}));u.chartData.series[0].data=r}u.chartData.series[0].name=y()},j=function(){var e=r(regeneratorRuntime.mark((function e(){var a,n,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t({},u.data.data),n=M(n),u.chartData.xAxis[0].data=[],u.chartData.series[0].data=[],e.next=6,k(n);case 6:r=e.sent,l=r.data,u.baseCharData=l,u.chartData.xAxis[0].data=null!==(a=null==l?void 0:l.date)&&void 0!==a?a:[],u.chartData.series[0].name=y(),x();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(e,t){var a=o("el-option"),n=o("el-select"),r=o("el-form-item"),y=o("el-form");return c(),i("div",null,[s("div",null,[d(y,{inline:!0,model:p(l).data,class:"flex jc-between w100"},{default:f((function(){return[d(r,{label:"指标"},{default:f((function(){return[d(n,{modelValue:p(l).data.target,"onUpdate:modelValue":t[0]||(t[0]=function(e){return p(l).data.target=e}),placeholder:"Select",onChange:g},{default:f((function(){return[(c(!0),i(v,null,b(p(l).options.target,(function(e){return c(),m(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]),s("div",null,[d(p(E),{"chart-data":p(u).chartData},null,8,["chart-data"])])])}}}),X={class:"mt-20"},Z={class:"flex jc-end mb-10"},ee=a({props:{json:{require:!0,default:{},type:Object}},setup:function(e){var a=n({data:e.json,list:[],exportExcel:{buttonName:"导出",tHeader:["日期"],filterVal:["date"],fileName:"profit"}}),l=n([{value:"user_id",label:"User ID"},{value:"account_email",label:"Account Email"},{value:"user_name",label:"User Name"},{value:"profit",label:"毛利"},{value:"revenue",label:"收入"},{value:"cost",label:"支出"},{value:"profit_rate",label:"毛利率"}]);_((function(){return a.data}),(function(e,t){console.warn("get table data"),u()}),{deep:!0});var u=function(){var e=r(regeneratorRuntime.mark((function e(){var n,r,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t({},a.data.data),n=M(n),a.list=[],e.next=5,S(n);case 5:r=e.sent,l=r.data,a.list=l;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=["profit_rate"],g=O((function(){var e=[];return a.list.map((function(a){var n={},r=t({},a);for(var l in r)if(Object.prototype.hasOwnProperty.call(r,l)){var u=r[l];h.includes(l)?n[l]="".concat(R(100*u,2),"%"):n[l]=u}e.push(n)})),e})),x=O((function(){return l.map((function(e){return e.label}))})),j=O((function(){return l.map((function(e){return e.value}))}));return function(e,t){var n=o("el-table-column"),r=o("el-table");return c(),i("div",X,[s("div",Z,[d(Y,{"button-name":p(a).exportExcel.buttonName,list:p(g),"t-header":p(x),"filter-val":p(j),filename:p(a).exportExcel.fileName},null,8,["button-name","list","t-header","filter-val","filename"])]),y(" table "),d(r,{center:"",data:p(g),class:"w100",border:""},{default:f((function(){return[(c(!0),i(v,null,b(p(l),(function(e){var t;return c(),m(n,{key:e.value,prop:e.value,label:e.label,fixed:null!==(t=null==e?void 0:e.fixed)&&void 0!==t&&t,align:"center"},null,8,["prop","label","fixed"])})),128))]})),_:1},8,["data"])])}}}),te={class:"app-container"},ae=a({name:"Profit"});e("default",a(t(t({},ae),{},{setup:function(e){var t=n({data:{adtype:"",channel_type:"",user_name:"",slot:"",country:"",st:"",et:""}}),a=function(e){t.data.adtype=e.adtype,t.data.channel_type=e.channel_type,t.data.user_name=e.user_name,t.data.slot=e.slot,t.data.country=e.country,t.data.st=e.date[0],t.data.et=e.date[1]};return function(e,n){return c(),i("div",te,[d(p(I),{onEmitParent:a}),d(p(J),{json:p(t)},null,8,["json"]),d(p(K),{json:p(t)},null,8,["json"]),d(p(ee),{json:p(t)},null,8,["json"])])}}})))}}}))}();
