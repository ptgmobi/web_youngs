import{d as a,r as e,h as l,L as t,q as i,$ as n,o as r,c as o,z as s,U as d,v as p,A as u,s as g,x as c,V as m,e as b,K as f,y as w}from"./main-0f2b385e.js";import{P as _}from"./index-668ad167.js";import{a as y,b as h}from"./advertiser-8ab8a592.js";const v={class:"flex jc-around"},Q={class:"w100 flex"},k=a({setup(a){let k=e({loading:!1,list:[]}),D=l(!1);const j=e({pageSizes:["20","50","100","500","1000"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}});let x=e({data:[]});const z=async()=>{const a={page:j.listQuery.page,limit:j.listQuery.limit},e=await y(a),l=e.data.data;l.map((a=>(a.targeting?a.targeting=JSON.parse(a.targeting):a.targeting={geo:[]},a))),k.list=l,j.total=Number(e.data.paging.count)};return t((()=>{z()})),(a,e)=>{const l=i("el-table-column"),t=i("el-button"),y=i("el-table"),C=i("el-dialog"),P=n("loading");return r(),o("div",null,[s(" table "),d((r(),u(y,{center:"",data:p(k).list,class:"w100",border:""},{default:g((()=>[b(l,{sortable:"",align:"center",label:"Offer ID",prop:"offer_id",width:"120"},{default:g((a=>[c("span",null,w(a.row.offer_id),1)])),_:1}),b(l,{sortable:"",align:"center",label:"PKG",prop:"pkg_name","min-width":"150"},{default:g((a=>[c("span",null,w(a.row.pkg_name),1)])),_:1}),b(l,{sortable:"",align:"center",label:"Platform",prop:"platform",width:"100"},{default:g((a=>[c("span",null,w(a.row.targeting.os),1)])),_:1}),b(l,{sortable:"",align:"center",label:"Country",prop:"targeting",width:"100"},{default:g((a=>[c("span",null,w(a.row.targeting.geo.join(",")),1)])),_:1}),b(l,{sortable:"",align:"center",label:"Payout",prop:"payout","min-width":"50"},{default:g((a=>[c("span",null,w(a.row.payout),1)])),_:1}),b(l,{sortable:"",align:"center",label:"Daily Cap",prop:"daily_cap","min-width":"50"},{default:g((a=>[c("span",null,w(a.row.daily_cap),1)])),_:1}),b(l,{sortable:"",align:"center",label:"Kpi",prop:"kpi","min-width":"100"},{default:g((a=>[c("span",null,w(a.row.kpi),1)])),_:1}),b(l,{sortable:"",align:"center",label:"Last Modified",prop:"last_time","min-width":"95"},{default:g((a=>[c("span",null,w(a.row.last_time),1)])),_:1}),b(l,{sortable:"",align:"center",label:"Details","min-width":"140"},{default:g((a=>[c("div",v,[c("div",null,[c("span",null,w(a.row.details),1)]),b(t,{class:"cp ml-10 scale-button",type:"primary",icon:"View",circle:"",onClick:e=>(async a=>{const e={offer_id:a.row.offer_id},l=(await h(e)).data.data;x.data=l,D.value=!0})(a)},null,8,["onClick"])])])),_:1})])),_:1},8,["data"])),[[P,p(k).loading]]),s(" 分页 "),c("div",Q,[d(b(p(_),{page:p(j).listQuery.page,"onUpdate:page":e[0]||(e[0]=a=>p(j).listQuery.page=a),limit:p(j).listQuery.limit,"onUpdate:limit":e[1]||(e[1]=a=>p(j).listQuery.limit=a),total:p(j).total,"page-sizes":p(j).pageSizes,onPagination:z},null,8,["page","limit","total","page-sizes"]),[[m,p(j).total]])]),s(" busData "),b(C,{title:"日志",modelValue:p(D),"onUpdate:modelValue":e[2]||(e[2]=a=>f(D)?D.value=a:D=a)},{default:g((()=>[b(y,{data:p(x).data,style:{width:"100%"},border:""},{default:g((()=>[s(' <el-table-column\n          align="center"\n          prop="id"\n          label="ID">\n        </el-table-column> '),b(l,{align:"center",prop:"offer_id",label:"Offer ID"}),b(l,{align:"center",prop:"record",label:"Record"}),b(l,{align:"center",prop:"create_time",label:"Create Time"})])),_:1},8,["data"])])),_:1},8,["modelValue"])])}}});export{k as default};
