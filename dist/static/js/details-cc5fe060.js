import{d as e,o as l,c as a,x as r,y as o,h as t,r as s,L as m,q as u,z as d,e as i,s as n,v as f,P as c,f as p,g as v}from"./main-4990c854.js";import{m as y}from"./message-2ec72094.js";import{u as F}from"./useUtils-eed7a23a.js";import{d as x,e as b,f as V}from"./new-format-aff64952.js";import{_ as g}from"./lodash-d6ca2f8e.js";const h={class:"w100 flex jc-between p10-20"},_={class:"mr-10"},j=r("div",{class:"split-box"},null,-1),w=e({props:{title:{type:String,default:""}},setup(e){const t=e;return(e,s)=>(l(),a("div",h,[r("div",_,o(t.title),1),j]))}}),U={class:"content-con from-one flex column"},C={class:"content-con from-one flex column"},M={class:"w100 flex"},k=p(" 确认 "),q=p(" 取消 "),D=e({setup(e){const{getRouterData:o,getCommonCountryList:p,goNewUrl:h}=F();let{proxy:_}=v(),j=t("create");const D={id:"",name:"",desc:"",rate:""},L=s({ruleForm:D,rules:{},options:{}}),S=()=>{_.$refs.ruleForm.validate((e=>{if(!e)return!1;P()}))},z=["id","rate"],N=[],P=async()=>{let e=c(L.ruleForm);if(e=x(e),e=b(e,z),"create"===j.value){delete e.id;y(null)&&R()}if("edit"===j.value){y(null)&&R()}},R=()=>{h({url:"./list"})},$=()=>{var e,l;let{query:a,params:r}=o();a.type,j.value=null!=(l=null==(e=a.type)?void 0:e.toString())?l:"",(async()=>{})(),"create"===j.value&&(L.ruleForm=g.cloneDeep(D)),"edit"===j.value&&(async e=>{const{data:l}={data:{}};L.ruleForm=V(l,N)})()};return m((()=>{$()})),(e,o)=>{const t=u("el-input"),s=u("el-form-item"),m=u("el-form"),c=u("el-button");return l(),a("div",null,[d(" form "),i(m,{ref:"ruleForm",enctype:"multipart/form-data",rules:f(L).rules,model:f(L).ruleForm,"label-width":"150px","label-position":"right",class:"flex column",disabled:"edit"===f(j)&&2===f(L).ruleForm.is_del},{default:n((()=>[i(f(w),{title:"基本信息"}),r("div",U,[i(s,{class:"self-el-form-item",label:"广告主名称:",prop:"name"},{default:n((()=>[i(t,{modelValue:f(L).ruleForm.name,"onUpdate:modelValue":o[0]||(o[0]=e=>f(L).ruleForm.name=e),modelModifiers:{trim:!0},class:"form-one",placeholder:""},null,8,["modelValue"])])),_:1}),i(s,{class:"self-el-form-item",label:"描述:",prop:"desc"},{default:n((()=>[i(t,{modelValue:f(L).ruleForm.desc,"onUpdate:modelValue":o[1]||(o[1]=e=>f(L).ruleForm.desc=e),modelModifiers:{trim:!0},class:"form-one",placeholder:"",type:"textarea"},null,8,["modelValue"])])),_:1})]),i(f(w),{title:"广告主配置"}),r("div",C,[i(s,{class:"self-el-form-item",label:"强制流量占比(%):",prop:"rate"},{default:n((()=>[i(t,{modelValue:f(L).ruleForm.rate,"onUpdate:modelValue":o[2]||(o[2]=e=>f(L).ruleForm.rate=e),modelModifiers:{trim:!0},class:"form-one",placeholder:""},null,8,["modelValue"])])),_:1})])])),_:1},8,["rules","model","disabled"]),d(" form "),d(" footer "),r("div",M,[i(c,{type:"primary",onClick:S},{default:n((()=>[k])),_:1}),i(c,{type:"primary",onClick:R},{default:n((()=>[q])),_:1})])])}}});export{D as default};
