import{_ as e,d as a,h as l,r as t,L as o,q as s,a0 as i,c as r,x as d,e as u,v as n,s as p,z as c,U as m,A as b,V as v,K as _,o as g,N as f,O as y,f as h,y as w}from"./main-0a777472.js";import{u as V,s as x}from"./useUtils-9816d64a.js";import{P as F}from"./index-2575c6ed.js";import{m as k}from"./message-d6ce123e.js";import{_ as U}from"./lodash-4786ff9c.js";import{h as j,g as C}from"./new-format-7f959bed.js";import{c as z}from"./clipboard-4e200ba9.js";import{f as Q,a as D,g as S,h as N,i as q}from"./dsp-adcontrol-3aaea3f8.js";import{A}from"./dsp-advertiser-4a2a0a9c.js";import{_ as I}from"./index-2871ca9a.js";import"./clipboard-polyfill.text.esm-fc4f7791.js";import"./format-00f0450d.js";import"./moment-56f006b0.js";import"./dsp-ade02a7a.js";const P={class:"controlBox w100 mb-10"},$={class:"flex jc-start flex-wrap w100"},L={class:"flex"},O={class:"flex"},R={class:"mb-10 w100"},B={class:"flex jc-around"},E={class:"w100 flex"},K=a({name:"adserieslist"});var T=e(a({...K,setup(e){const a=l([{id:""}]),{status:K,adv_type:T,ind_cla:G,third_party:H,return_mode:J}=x,{goNewUrl:M,getRouterData:W,getCommonCountryList:X,openAlert:Y}=V(),Z=t({adv_series_id:"",ad_group_id:"",status:"",adv_series_type:"",marbet_target:"",is_del:"1",value_type:"id",value:""}),ee=l(!1),ae=t({report_api:""});let le=t({dialogVisible:!1,cache:{item:{}},searchForm:Z,useData:Z,loading:!0,options:{status:K,adv_series_type:[{value:1,label:"动态商品促销"},{value:2,label:"固定链接推广"}],marbet_target:[{value:1,label:"再营销"},{value:2,label:"拉新"}],value_type:[{value:"name",label:"广告名称"},{value:"id",label:"广告ID"},{value:"descs",label:"描述"}],promotion_cycle:[{value:1,label:"从现在开始长期有效"},{value:2,label:"限定周期"}],country:[],advertiser:[],ad_series:[],ad_group:[],adx:[]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}}),te=t({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const oe=t({adv_id:"",st:"",et:""}),se=()=>{le.useData=U.cloneDeep(le.searchForm),ne()},ie=e=>{oe.adv_id=e.adv,e.date&&(oe.st=e.date[0],oe.et=e.date[1])};l([]);const re=()=>{M({url:"/adcontrol/ad/create",query:{type:"create"}})},de=async e=>{Y({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},(e=>async()=>{const{row:a,$index:l}=e,t=await q({id:a.id});k(t)&&le.list.splice(l,1)})(e))},ue=async()=>{a.value.map((e=>e.id));let e=te.data.mode;e.toString(),e.toString(),e.toString()},ne=async()=>{le.loading=!0;let{query:e,params:a}=W(),{adseries:l,adgroup:t}=e;l&&(Z.adv_series_id=Number(l),Z.ad_group_id=Number(t));let o={page:le.pagination.listQuery.page,limit:le.pagination.listQuery.limit,...Z,...oe};o[o.value_type]=o.value,delete o.value_type,delete o.value,o=j(o);const s=await Q(o);if(s){const{data:e}=s;le.list=null==e?void 0:e.data,le.pagination.total=Number(e.count)}le.loading=!1};return o((()=>{(()=>{let e={limit:1e4,page:1};Promise.all([X(),A(e),D(e),S(),Q(e)]).then((e=>{let a=e[0];le.options.country=a;let l=e[1].data.data;le.options.advertiser=l;let t=e[2].data.data;le.options.ad_series=t.map((e=>(e.value=e.id,e.label=e.name,e)));let o=e[3].data.data;le.options.adx=o;let s=e[4].data.data;le.options.ad_group=s.map((e=>(e.value=e.id,e.label=e.adv_group_name,e)))}))})(),se()})),(e,a)=>{const l=s("el-option"),t=s("el-select"),o=s("el-form-item"),V=s("el-input"),x=s("el-checkbox"),U=s("el-button"),j=s("el-form"),Q=s("el-table-column"),D=s("el-switch"),S=s("el-table"),q=s("el-dialog"),A=i("loading");return g(),r("div",null,[d("div",P,[u(n(I),{onUp:ie,arr:["adv","date"]}),u(j,{modelValue:n(le).searchForm,"onUpdate:modelValue":a[7]||(a[7]=e=>n(le).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:p((()=>[d("div",$,[c(" 全部状态 "),u(o,{label:""},{default:p((()=>[u(t,{modelValue:n(le).searchForm.status,"onUpdate:modelValue":a[0]||(a[0]=e=>n(le).searchForm.status=e),filterable:"",clearable:"",placeholder:"全部状态"},{default:p((()=>[(g(!0),r(f,null,y(n(le).options.status,(e=>(g(),b(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),c(" 广告系列 "),u(o,{label:""},{default:p((()=>[u(t,{modelValue:n(le).searchForm.adv_series_id,"onUpdate:modelValue":a[1]||(a[1]=e=>n(le).searchForm.adv_series_id=e),filterable:"",clearable:"",placeholder:"广告系列"},{default:p((()=>[(g(!0),r(f,null,y(n(le).options.ad_series,(e=>(g(),b(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),c(" 广告组 "),u(o,{label:""},{default:p((()=>[u(t,{modelValue:n(le).searchForm.ad_group_id,"onUpdate:modelValue":a[2]||(a[2]=e=>n(le).searchForm.ad_group_id=e),filterable:"",clearable:"",placeholder:"广告组"},{default:p((()=>[(g(!0),r(f,null,y(n(le).options.ad_group,(e=>(g(),b(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),c(" 所有创意样式 "),u(o,{label:""},{default:p((()=>[u(t,{modelValue:n(le).searchForm.status,"onUpdate:modelValue":a[3]||(a[3]=e=>n(le).searchForm.status=e),filterable:"",clearable:"",placeholder:"所有创意样式"},{default:p((()=>[(g(!0),r(f,null,y(n(le).options.status,(e=>(g(),b(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(o,{label:""},{default:p((()=>[u(V,{modelValue:n(le).searchForm.value,"onUpdate:modelValue":a[5]||(a[5]=e=>n(le).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:p((()=>[u(t,{modelValue:n(le).searchForm.value_type,"onUpdate:modelValue":a[4]||(a[4]=e=>n(le).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:p((()=>[(g(!0),r(f,null,y(n(le).options.value_type,(e=>(g(),b(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),u(o,{label:""},{default:p((()=>[u(x,{modelValue:n(le).searchForm.is_del,"onUpdate:modelValue":a[6]||(a[6]=e=>n(le).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),d("div",L,[u(o,{class:"mr-0",style:{"margin-right":"0px"}},{default:p((()=>[d("div",O,[u(U,{type:"primary",onClick:se},{default:p((()=>[h(" 查询 ")])),_:1}),c(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),d("div",R,[u(U,{type:"primary",onClick:re},{default:p((()=>[h("新建广告")])),_:1}),u(t,{class:"ml-10",modelValue:n(te).data.mode,"onUpdate:modelValue":a[8]||(a[8]=e=>n(te).data.mode=e),filterable:"",placeholder:"批量操作",onChange:ue},{default:p((()=>[(g(!0),r(f,null,y(n(te).options.mode,(e=>(g(),b(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),c(" table "),m((g(),b(S,{center:"",data:n(le).list,class:"w100",border:""},{default:p((()=>[u(Q,{align:"center",type:"selection",width:"55"}),u(Q,{sortable:"",prop:"id",label:"广告ID",align:"center"}),u(Q,{sortable:"",width:"120",prop:"adv_group_name",label:"广告名称",align:"center"}),u(Q,{sortable:"",prop:"status",label:"开关",align:"center"},{default:p((e=>[u(D,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onClick:a=>(async({row:e})=>{let a={id:e.id,status:e.status},l=await N(a);k(l)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),c(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),u(Q,{sortable:"",prop:"status",label:"状态",align:"center"},{default:p((e=>[d("span",null,w(n(C)(e.row.status,n(le).options.status)),1)])),_:1}),u(Q,{width:"200",label:"操作",align:"center"},{default:p((e=>[d("div",B,[u(U,{class:"cp",type:"primary",onClick:a=>(({row:e})=>{const{id:a}=e;M({url:`/adcontrol/ad/edit/${a}`,query:{type:"edit"}})})(e)},{default:p((()=>[h("编辑")])),_:2},1032,["onClick"]),u(U,{class:"cp",type:"primary"},{default:p((()=>[h("复制")])),_:1}),c(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),u(U,{class:"cp",type:"danger",onClick:a=>de(e),disabled:2===e.row.is_del},{default:p((()=>[h("归档")])),_:2},1032,["onClick","disabled"])])])),_:1}),u(Q,{sortable:"",prop:"status",label:"创意样式",align:"center"},{default:p((e=>[d("span",null,w(n(C)(e.row.status,n(le).options.status)),1)])),_:1}),u(Q,{sortable:"",width:"120",prop:"size",label:"尺寸",align:"center"}),u(Q,{sortable:"",width:"120",prop:"size",label:"格式",align:"center"}),u(Q,{sortable:"",width:"120",prop:"limit",label:"大小",align:"center"}),u(Q,{sortable:"",width:"120",prop:"drution",label:"时长",align:"center"}),u(Q,{sortable:"",width:"120",prop:"create_email",label:"创建人",align:"center"}),u(Q,{sortable:"",width:"160",prop:"create_time",label:"创建时间",align:"center"}),u(Q,{sortable:"",width:"160",prop:"update_time",label:"更新时间",align:"center"}),u(Q,{sortable:"",width:"160",prop:"imp_number",label:"展示数",align:"center"})])),_:1},8,["data"])),[[A,n(le).loading]]),c(" 分页 "),d("div",E,[m(u(F,{page:n(le).pagination.listQuery.page,"onUpdate:page":a[9]||(a[9]=e=>n(le).pagination.listQuery.page=e),limit:n(le).pagination.listQuery.limit,"onUpdate:limit":a[10]||(a[10]=e=>n(le).pagination.listQuery.limit=e),total:n(le).pagination.total,"page-sizes":n(le).pagination.pageSizes,onPagination:ne},null,8,["page","limit","total","page-sizes"]),[[v,n(le).pagination.total]])]),c(" 复制 "),u(q,{modelValue:n(ee),"onUpdate:modelValue":a[12]||(a[12]=e=>_(ee)?ee.value=e:null),title:"Report Api",width:"90%"},{default:p((()=>[d("p",null,w(n(ae).report_api),1),u(U,{class:"cp mr-10",type:"default",onClick:a[11]||(a[11]=e=>{return a=n(ae).report_api,void z(a);var a})},{default:p((()=>[h("复制")])),_:1})])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-fa4132c2"]]);export{T as default};
