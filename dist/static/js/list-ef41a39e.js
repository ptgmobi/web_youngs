var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e};import{_ as d,d as u,h as n,r as p,L as c,q as m,$ as b,o as v,c as _,x as f,e as g,v as y,s as h,z as w,U as V,A as j,V as x,N as F,O as k,y as U,f as C}from"./main-f5fc11c6.js";import{u as O,s as P}from"./useUtils-e29f5423.js";import{P as z}from"./index-25212d29.js";import{m as D}from"./message-63eca02f.js";import{_ as Q}from"./lodash-d099a0b1.js";import{h as S,g as N}from"./new-format-35937e70.js";import{c as q}from"./clipboard-e9047a61.js";import{a as A,f as I,g as $,h as E,i as L}from"./dsp-adcontrol-f9a35fbd.js";import{A as R}from"./dsp-advertiser-133f6b15.js";import{_ as B}from"./index-ce563a27.js";import"./clipboard-polyfill.text.esm-fc4f7791.js";import"./format-fb65a074.js";import"./moment-9bd84dc2.js";import"./dsp-2d82d1cf.js";const T={class:"controlBox w100 mb-10"},G={class:"flex jc-start flex-wrap w100"},H={class:"flex"},J={class:"flex"},K=C(" 查询 "),M={class:"mb-10 w100"},W=C("新建广告"),X={class:"flex jc-around"},Y=C("编辑"),Z=C("复制"),ee=C("归档"),ae={class:"w100 flex"},le=C("复制"),te=u({name:"adserieslist"});var oe,se=d(u((oe=i({},te),a(oe,l({setup(e){const a=n([{id:""}]),{status:l,adv_type:t,ind_cla:o,third_party:s,return_mode:r}=P,{goNewUrl:d,getRouterData:u,getCommonCountryList:C,openAlert:te}=O(),oe=p({adv_series_id:"",ad_group_id:"",status:"",adv_series_type:"",marbet_target:"",is_del:"1",value_type:"id",value:""}),se=n(!1),re=p({report_api:""});let ie=p({dialogVisible:!1,cache:{item:{}},searchForm:oe,useData:oe,loading:!0,options:{status:l,adv_series_type:[{value:1,label:"动态商品促销"},{value:2,label:"固定链接推广"}],marbet_target:[{value:1,label:"再营销"},{value:2,label:"拉新"}],value_type:[{value:"name",label:"广告名称"},{value:"id",label:"广告ID"},{value:"descs",label:"描述"}],promotion_cycle:[{value:1,label:"从现在开始长期有效"},{value:2,label:"限定周期"}],country:[],advertiser:[],ad_series:[],ad_group:[],adx:[]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}}),de=p({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const ue=p({adv_id:"",st:"",et:""}),ne=()=>{ie.useData=Q.cloneDeep(ie.searchForm),ve()},pe=e=>{ue.adv_id=e.adv,e.date&&(ue.st=e.date[0],ue.et=e.date[1])};n([]);const ce=()=>{d({url:"/adcontrol/ad/create",query:{type:"create"}})},me=async e=>{te({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},(e=>async()=>{const{row:a,$index:l}=e,t=await L({id:a.id});D(t)&&ie.list.splice(l,1)})(e))},be=async()=>{a.value.map((e=>e.id));let e=de.data.mode;e.toString(),e.toString(),e.toString()},ve=async()=>{ie.loading=!0;let{query:e,params:a}=u(),{adseries:l,adgroup:t}=e;l&&(oe.adv_series_id=Number(l),oe.ad_group_id=Number(t));let o=i(i({page:ie.pagination.listQuery.page,limit:ie.pagination.listQuery.limit},oe),ue);o[o.value_type]=o.value,delete o.value_type,delete o.value,o=S(o);const s=await $(o);if(s){const{data:e}=s;ie.list=null==e?void 0:e.data,ie.pagination.total=Number(e.count)}ie.loading=!1};return c((()=>{(()=>{let e={limit:1e4,page:1};Promise.all([C(),R(e),A(e),I(),$(e)]).then((e=>{let a=e[0];ie.options.country=a;let l=e[1].data.data;ie.options.advertiser=l;let t=e[2].data.data;ie.options.ad_series=t.map((e=>(e.value=e.id,e.label=e.name,e)));let o=e[3].data.data;ie.options.adx=o;let s=e[4].data.data;ie.options.ad_group=s.map((e=>(e.value=e.id,e.label=e.adv_group_name,e)))}))})(),ne()})),(e,a)=>{const l=m("el-option"),t=m("el-select"),o=m("el-form-item"),s=m("el-input"),r=m("el-checkbox"),i=m("el-button"),u=m("el-form"),n=m("el-table-column"),p=m("el-switch"),c=m("el-table"),C=m("el-dialog"),O=b("loading");return v(),_("div",null,[f("div",T,[g(y(B),{onUp:pe,arr:["adv","date"]}),g(u,{modelValue:y(ie).searchForm,"onUpdate:modelValue":a[7]||(a[7]=e=>y(ie).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:h((()=>[f("div",G,[w(" 全部状态 "),g(o,{label:""},{default:h((()=>[g(t,{modelValue:y(ie).searchForm.status,"onUpdate:modelValue":a[0]||(a[0]=e=>y(ie).searchForm.status=e),filterable:"",clearable:"",placeholder:"全部状态"},{default:h((()=>[(v(!0),_(F,null,k(y(ie).options.status,(e=>(v(),j(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(" 广告系列 "),g(o,{label:""},{default:h((()=>[g(t,{modelValue:y(ie).searchForm.adv_series_id,"onUpdate:modelValue":a[1]||(a[1]=e=>y(ie).searchForm.adv_series_id=e),filterable:"",clearable:"",placeholder:"广告系列"},{default:h((()=>[(v(!0),_(F,null,k(y(ie).options.ad_series,(e=>(v(),j(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(" 广告组 "),g(o,{label:""},{default:h((()=>[g(t,{modelValue:y(ie).searchForm.ad_group_id,"onUpdate:modelValue":a[2]||(a[2]=e=>y(ie).searchForm.ad_group_id=e),filterable:"",clearable:"",placeholder:"广告组"},{default:h((()=>[(v(!0),_(F,null,k(y(ie).options.ad_group,(e=>(v(),j(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(" 所有创意样式 "),g(o,{label:""},{default:h((()=>[g(t,{modelValue:y(ie).searchForm.status,"onUpdate:modelValue":a[3]||(a[3]=e=>y(ie).searchForm.status=e),filterable:"",clearable:"",placeholder:"所有创意样式"},{default:h((()=>[(v(!0),_(F,null,k(y(ie).options.status,(e=>(v(),j(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(o,{label:""},{default:h((()=>[g(s,{modelValue:y(ie).searchForm.value,"onUpdate:modelValue":a[5]||(a[5]=e=>y(ie).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:h((()=>[g(t,{modelValue:y(ie).searchForm.value_type,"onUpdate:modelValue":a[4]||(a[4]=e=>y(ie).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:h((()=>[(v(!0),_(F,null,k(y(ie).options.value_type,(e=>(v(),j(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),g(o,{label:""},{default:h((()=>[g(r,{modelValue:y(ie).searchForm.is_del,"onUpdate:modelValue":a[6]||(a[6]=e=>y(ie).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),f("div",H,[g(o,{class:"mr-0",style:{"margin-right":"0px"}},{default:h((()=>[f("div",J,[g(i,{type:"primary",onClick:ne},{default:h((()=>[K])),_:1}),w(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),f("div",M,[g(i,{type:"primary",onClick:ce},{default:h((()=>[W])),_:1}),g(t,{class:"ml-10",modelValue:y(de).data.mode,"onUpdate:modelValue":a[8]||(a[8]=e=>y(de).data.mode=e),filterable:"",placeholder:"批量操作",onChange:be},{default:h((()=>[(v(!0),_(F,null,k(y(de).options.mode,(e=>(v(),j(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),w(" table "),V((v(),j(c,{center:"",data:y(ie).list,class:"w100",border:""},{default:h((()=>[g(n,{align:"center",type:"selection",width:"55"}),g(n,{sortable:"",prop:"id",label:"广告ID",align:"center"}),g(n,{sortable:"",width:"120",prop:"adv_group_name",label:"广告名称",align:"center"}),g(n,{sortable:"",prop:"status",label:"开关",align:"center"},{default:h((e=>[g(p,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onClick:a=>(async({row:e})=>{let a={id:e.id,status:e.status},l=await E(a);D(l)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),w(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),g(n,{sortable:"",prop:"status",label:"状态",align:"center"},{default:h((e=>[f("span",null,U(y(N)(e.row.status,y(ie).options.status)),1)])),_:1}),g(n,{width:"200",label:"操作",align:"center"},{default:h((e=>[f("div",X,[g(i,{class:"cp",type:"primary",onClick:a=>(({row:e})=>{const{id:a}=e;d({url:`/adcontrol/ad/edit/${a}`,query:{type:"edit"}})})(e)},{default:h((()=>[Y])),_:2},1032,["onClick"]),g(i,{class:"cp",type:"primary"},{default:h((()=>[Z])),_:1}),w(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),g(i,{class:"cp",type:"danger",onClick:a=>me(e),disabled:2===e.row.is_del},{default:h((()=>[ee])),_:2},1032,["onClick","disabled"])])])),_:1}),g(n,{sortable:"",prop:"status",label:"创意样式",align:"center"},{default:h((e=>[f("span",null,U(y(N)(e.row.status,y(ie).options.status)),1)])),_:1}),g(n,{sortable:"",width:"120",prop:"size",label:"尺寸",align:"center"}),g(n,{sortable:"",width:"120",prop:"size",label:"格式",align:"center"}),g(n,{sortable:"",width:"120",prop:"limit",label:"大小",align:"center"}),g(n,{sortable:"",width:"120",prop:"drution",label:"时长",align:"center"}),g(n,{sortable:"",width:"120",prop:"create_email",label:"创建人",align:"center"}),g(n,{sortable:"",width:"160",prop:"create_time",label:"创建时间",align:"center"}),g(n,{sortable:"",width:"160",prop:"update_time",label:"更新时间",align:"center"}),g(n,{sortable:"",width:"160",prop:"imp_number",label:"展示数",align:"center"})])),_:1},8,["data"])),[[O,y(ie).loading]]),w(" 分页 "),f("div",ae,[V(g(z,{page:y(ie).pagination.listQuery.page,"onUpdate:page":a[9]||(a[9]=e=>y(ie).pagination.listQuery.page=e),limit:y(ie).pagination.listQuery.limit,"onUpdate:limit":a[10]||(a[10]=e=>y(ie).pagination.listQuery.limit=e),total:y(ie).pagination.total,"page-sizes":y(ie).pagination.pageSizes,onPagination:ve},null,8,["page","limit","total","page-sizes"]),[[x,y(ie).pagination.total]])]),w(" 复制 "),g(C,{modelValue:se.value,"onUpdate:modelValue":a[12]||(a[12]=e=>se.value=e),title:"Report Api",width:"90%"},{default:h((()=>[f("p",null,U(y(re).report_api),1),g(i,{class:"cp mr-10",type:"default",onClick:a[11]||(a[11]=e=>{return a=y(re).report_api,void q(a);var a})},{default:h((()=>[le])),_:1})])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-fa4132c2"]]);export{se as default};
