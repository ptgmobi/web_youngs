var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{_ as i,d as u,$ as s,r as c,M as d,m as p,a0 as m,s as f,n as b,v as h,z as _,c as v,p as g,q as y,O as w,P as V,V as x,A as k,b as F,x as D,W as j,D as U,F as O,E as P}from"./index-43330998.js";import{P as C}from"./index-e747db07.js";import{A as z,a as A,b as S,c as E}from"./buzz-e1518ad1.js";import{m as Q}from"./message-55bdbdcf.js";import{_ as N}from"./lodash-66bbb7e8.js";import{a as I}from"./new-format-f129e2ba.js";const $=e=>(U("data-v-29c9e5d6"),e=e(),O(),e),B={class:"controlBox w100 mb-10"},M={class:"mb-10"},T=F(" Offer Create "),q={class:"flex jc-start flex-wrap w100"},L={class:"flex"},W={class:"flex"},G=F(" 查询 "),H={class:"flex jc-around"},J={class:"flex jc-around"},K=$((()=>h("span",null,"-",-1))),R={class:"flex mt-10"},X={class:"flex jc-around"},Y={class:"w100 flex"},Z=u({name:"buzz-list"}),ee=u((ae=((e,a)=>{for(var l in a||(a={}))o.call(a,l)&&n(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&n(e,l,a[l]);return e})({},Z),a(ae,l({setup(e){const a=s({attribute_provider:[],platform:[],package_name:"",channel:"",id:"",offer_title:"",country:"",pid:""});let l=c({dialogVisible:!1,cache:{item:{},device:{}},searchForm:a.value,useData:a.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((e,a)=>{const l=5*a/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((e,a)=>{const l=(5*a+5)/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const t=()=>{l.useData=N.cloneDeep(l.searchForm),r()},o=e=>{const a=(e.cutoff_end-e.cutoff_start)*e.device_num;return a?a.toFixed(0):""},r=async()=>{l.loading=!0;let e={page:l.pagination.listQuery.page,page_size:l.pagination.listQuery.limit};l.useData.attribute_provider&&(e.attribute_provider=l.useData.attribute_provider),l.useData.platform&&(e.platform=l.useData.platform),l.useData.package_name&&(e.pkg_name=l.useData.package_name),l.useData.channel&&(e.channel=l.useData.channel),l.useData.id&&(e.offer_id=l.useData.id),l.useData.offer_title&&(e.title=l.useData.offer_title),l.useData.country&&(e.country=l.useData.country),l.useData.pid&&(e.tracking_link=l.useData.pid);const a=await E(e),{data:t}=a;l.list=null==t?void 0:t.data,l.pagination.total=Number(t.count),l.loading=!1};return d((()=>{t()})),(e,a)=>{const n=p("el-button"),i=p("router-link"),u=p("el-option"),s=p("el-select"),c=p("el-form-item"),d=p("el-input"),U=p("el-form"),O=p("el-table-column"),E=p("el-switch"),N=p("el-table"),$=m("loading");return f(),b("div",null,[h("div",B,[h("div",M,[_(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),v(i,{to:"/buzz/create"},{default:g((()=>[v(n,{type:"primary"},{default:g((()=>[T])),_:1})])),_:1})]),v(U,{modelValue:y(l).searchForm,"onUpdate:modelValue":a[8]||(a[8]=e=>y(l).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:g((()=>[h("div",q,[v(c,{label:""},{default:g((()=>[v(s,{modelValue:y(l).searchForm.attribute_provider,"onUpdate:modelValue":a[0]||(a[0]=e=>y(l).searchForm.attribute_provider=e),clearable:"",class:"search-con",placeholder:"Attribute Provider",style:{"min-width":"140px"}},{default:g((()=>[(f(!0),b(w,null,V(y(l).options.attribute_provider,(e=>(f(),k(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),v(c,{label:""},{default:g((()=>[v(s,{modelValue:y(l).searchForm.platform,"onUpdate:modelValue":a[1]||(a[1]=e=>y(l).searchForm.platform=e),clearable:"",class:"search-con",placeholder:"Platform",style:{"min-width":"95px"}},{default:g((()=>[(f(!0),b(w,null,V(y(l).options.platform,(e=>(f(),k(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),v(c,{label:""},{default:g((()=>[v(d,{modelValue:y(l).searchForm.package_name,"onUpdate:modelValue":a[2]||(a[2]=e=>y(l).searchForm.package_name=e),placeholder:"Package Name",class:"search-con",style:{"min-width":"120px"}},null,8,["modelValue"])])),_:1}),v(c,{label:""},{default:g((()=>[v(d,{modelValue:y(l).searchForm.channel,"onUpdate:modelValue":a[3]||(a[3]=e=>y(l).searchForm.channel=e),placeholder:"Channel",class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),v(c,{label:""},{default:g((()=>[v(d,{modelValue:y(l).searchForm.id,"onUpdate:modelValue":a[4]||(a[4]=e=>y(l).searchForm.id=e),placeholder:"ID",class:"search-con"},null,8,["modelValue"])])),_:1}),v(c,{label:""},{default:g((()=>[v(d,{modelValue:y(l).searchForm.offer_title,"onUpdate:modelValue":a[5]||(a[5]=e=>y(l).searchForm.offer_title=e),placeholder:"Offer Title",class:"search-con",style:{"min-width":"90px"}},null,8,["modelValue"])])),_:1}),v(c,{label:""},{default:g((()=>[v(d,{modelValue:y(l).searchForm.country,"onUpdate:modelValue":a[6]||(a[6]=e=>y(l).searchForm.country=e),placeholder:"Country",class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),v(c,{label:""},{default:g((()=>[v(d,{modelValue:y(l).searchForm.pid,"onUpdate:modelValue":a[7]||(a[7]=e=>y(l).searchForm.pid=e),placeholder:"Pid",class:"search-con"},null,8,["modelValue"])])),_:1})]),h("div",L,[v(c,{class:"mr-0",style:{"margin-right":"0px"}},{default:g((()=>[h("div",W,[v(n,{type:"primary",onClick:t},{default:g((()=>[G])),_:1}),_(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),_(' <el-input placeholder="请输入内容" v-model="data.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),_(" table "),x((f(),k(N,{center:"",data:y(l).list,class:"w100",height:"70vh",border:""},{default:g((()=>[v(O,{fixed:"",prop:"offer_id",label:"ID",align:"center"}),v(O,{fixed:"",prop:"channel",label:"Channel",align:"center"}),v(O,{prop:"pkg_name",label:"Package Name",align:"center"}),v(O,{prop:"title",label:"Offer Title",width:"120",align:"center"}),v(O,{prop:"attribute_provider",label:"Attribute Provider",align:"center"}),v(O,{prop:"pid",label:"Pid",align:"center"}),v(O,{prop:"platform",label:"Platform",align:"center"},{default:g((e=>[F(D(1===Number(e.row.platform)?"Android":"iOS"),1)])),_:1}),v(O,{prop:"country",label:"Country",align:"center"}),v(O,{prop:"payout",label:"Payout",align:"center"}),v(O,{label:"Click Limitation(w)",width:"150",align:"center"},{default:g((e=>[h("div",H,[v(d,{modelValue:e.row.max_clk_num,"onUpdate:modelValue":a=>e.row.max_clk_num=a,placeholder:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),v(n,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(async e=>{let a={id:e.id,max_clk_num:e.max_clk_num};a=I(a);let l=await z(a);Q(l)})(e.row)},null,8,["onClick"])])])),_:1}),v(O,{label:"Device Cutoff",width:"250",align:"center"},{default:g((e=>[h("div",J,[h("div",null,[h("div",null,[v(s,{modelValue:e.row.cutoff_start,"onUpdate:modelValue":a=>e.row.cutoff_start=a,class:"cutoff",filterable:"",placeholder:"start"},{default:g((()=>[(f(!0),b(w,null,V(y(l).options.cutoff_start,(e=>(f(),k(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),K,v(s,{modelValue:e.row.cutoff_end,"onUpdate:modelValue":a=>e.row.cutoff_end=a,class:"cutoff",filterable:"",placeholder:"end"},{default:g((()=>[(f(!0),b(w,null,V(y(l).options.cutoff_end,(e=>(f(),k(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])]),h("div",R,[h("span",null,D(o(e.row)),1)])]),v(n,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(async e=>{const a=e.cutoff_start,l=e.cutoff_end,t=e.id;if(a<l){let e={cutoff_start:a,cutoff_end:l,id:t};e=I(e);const o=await A(e);Q(o)}else P({message:"start必须小于end",type:"error",duration:2e3})})(e.row)},null,8,["onClick"])])])),_:1}),v(O,{width:"100",label:"Operation",align:"center"},{default:g((e=>{return[h("div",X,[v(i,{to:(a=e.row,`/buzz/edit/${a.id}`)},{default:g((()=>[v(n,{class:"cp mr-10",type:"primary",icon:"Edit",circle:""})])),_:2},1032,["to"]),_(" <el-button class='cp mr-10' type=\"primary\" icon=\"Edit\" circle @click='editFun(scope.row)'></el-button> "),v(E,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onChange:a=>(async e=>{let a={id:e.id,status:e.status};a=I(a);const l=await S(a);Q(l)})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])];var a})),_:1})])),_:1},8,["data"])),[[$,y(l).loading]]),_(" 分页 "),h("div",Y,[x(v(y(C),{page:y(l).pagination.listQuery.page,"onUpdate:page":a[9]||(a[9]=e=>y(l).pagination.listQuery.page=e),limit:y(l).pagination.listQuery.limit,"onUpdate:limit":a[10]||(a[10]=e=>y(l).pagination.listQuery.limit=e),total:y(l).pagination.total,"page-sizes":y(l).pagination.pageSizes,onPagination:r},null,8,["page","limit","total","page-sizes"]),[[j,y(l).pagination.total]])])])}}}))));var ae,le=i(ee,[["__scopeId","data-v-29c9e5d6"]]);export{le as default};
