import{d as t,e,r as n,I as a,a2 as s,w as o,m as u,s as f,n as c,v as r,x as l,q as d,c as _,K as i,b as p}from"./index-b160a4d6.js";import{h as m}from"./buzz-bb516d14.js";const x={class:"w100"},v={class:"flex jc-start"},b=["textContent"],y=p(" % "),C=r("span",null,"-",-1),g=["textContent"],q=p(" % （ "),j=r("span",null,"总设备数:",-1),w=["textContent"],h=p(" ） （ "),F=r("span",null,"选中设备数:",-1),N=["textContent"],V=p(" ） "),k={class:"p0-10"},z=t({__name:"cutOff",props:{query:{require:!0,default:()=>({}),type:Object}},emits:["up"],setup(t,{emit:p}){const z=t;let O=e(0),I=n({cutoff_start:z.query.cutoff_start,cutoff_end:z.query.cutoff_end}),K=I.cutoff_start?100*Number(I.cutoff_start):0,L=I.cutoff_end?100*Number(I.cutoff_end):100,U=e([K,L]);const A=async()=>{const{pkg_name:t,country:e,platform:n}=z.query;if(t&&e&&n){const a={pkg_name:t,country:e,platform:n},s=await(async t=>{const e=await m(t),{data:n}=e;return 0!==n.length?n.findLast((t=>t)).device_num:0})(a);O.value=s}},B=a((()=>{const t=O.value,e=I.cutoff_start?Number(I.cutoff_start):0;return{judge:(((I.cutoff_end?Number(I.cutoff_end):1)-e)*t).toFixed(0),all:t.toFixed(0)}}));s((()=>{A()})),o((()=>z.query),((t,e)=>{void 0!==t.cutoff_start&&void 0!==t.cutoff_end&&(I.cutoff_start=t.cutoff_start,I.cutoff_end=t.cutoff_end)}),{immediate:!0,deep:!0});const D=t=>{var e;e=t,I.cutoff_start=e[0]/100,I.cutoff_end=e[1]/100,p("up",I)};return(t,e)=>{const n=u("el-slider");return f(),c("div",x,[r("div",v,[r("span",{textContent:l((100*d(I).cutoff_start).toFixed(0))},null,8,b),y,C,r("span",{textContent:l((100*d(I).cutoff_end).toFixed(0))},null,8,g),q,j,r("span",{textContent:l(d(B).all)},null,8,w),h,F,r("span",{textContent:l(d(B).judge)},null,8,N),V]),r("div",k,[_(n,{modelValue:d(U),"onUpdate:modelValue":e[0]||(e[0]=t=>i(U)?U.value=t:U=t),class:"device-cutoff",range:"",step:5,"show-stops":!0,"show-input":"",min:0,max:100,onChange:D},null,8,["modelValue"])])])}}});export{z as _};
