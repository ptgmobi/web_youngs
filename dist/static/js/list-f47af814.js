var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e};import{_ as d,d as n,h as p,Z as u,r as c,L as m,q as b,$ as _,o as v,c as f,x as g,e as y,v as h,s as w,z as V,U as j,A as k,a8 as x,V as F,N as U,O as C,y as O,f as S}from"./main-c289050e.js";import{u as P,s as Q}from"./useUtils-034ffd86.js";import{P as D}from"./index-19cba061.js";import{m as q}from"./message-7c571a95.js";import{_ as z}from"./lodash-6a3426b2.js";import{h as A,g as I}from"./new-format-0cb28217.js";import{c as $}from"./clipboard-52d8486c.js";import{A as N,a as E,b as R}from"./dsp-adcontrol-4c3e994d.js";import{_ as T}from"./index-15b94426.js";import"./clipboard-polyfill.text.esm-fc4f7791.js";import"./format-fb65a074.js";import"./moment-9bd84dc2.js";import"./dsp-advertiser-d95bf0ce.js";import"./dsp-7b5725df.js";const B={class:"controlBox w100 mb-10"},L={class:"flex jc-start flex-wrap w100"},Z={class:"flex"},G={class:"flex"},H=S(" 查询 "),J={class:"mb-10 w100"},K=S("新建广告系列"),M=["onClick"],W=["onClick"],X={class:"flex jc-around"},Y=S("编辑"),ee=S("复制"),ae=S("归档"),le={class:"w100 flex"},te=S("复制"),oe=n({name:"adserieslist"});var se,re=d(n((se=i({},oe),a(se,l({setup(e){const a=p(),l=p([{id:""}]),{status:t,adv_type:o,ind_cla:s,third_party:r,return_mode:d}=Q,{goNewUrl:n,openAlert:S}=P(),oe=u({status:"",adv_series_type:"",marbet_target:"",is_del:"1",value_type:"adv_series_name",value:""}),se=c({adv_id:"",st:"",et:""}),re=p(!1),ie=c({report_api:""});let de=c({dialogVisible:!1,cache:{item:{}},searchForm:oe.value,useData:oe.value,loading:!0,options:{status:t,adv_series_type:[{value:1,label:"动态商品促销"},{value:2,label:"固定链接推广"}],marbet_target:[{value:1,label:"再营销"},{value:2,label:"拉新"}],value_type:[{value:"adv_series_name",label:"广告系列名称"},{value:"ads_id",label:"广告系列ID"},{value:"descs",label:"描述"}]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}}),ne=c({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const pe=e=>{l.value=e},ue=async()=>{let e=l.value.map((e=>e.id)),a=ne.data.mode;if(a.toString(),a.toString(),"0"===a.toString()){const a=await be(e);q(a)&&fe()}},ce=()=>{de.useData=z.cloneDeep(de.searchForm),fe()};p([]);const me=()=>{n({url:"/adcontrol/adseries/create",query:{type:"create"}})},be=async e=>await N({ids:e,is_del:2}),_e=async e=>{S({text:`确认归档${e.row.adv_series_name}？`,title:"归档操作",buttonText:"确认"},(e=>async()=>{const{row:a,$index:l}=e,t=await be([a.id]);q(t)&&de.list.splice(l,1)})(e))},ve=e=>{se.adv_id=e.adv,e.date&&(se.st=e.date[0],se.et=e.date[1])},fe=async()=>{de.loading=!0;let e=i(i({page:de.pagination.listQuery.page,limit:de.pagination.listQuery.limit},oe.value),se);e[e.value_type]=e.value,delete e.value_type,delete e.value,e=A(e);const a=await E(e);if(a){const{data:e}=a;de.list=null==e?void 0:e.data,de.pagination.total=Number(e.count)}de.loading=!1};return m((()=>{ce()})),(e,l)=>{const t=b("el-option"),o=b("el-select"),s=b("el-form-item"),r=b("el-input"),i=b("el-checkbox"),d=b("el-button"),p=b("el-form"),u=b("el-table-column"),c=b("el-switch"),m=b("el-dialog"),S=_("loading");return v(),f("div",null,[g("div",B,[y(h(T),{onUp:ve,arr:["adv","date"]}),y(p,{modelValue:h(de).searchForm,"onUpdate:modelValue":l[6]||(l[6]=e=>h(de).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:w((()=>[g("div",L,[y(s,{label:""},{default:w((()=>[y(o,{modelValue:h(de).searchForm.status,"onUpdate:modelValue":l[0]||(l[0]=e=>h(de).searchForm.status=e),filterable:"",clearable:"",placeholder:"全部状态"},{default:w((()=>[(v(!0),f(U,null,C(h(de).options.status,(e=>(v(),k(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(s,{label:""},{default:w((()=>[y(o,{modelValue:h(de).searchForm.adv_series_type,"onUpdate:modelValue":l[1]||(l[1]=e=>h(de).searchForm.adv_series_type=e),filterable:"",clearable:"",placeholder:"广告类型"},{default:w((()=>[(v(!0),f(U,null,C(h(de).options.adv_series_type,(e=>(v(),k(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(s,{label:""},{default:w((()=>[y(o,{modelValue:h(de).searchForm.marbet_target,"onUpdate:modelValue":l[2]||(l[2]=e=>h(de).searchForm.marbet_target=e),filterable:"",clearable:"",placeholder:"营销目标"},{default:w((()=>[(v(!0),f(U,null,C(h(de).options.marbet_target,(e=>(v(),k(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),y(s,{label:""},{default:w((()=>[y(r,{modelValue:h(de).searchForm.value,"onUpdate:modelValue":l[4]||(l[4]=e=>h(de).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:w((()=>[y(o,{modelValue:h(de).searchForm.value_type,"onUpdate:modelValue":l[3]||(l[3]=e=>h(de).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:w((()=>[(v(!0),f(U,null,C(h(de).options.value_type,(e=>(v(),k(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),y(s,{label:""},{default:w((()=>[y(i,{modelValue:h(de).searchForm.is_del,"onUpdate:modelValue":l[5]||(l[5]=e=>h(de).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),g("div",Z,[y(s,{class:"mr-0",style:{"margin-right":"0px"}},{default:w((()=>[g("div",G,[y(d,{type:"primary",onClick:ce},{default:w((()=>[H])),_:1}),V(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),V(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> '),g("div",J,[y(d,{type:"primary",onClick:me},{default:w((()=>[K])),_:1}),y(o,{class:"ml-10",modelValue:h(ne).data.mode,"onUpdate:modelValue":l[7]||(l[7]=e=>h(ne).data.mode=e),filterable:"",placeholder:"批量操作",onChange:ue},{default:w((()=>[(v(!0),f(U,null,C(h(ne).options.mode,(e=>(v(),k(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),V(" table "),j((v(),k(h(x),{ref_key:"multipleTableRef",ref:a,center:"",data:h(de).list,class:"w100",border:"",onSelectionChange:pe},{default:w((()=>[y(u,{align:"center",type:"selection",width:"55"}),y(u,{sortable:"",prop:"id",label:"广告系列ID",align:"center"}),y(u,{sortable:"",width:"120",prop:"adv_series_name",label:"广告系列名称",align:"center"}),y(u,{sortable:"",prop:"status",label:"开关",align:"center"},{default:w((e=>[y(c,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onClick:a=>(async({row:e})=>{let a={id:e.id,status:e.status},l=await R(a);q(l)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),V(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),y(u,{sortable:"",prop:"status",label:"状态",align:"center"},{default:w((e=>[g("span",null,O(h(I)(e.row.status,h(de).options.status)),1)])),_:1}),y(u,{sortable:"",prop:"ad_group",label:"广告组",align:"center"},{default:w((e=>[V(" <span>{{scope.row.ad_group}}</span> "),g("span",{class:"color_primary cp",onClick:a=>(({row:e})=>{n({url:"/adcontrol/adgroup/list",query:{adseries:e.id,type:"list"}})})(e)},O(e.row.ad_group?e.row.ad_group.length:0),9,M)])),_:1}),y(u,{sortable:"",prop:"ad",label:"广告",align:"center"},{default:w((e=>[V(" <span>{{scope.row.ad}}</span> "),g("span",{class:"color_primary cp",onClick:a=>(({row:e})=>{n({url:"/adcontrol/ad/list",query:{adseries:e.id,type:"list"}})})(e)},O(e.row.ad?e.row.ad.length:0),9,W)])),_:1}),y(u,{width:"200",label:"操作",align:"center"},{default:w((e=>[g("div",X,[y(d,{class:"cp",type:"primary",onClick:a=>(({row:e})=>{const{id:a}=e;n({url:`/adcontrol/adseries/edit/${a}`,query:{type:"edit"}})})(e)},{default:w((()=>[Y])),_:2},1032,["onClick"]),y(d,{class:"cp",type:"primary"},{default:w((()=>[ee])),_:1}),V(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),y(d,{class:"cp",type:"danger",onClick:a=>_e(e),disabled:2===e.row.is_del},{default:w((()=>[ae])),_:2},1032,["onClick","disabled"])])])),_:1}),y(u,{sortable:"",width:"120",prop:"adv_series_type",label:"广告类型",align:"center"},{default:w((e=>[g("span",null,O(h(I)(e.row.adv_series_type,h(de).options.adv_series_type)),1)])),_:1}),y(u,{sortable:"",width:"120",prop:"marbet_target",label:"营销目标",align:"center"},{default:w((e=>[g("span",null,O(h(I)(e.row.marbet_target,h(de).options.marbet_target)),1)])),_:1}),y(u,{sortable:"",width:"120",prop:"create_email",label:"创建人",align:"center"}),y(u,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),y(u,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"}),y(u,{sortable:"",width:"160",prop:"imp_number",label:"展示数",align:"center"})])),_:1},8,["data"])),[[S,h(de).loading]]),V(" 分页 "),g("div",le,[j(y(D,{page:h(de).pagination.listQuery.page,"onUpdate:page":l[8]||(l[8]=e=>h(de).pagination.listQuery.page=e),limit:h(de).pagination.listQuery.limit,"onUpdate:limit":l[9]||(l[9]=e=>h(de).pagination.listQuery.limit=e),total:h(de).pagination.total,"page-sizes":h(de).pagination.pageSizes,onPagination:fe},null,8,["page","limit","total","page-sizes"]),[[F,h(de).pagination.total]])]),V(" 复制 "),y(m,{modelValue:re.value,"onUpdate:modelValue":l[11]||(l[11]=e=>re.value=e),title:"Report Api",width:"90%"},{default:w((()=>[g("p",null,O(h(ie).report_api),1),y(d,{class:"cp mr-10",type:"default",onClick:l[10]||(l[10]=e=>{return a=h(ie).report_api,void $(a);var a})},{default:w((()=>[te])),_:1})])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-18292af0"]]);export{re as default};
