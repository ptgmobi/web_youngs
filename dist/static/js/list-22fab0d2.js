import{d as l,r as e,I as a,L as o,q as t,c as i,z as n,e as s,s as d,v as r,N as c,o as p,x as u,y,A as f,O as w}from"./main-0a777472.js";import{m as b}from"./message-d6ce123e.js";import{c as _}from"./new-format-7f959bed.js";import{s as m,a as h,b as v}from"./serverclick-10514641.js";const k={key:0},V={key:0},O={key:0},C={key:0},A={key:0},S={key:0},U={key:0},j={key:0},g=l({__name:"list",setup(l){let g=e({androidArr:[],iOSArr:[]});const q=(l,e)=>{let a=l,o=[];for(const t in a)if(a.hasOwnProperty(t)){const l=a[t];let i={country:t,platform:e};i=Object.assign({},i,l),o.push(i)}return o},E=l=>{let e=new Set;if(Array.isArray(l))return l.map((l=>{l.all.map((l=>{e.add(null==l?void 0:l.lib_type)}))})),Array.from(e).sort()},F=a((()=>q(g.androidArr,"1"))),T=a((()=>q(g.iOSArr,"2"))),x=a((()=>E(F.value))),P=a((()=>E(T.value))),z=l=>{l.showtype=!l.showtype},I=async(l,e)=>{if("all"===e){let a={update_type:e,all:void 0};a=Object.assign({},a,l);a=_(["platform","thread_offer_num"],a),delete a.all;const o=await h(a);b(o)&&(l.showtype=!l.showtype)}if("one"===e){let a={update_type:e};a=Object.assign({},a,l);a=_(["id","platform","lib_status","lib_quantity_proportion"],a);const o=await v(a);b(o)&&(l.showtype=!l.showtype)}},L=async()=>{const l=await m({}),{data:e}=l;let a=(l=>{let e=[],a=[];for(const o in l)if(l.hasOwnProperty(o)){let t=l[o],i=o.split("_");t.platform=i[0],t.country=i[1],t.showtype=!1,t.all.map((l=>{l.showtype=!1})),"1"===t.platform&&e.push(t),"2"===t.platform&&a.push(t)}return{androidObj:e,iOSObj:a}})(e);g.androidArr=a.androidObj,g.iOSArr=a.iOSObj};return o((()=>{L()})),(l,e)=>{const a=t("el-table-column"),o=t("el-input"),b=t("el-button"),_=t("el-switch"),m=t("el-table");return p(),i(c,null,[n(" Android "),s(m,{center:"",data:r(F),class:"w100 mt-30",border:""},{default:d((()=>[s(a,{label:"Android服预配置"},{default:d((()=>[s(a,{label:"国家"},{default:d((l=>[u("span",null,y(l.row.country),1)])),_:1}),s(a,{label:"请求数"},{default:d((l=>[u("span",null,y(l.row.request),1)])),_:1}),s(a,{label:"总设备数"},{default:d((l=>[u("span",null,y(l.row.all_device_num),1)])),_:1}),s(a,{label:"每线程offer数"},{default:d((l=>[n(" <span>{{scope.row.content.thread_offer_num}}</span> "),s(o,{placeholder:"请输入内容",modelValue:l.row.thread_offer_num,"onUpdate:modelValue":e=>l.row.thread_offer_num=e,disabled:!l.row.showtype},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),s(a,{label:"操作"},{default:d((l=>[l.row.showtype?n("v-if",!0):(p(),f(b,{key:0,class:"cp",type:"default",icon:"Edit",circle:"",onClick:e=>z(l.row)},null,8,["onClick"])),l.row.showtype?(p(),f(b,{key:1,class:"cp",type:"primary",icon:"Edit",circle:"",onClick:e=>I(l.row,"all")},null,8,["onClick"])):n("v-if",!0),n(" <i class=\"el-icon-edit cp\" \n          v-if='!scope.row.showtype'\n          @click='changeShowType(scope.row)'></i>\n          <i class=\"el-icon-edit-outline cp\" \n          v-if='scope.row.showtype'\n          @click='submitFun(scope.row, \"all\")'></i> ")])),_:1})])),_:1}),(p(!0),i(c,null,w(r(x),(l=>(p(),f(a,{key:l,label:l},{default:d((()=>[s(a,{label:"设备数"},{default:d((e=>[(p(!0),i(c,null,w(e.row.all,(e=>(p(),i(c,null,[e.lib_type===l?(p(),i("span",k,y(e.lib_device_num),1)):n("v-if",!0)],64)))),256))])),_:2},1024),s(a,{label:"状态"},{default:d((e=>[(p(!0),i(c,null,w(e.row.all,(e=>(p(),i(c,null,[e.lib_type===l?(p(),i("div",V,[s(_,{disabled:!e.showtype,modelValue:e.lib_status,"onUpdate:modelValue":l=>e.lib_status=l,"active-value":1,"inactive-value":2},null,8,["disabled","modelValue","onUpdate:modelValue"])])):n("v-if",!0)],64)))),256))])),_:2},1024),s(a,{label:"线程数"},{default:d((e=>[(p(!0),i(c,null,w(e.row.all,(e=>(p(),i(c,null,[e.lib_type===l?(p(),i("div",O,[s(o,{placeholder:"请输入内容",modelValue:e.lib_quantity_proportion,"onUpdate:modelValue":l=>e.lib_quantity_proportion=l,disabled:!e.showtype},null,8,["modelValue","onUpdate:modelValue","disabled"])])):n("v-if",!0)],64)))),256))])),_:2},1024),s(a,{label:"操作"},{default:d((e=>[(p(!0),i(c,null,w(e.row.all,(e=>(p(),i(c,null,[e.lib_type===l?(p(),i("div",C,[e.showtype?n("v-if",!0):(p(),f(b,{key:0,class:"cp",type:"default",icon:"Edit",circle:"",onClick:l=>z(e)},null,8,["onClick"])),e.showtype?(p(),f(b,{key:1,class:"cp",type:"primary",icon:"Edit",circle:"",onClick:l=>I(e,"one")},null,8,["onClick"])):n("v-if",!0),n(" <i class=\"el-icon-edit cp\" \n              v-if='!p.showtype'\n              @click='changeShowType(p)'></i>\n              <i class=\"el-icon-edit-outline cp\" \n              v-if='p.showtype'\n              @click='submitFun(p, \"one\")'></i> ")])):n("v-if",!0)],64)))),256))])),_:2},1024)])),_:2},1032,["label"])))),128))])),_:1},8,["data"]),n(" iOS "),s(m,{center:"",data:r(T),style:{width:"100%"},class:"w100 mt-30",border:""},{default:d((()=>[s(a,{label:"iOS服预配置"},{default:d((()=>[s(a,{label:"国家"},{default:d((l=>[u("span",null,y(l.row.country),1)])),_:1}),s(a,{label:"请求数"},{default:d((l=>[u("span",null,y(l.row.request),1)])),_:1}),s(a,{label:"总设备数"},{default:d((l=>[u("span",null,y(l.row.all_device_num),1)])),_:1}),s(a,{label:"每线程offer数"},{default:d((l=>[n(" <span>{{scope.row.content.thread_offer_num}}</span> "),s(o,{placeholder:"请输入内容",modelValue:l.row.thread_offer_num,"onUpdate:modelValue":e=>l.row.thread_offer_num=e,disabled:!l.row.showtype},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),s(a,{label:"操作"},{default:d((l=>[l.row.showtype?n("v-if",!0):(p(),f(b,{key:0,class:"cp",type:"default",icon:"Edit",circle:"",onClick:e=>z(l.row)},null,8,["onClick"])),l.row.showtype?(p(),f(b,{key:1,class:"cp",type:"primary",icon:"Edit",circle:"",onClick:e=>I(l.row,"all")},null,8,["onClick"])):n("v-if",!0),n(" <i class=\"el-icon-edit cp\" \n          v-if='!scope.row.showtype'\n          @click='changeShowType(scope.row)'></i>\n          <i class=\"el-icon-edit-outline cp\" \n          v-if='scope.row.showtype'\n          @click='submitFun(scope.row, \"all\")'></i> ")])),_:1})])),_:1}),(p(!0),i(c,null,w(r(P),(l=>(p(),f(a,{key:l,label:l},{default:d((()=>[s(a,{label:"设备数"},{default:d((e=>[(p(!0),i(c,null,w(e.row.all,(e=>(p(),i(c,null,[e.lib_type===l?(p(),i("div",A,[u("span",null,y(e.lib_device_num),1)])):n("v-if",!0)],64)))),256))])),_:2},1024),s(a,{label:"状态"},{default:d((e=>[(p(!0),i(c,null,w(e.row.all,(e=>(p(),i(c,null,[e.lib_type===l?(p(),i("div",S,[s(_,{disabled:!e.showtype,modelValue:e.lib_status,"onUpdate:modelValue":l=>e.lib_status=l,"active-value":1,"inactive-value":2},null,8,["disabled","modelValue","onUpdate:modelValue"])])):n("v-if",!0)],64)))),256))])),_:2},1024),s(a,{label:"线程数"},{default:d((e=>[(p(!0),i(c,null,w(e.row.all,(e=>(p(),i(c,null,[e.lib_type===l?(p(),i("div",U,[s(o,{placeholder:"请输入内容",modelValue:e.lib_quantity_proportion,"onUpdate:modelValue":l=>e.lib_quantity_proportion=l,disabled:!e.showtype},null,8,["modelValue","onUpdate:modelValue","disabled"])])):n("v-if",!0)],64)))),256))])),_:2},1024),s(a,{label:"操作"},{default:d((e=>[(p(!0),i(c,null,w(e.row.all,(e=>(p(),i(c,null,[e.lib_type===l?(p(),i("div",j,[e.showtype?n("v-if",!0):(p(),f(b,{key:0,class:"cp",type:"default",icon:"Edit",circle:"",onClick:l=>z(e)},null,8,["onClick"])),e.showtype?(p(),f(b,{key:1,class:"cp",type:"primary",icon:"Edit",circle:"",onClick:l=>I(e,"one")},null,8,["onClick"])):n("v-if",!0),n(" <i class=\"el-icon-edit cp\" \n              v-if='!p.showtype'\n              @click='changeShowType(p)'></i>\n              <i class=\"el-icon-edit-outline cp\" \n              v-if='p.showtype'\n              @click='submitFun(p, \"one\")'></i> ")])):n("v-if",!0)],64)))),256))])),_:2},1024)])),_:2},1032,["label"])))),128))])),_:1},8,["data"])],64)}}});export{g as default};
