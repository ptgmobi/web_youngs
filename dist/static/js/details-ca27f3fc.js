var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,l,r)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r,o=(e,o)=>{for(var t in o||(o={}))l.call(o,t)&&s(e,t,o[t]);if(a)for(var t of a(o))r.call(o,t)&&s(e,t,o[t]);return e};import{_ as t,d,h as m,r as u,L as i,q as n,o as c,c as _,z as p,e as f,s as v,v as b,x as g,P as y,N as F,O as V,A as h,f as x,y as j,g as w}from"./main-dae9cd13.js";import{u as U,s as O}from"./useUtils-0c0cc193.js";import{c as q,d as k,e as C}from"./dsp-adcontrol-88f17c98.js";import{m as P}from"./message-2d1d3f7c.js";import{_ as M}from"./index-d2a78e62.js";import{d as z,e as D}from"./new-format-299c060c.js";import{s as E}from"./validate-31aaa08c.js";import{_ as I}from"./lodash-edd1f566.js";const L={class:"content-con from-one flex column"},N={class:"content-con from-one flex column"},S={class:"w100 flex"},$=x(" 确认 "),A=x(" 取消 ");var R=t(d({setup(e){const{adv_type:a,ind_cla:l,third_party:r,return_mode:s,time_zone:t}=O,{getRouterData:d,getCommonCountryList:R,goNewUrl:B}=U();let{proxy:G}=w();const H="此项必填";let J=m("create");const K={id:void 0,adv_name:"",adv_series_name:"",descs:"",marbet_target:1,adv_series_type:1,adv_series_budget:void 0,status:1,is_del:0},Q=(e,a,l)=>{const{max:r}=e;E(a,r)?l(void 0):l(new Error("值的长度不能大于${}"))},T=u({ruleForm:K,rules:{adv_series_name:[{required:!0,message:H,trigger:["blur","change"]},{validator:Q,max:100,trigger:["blur","change"]}],adv_name:[{required:!0,message:H,trigger:["blur","change"]}],descs:[{validator:Q,max:200,trigger:["blur","change"]}],adv_series_type:[{required:!0,message:H,trigger:["blur","change"]}],adv_series_budget:[{required:!0,message:H,trigger:["blur","change"]}]},options:{adv_type:a,adv_series_type:[{value:1,label:"动态商品促销"},{value:2,label:"固定链接推广"}],marbet_target:[{value:1,label:"再营销"},{value:2,label:"拉新"}],adv_name:[]}}),W=()=>{G.$refs.ruleForm.validate((e=>{if(!e)return!1;Y()}))},X=["id","adv_id","adv_series_type","adv_series_budget"],Y=async()=>{let e=y(T.ruleForm);if(e=z(e),e=D(e,X),"create"===J.value){delete e.id;const a=await q(e);P(a)&&Z()}if("edit"===J.value){const a=await k(e);P(a)&&Z()}},Z=()=>{B({url:"/adcontrol/adseries/list"})},ee=()=>{var e,a;let{query:l,params:r}=d();if(J.value=null!=(a=null==(e=l.type)?void 0:e.toString())?a:"",(async()=>{})(),"create"===J.value&&(T.ruleForm=I.cloneDeep(K)),"edit"===J.value){const{id:e}=r;(async e=>{const a=await C(e),{data:l}=a;T.ruleForm=o(o({},T.ruleForm),l),T.ruleForm})(e)}};return i((()=>{ee()})),(e,a)=>{const l=n("el-input"),r=n("el-form-item"),s=n("el-option"),o=n("el-select"),t=n("el-radio"),d=n("el-radio-group"),m=n("el-form"),u=n("el-button");return c(),_("div",null,[p(" form "),f(m,{ref:"ruleForm",enctype:"multipart/form-data",rules:b(T).rules,model:b(T).ruleForm,"label-width":"150px","label-position":"right",class:"flex column",disabled:"edit"===b(J)&&2===b(T).ruleForm.is_del},{default:v((()=>[f(b(M),{title:"基础信息"}),g("div",L,[f(r,{class:"self-el-form-item",label:"广告主系列名称:",prop:"adv_series_name"},{default:v((()=>[f(l,{modelValue:b(T).ruleForm.adv_series_name,"onUpdate:modelValue":a[0]||(a[0]=e=>b(T).ruleForm.adv_series_name=e),modelModifiers:{trim:!0},class:"form-one",placeholder:""},null,8,["modelValue"])])),_:1}),f(r,{class:"self-el-form-item",label:"广告主名称:",prop:"adv_name"},{default:v((()=>[f(o,{modelValue:b(T).ruleForm.adv_name,"onUpdate:modelValue":a[1]||(a[1]=e=>b(T).ruleForm.adv_name=e),filterable:"",placeholder:"请选择",class:"form-one"},{default:v((()=>[(c(!0),_(F,null,V(b(T).options.adv_name,(e=>(c(),h(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(r,{class:"self-el-form-item",label:"描述:",prop:"descs"},{default:v((()=>[f(l,{modelValue:b(T).ruleForm.descs,"onUpdate:modelValue":a[2]||(a[2]=e=>b(T).ruleForm.descs=e),modelModifiers:{trim:!0},class:"form-one",placeholder:"",type:"textarea"},null,8,["modelValue"])])),_:1})]),f(b(M),{title:"目标与预算"}),g("div",N,[f(r,{class:"self-el-form-item",label:"营销目标:",prop:"marbet_target"},{default:v((()=>[f(d,{class:"form-one",modelValue:b(T).ruleForm.marbet_target,"onUpdate:modelValue":a[3]||(a[3]=e=>b(T).ruleForm.marbet_target=e)},{default:v((()=>[(c(!0),_(F,null,V(b(T).options.marbet_target,(e=>(c(),h(t,{label:e.value},{default:v((()=>[x(j(e.label),1)])),_:2},1032,["label"])))),256))])),_:1},8,["modelValue"])])),_:1}),f(r,{class:"self-el-form-item",label:"广告类型:",prop:"adv_series_type"},{default:v((()=>[f(o,{modelValue:b(T).ruleForm.adv_series_type,"onUpdate:modelValue":a[4]||(a[4]=e=>b(T).ruleForm.adv_series_type=e),filterable:"",placeholder:"请选择",class:"form-one"},{default:v((()=>[(c(!0),_(F,null,V(b(T).options.adv_series_type,(e=>(c(),h(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(r,{class:"self-el-form-item",label:"广告日预算（美元）:",prop:"adv_series_budget"},{default:v((()=>[f(l,{modelValue:b(T).ruleForm.adv_series_budget,"onUpdate:modelValue":a[5]||(a[5]=e=>b(T).ruleForm.adv_series_budget=e),modelModifiers:{trim:!0},class:"form-one",placeholder:""},null,8,["modelValue"])])),_:1})])])),_:1},8,["rules","model","disabled"]),p(" form "),p(" footer "),g("div",S,[f(u,{type:"primary",onClick:W},{default:v((()=>[$])),_:1}),f(u,{type:"primary",onClick:Z},{default:v((()=>[A])),_:1})])])}}}),[["__scopeId","data-v-5175acd1"]]);export{R as default};
