!function(){function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t,a,n,r,l,u){try{var o=e[l](u),i=o.value}catch(c){return void a(c)}o.done?t(i):Promise.resolve(i).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,l){var u=e.apply(t,a);function o(e){n(u,r,l,o,i,"next",e)}function i(e){n(u,r,l,o,i,"throw",e)}o(void 0)}))}}System.register(["./index-legacy-973cee41.js","./fenix-legacy-28a5535d.js","./index-legacy-9a9a973e.js","./moment-legacy-2456bd0f.js","./message-legacy-1fd10f10.js","./new-format-legacy-08830c9e.js"],(function(e){"use strict";var a,n,l,u,o,i,c,s,d,f,p,v,b,m,h,g,_,w,y,V,D,x,k,O,C,U,P,j,R,S,A,E,N,Q,I,T,z,B,F,M;return{setters:[function(e){a=e.d,n=e.r,l=e.w,u=e.M,o=e.m,i=e.s,c=e.n,s=e.c,d=e.p,f=e.q,p=e.a,v=e.e,b=e.a4,m=e.o,h=e.N,g=e.a5,_=e.v,w=e.z,y=e.O,V=e.P,D=e.x,x=e.V,k=e.W,O=e.K,C=e.b,U=e.A},function(e){P=e.g,j=e.h,R=e.i,S=e.j,A=e.k,E=e.l,N=e.m,Q=e.n,I=e.o},function(e){T=e.P},function(e){z=e.h},function(e){B=e.m},function(e){F=e.a,M=e.o}],execute:function(){var q=a({props:{busData:{require:!0,default:function(){return{}},type:Object}},setup:function(e){var t=e,a=n({tableData:[{}]}),p=function(){var e=r(regeneratorRuntime.mark((function e(){var n,r,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={offer_id:t.busData.offer.offer_id},a.tableData=[],e.next=4,P(n);case 4:r=e.sent,l=r.data,u=l.sort((function(e,t){var a=Number(z(e.date,z.ISO_8601).format("X"));return Number(z(t.date,z.ISO_8601).format("X"))-a})),a.tableData=u;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l((function(){return t.busData.offer.offer_id}),(function(e,t){}),{immediate:!0}),u((function(){t.busData,p()})),function(e,t){var n=o("el-table-column"),r=o("el-table");return i(),c("div",null,[s(r,{data:f(a).tableData,style:{width:"100%"},border:""},{default:d((function(){return[s(n,{fixed:"",prop:"date",label:"Date",align:"center"}),s(n,{fixed:"",prop:"record",label:"Record",align:"center"}),s(n,{fixed:"",prop:"email",label:"User",align:"center"})]})),_:1},8,["data"])])}}}),K={class:"control-box w100 mb-10"},X={class:"mb-10"},Z=C(" Offer Create "),J={class:"flex jc-start flex-wrap w100"},L={class:"flex"},W={class:"flex"},$=C(" 查询 "),G={class:"body-box mt-10"},H={class:"flex"},Y={key:0},ee=C(" . "),te=C(" . "),ae=C(" . "),ne={class:"flex"},re={class:"w100 flex"},le=a({name:"fenix-offer-list"});e("default",a(t(t({},le),{},{setup:function(e){p(),v(!0);var a=v(!1);v(!1);var l=n({searchData:{adv_status:void 0,status:void 0,cvr_status:void 0,platform:void 0,attribute_provider:"",pub_name:"",offer_id:"",adv_offer:"",pkg:"",title:"",channel:"",pid:"",country:"",channel_type:void 0},tableData:[],options:{status:[{value:"1",label:"开"},{value:"2",label:"关"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}],attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],pub:[{id:0,pub_name:""}],channel_type:[{value:"1",label:"BUZZ"},{value:"2",label:"SDK"}],dailyCapCount:{},cvr:{}},pagination:{pageSizes:["20","50","100","500","1000"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}}}),C=n({});b(l,"tableData");var P=function(){var e=r(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.row,n={id:a.id,status:a.status},e.next=5,j(n);case 5:r=e.sent,B(r)||(a.status=1===a.status?2:1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=r(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.row,n={id:a.id,cvr_status:a.cvr_status},n=F(n),e.next=5,R(n);case 5:r=e.sent,B(r)||(a.cvr_status=1===a.cvr_status?2:1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=r(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.row,n={id:a.id,target_cvr:a.target_cvr},n=F(n),e.next=5,S(n);case 5:r=e.sent,B(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=r(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,a=t.data,l.options.pub=a;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=r(regeneratorRuntime.mark((function e(){var t,a,n,r,u,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q();case 2:for(r in t=e.sent,a=t.data,n={},a)Object.prototype.hasOwnProperty.call(a,r)&&(u=a[r],o=u.split("_"),i={click_w:o[0],installs:o[1],cvr_w:o[2]},n[r]=i);l.options.cvr=n;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=r(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:t=e.sent,a=t.data,l.options.dailyCapCount=a;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([ue(),ie(),oe()]));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=r(regeneratorRuntime.mark((function e(){var a,n,r,u,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in a={page:l.pagination.listQuery.page,limit:l.pagination.listQuery.limit},n=t({},l.searchData))Object.prototype.hasOwnProperty.call(n,r)&&(u=n[r])&&(a[r]=u);return e.next=5,A(a);case 5:o=e.sent,l.tableData=o.data.data,l.pagination.total=o.data.paging.count;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){se()},fe=function(){var e=r(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.row,e.next=3,E(a.id);case 3:n=e.sent,B(n)&&l.tableData.splice(t.$index,1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(e,t){var a;a="".concat(e.offer_id,"_").concat(t.slotid);var n=l.options.dailyCapCount[a];return n?": ".concat(n):""};m((function(){})),u((function(){ce(),se(),window.onpopstate=function(){}})),h((function(){})),g((function(){}));return function(e,t){var n=o("el-button"),r=o("el-option"),u=o("el-select"),p=o("el-form-item"),v=o("el-input"),b=o("el-form"),m=o("el-table-column"),h=o("el-switch"),g=o("el-popconfirm"),j=o("el-table"),R=o("el-dialog");return i(),c("div",null,[_("div",K,[_("div",X,[w(' <router-link to="/fenix/offer/create">\n          <el-button type="primary">\n            Offer Create\n          </el-button>\n        </router-link> '),s(n,{type:"primary",onClick:t[0]||(t[0]=function(e){M("/fenix/offer/create")})},{default:d((function(){return[Z]})),_:1})]),s(b,{modelValue:f(l).searchData,"onUpdate:modelValue":t[14]||(t[14]=function(e){return f(l).searchData=e}),inline:!0,class:"flex jc-between w100 ai-end"},{default:d((function(){return[_("div",J,[s(p,{label:""},{default:d((function(){return[s(u,{modelValue:f(l).searchData.adv_status,"onUpdate:modelValue":t[1]||(t[1]=function(e){return f(l).searchData.adv_status=e}),clearable:"",class:"search-con",placeholder:"Adv Status"},{default:d((function(){return[(i(!0),c(y,null,V(f(l).options.status,(function(e){return i(),U(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(u,{modelValue:f(l).searchData.status,"onUpdate:modelValue":t[2]||(t[2]=function(e){return f(l).searchData.status=e}),clearable:"",class:"search-con",placeholder:"Status"},{default:d((function(){return[(i(!0),c(y,null,V(f(l).options.status,(function(e){return i(),U(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),w(' <el-form-item label="">\n            <el-select v-model="state.searchData.cvr_status" clearable class="search-con" placeholder="Cvr Status">\n              <el-option\n                v-for="item in state.options.status"\n                :key="item.value"\n                :label="item.label"\n                :value="item.value"\n              />\n            </el-select>\n          </el-form-item> '),s(p,{label:""},{default:d((function(){return[s(u,{modelValue:f(l).searchData.platform,"onUpdate:modelValue":t[3]||(t[3]=function(e){return f(l).searchData.platform=e}),clearable:"",class:"search-con",placeholder:"Platform"},{default:d((function(){return[(i(!0),c(y,null,V(f(l).options.platform,(function(e){return i(),U(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(u,{modelValue:f(l).searchData.attribute_provider,"onUpdate:modelValue":t[4]||(t[4]=function(e){return f(l).searchData.attribute_provider=e}),clearable:"",class:"search-con",placeholder:"Attribute Provider"},{default:d((function(){return[(i(!0),c(y,null,V(f(l).options.attribute_provider,(function(e){return i(),U(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(u,{modelValue:f(l).searchData.pub_name,"onUpdate:modelValue":t[5]||(t[5]=function(e){return f(l).searchData.pub_name=e}),clearable:"",class:"search-con",placeholder:"Pub Name"},{default:d((function(){return[(i(!0),c(y,null,V(f(l).options.pub,(function(e){var t;return i(),U(r,{key:e.id,label:e.pub_name,value:null!==(t=e.pub_name)&&void 0!==t?t:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(v,{modelValue:f(l).searchData.offer_id,"onUpdate:modelValue":t[6]||(t[6]=function(e){return f(l).searchData.offer_id=e}),placeholder:"Offer ID",class:"search-con"},null,8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(v,{modelValue:f(l).searchData.adv_offer,"onUpdate:modelValue":t[7]||(t[7]=function(e){return f(l).searchData.adv_offer=e}),placeholder:"Adv Offer",class:"search-con"},null,8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(v,{modelValue:f(l).searchData.pkg,"onUpdate:modelValue":t[8]||(t[8]=function(e){return f(l).searchData.pkg=e}),placeholder:"Pachage Name",class:"search-con"},null,8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(v,{modelValue:f(l).searchData.title,"onUpdate:modelValue":t[9]||(t[9]=function(e){return f(l).searchData.title=e}),placeholder:"Offer Title",class:"search-con"},null,8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(v,{modelValue:f(l).searchData.channel,"onUpdate:modelValue":t[10]||(t[10]=function(e){return f(l).searchData.channel=e}),placeholder:"Channel",class:"search-con"},null,8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(v,{modelValue:f(l).searchData.country,"onUpdate:modelValue":t[11]||(t[11]=function(e){return f(l).searchData.country=e}),placeholder:"Country",class:"search-con"},null,8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(v,{modelValue:f(l).searchData.pid,"onUpdate:modelValue":t[12]||(t[12]=function(e){return f(l).searchData.pid=e}),placeholder:"Pid",class:"search-con"},null,8,["modelValue"])]})),_:1}),s(p,{label:""},{default:d((function(){return[s(u,{modelValue:f(l).searchData.channel_type,"onUpdate:modelValue":t[13]||(t[13]=function(e){return f(l).searchData.channel_type=e}),clearable:"",class:"search-con",placeholder:"Channel Type"},{default:d((function(){return[(i(!0),c(y,null,V(f(l).options.channel_type,(function(e){return i(),U(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]),_("div",L,[s(p,{class:"mr-0",style:{"margin-right":"0px"}},{default:d((function(){return[_("div",W,[s(n,{type:"primary",onClick:de},{default:d((function(){return[$]})),_:1}),w(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])]})),_:1})])]})),_:1},8,["modelValue"]),w(' <el-input placeholder="请输入内容" v-model="searchData.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),w(" table "),_("div",G,[s(j,{data:f(l).tableData,class:"w100",height:"70vh",border:""},{default:d((function(){return[s(m,{sortable:"",fixed:"",prop:"offer_id",label:"Offer ID",align:"center",width:"60"}),s(m,{sortable:"",fixed:"",prop:"adv_offer",label:"Adv Offer",align:"center",width:"87"}),s(m,{sortable:"",fixed:"",prop:"channel",label:"Channel",align:"center",width:"42"}),s(m,{sortable:"",prop:"revenue",label:"Revenue",align:"center",width:"45"}),s(m,{sortable:"",prop:"pkg",label:"Package Name",align:"center",width:"100"}),s(m,{sortable:"",prop:"title",label:"Offer Title",align:"center",width:"90"}),s(m,{sortable:"",prop:"pid",label:"Pid",align:"center",width:"77"}),s(m,{sortable:"",prop:"country",label:"Country",align:"center",width:"40"}),s(m,{sortable:"",label:"Adv Status",align:"center",width:"47"},{default:d((function(e){return[_("div",null,[_("span",null,D(1===e.row.adv_status?"开":"关"),1)])]})),_:1}),s(m,{sortable:"",prop:"offer_id",label:"Click*w",align:"center",width:"55"},{default:d((function(e){var t;return[_("div",null,[_("span",null,D(null===(t=f(l).options.cvr[e.row.offer_id])||void 0===t?void 0:t.click_w),1)])]})),_:1}),s(m,{sortable:"",prop:"offer_id",label:"Installs",align:"center",width:"50"},{default:d((function(e){var t;return[_("div",null,[_("span",null,D(null===(t=f(l).options.cvr[e.row.offer_id])||void 0===t?void 0:t.installs),1)])]})),_:1}),s(m,{sortable:"",prop:"offer_id",label:"Cvr*w",align:"center",width:"48"},{default:d((function(e){var t;return[_("div",null,[_("span",null,D(null===(t=f(l).options.cvr[e.row.offer_id])||void 0===t?void 0:t.cvr_w),1)])]})),_:1}),s(m,{sortable:"",prop:"daily_cap",label:"Daily Cap",align:"center",width:"48"},{default:d((function(e){return[_("div",null,[_("span",null,D(e.row.daily_cap),1)])]})),_:1}),s(m,{sortable:"",label:"Target Cvr*w",align:"center",width:"150"},{default:d((function(e){return[_("div",H,[s(v,{modelValue:e.row.target_cvr,"onUpdate:modelValue":function(t){return e.row.target_cvr=t},placeholder:"Please input",class:"input-with-select mr-5"},null,8,["modelValue","onUpdate:modelValue"]),s(n,{class:"mr-5 scale-button",type:"default",icon:"Edit",circle:"",onClick:function(t){return le(e)}},null,8,["onClick"]),s(h,{modelValue:e.row.cvr_status,"onUpdate:modelValue":function(t){return e.row.cvr_status=t},class:"scale-button","active-value":1,"inactive-value":2,onChange:function(t){return z(e)}},null,8,["modelValue","onUpdate:modelValue","onChange"])])]})),_:1}),s(m,{sortable:"",label:"Traffic Data",align:"left",width:"200"},{default:d((function(e){return[e.row.traffic?(i(),c("div",Y,[(i(!0),c(y,null,V(JSON.parse(e.row.traffic),(function(t){return i(),c("div",{key:t},[_("div",null,[_("span",null,D(1===t.pub_status?"开":"关"),1),ee,_("span",null,D(t.pub),1),te,_("span",null,D(t.payout),1),ae,_("span",null,D(t.cap_daily),1),_("span",null,D(pe(e.row,t)),1)])])})),128))])):w("v-if",!0)]})),_:1}),s(m,{sortable:"",label:"Operation",align:"center",width:"130"},{default:d((function(e){return[w(' <router-link :to="getEditUrl(scope)">\n              <el-button\n                class="cp mr-5"\n                type="primary"\n                icon="Edit"\n                circle\n              ></el-button>\n            </router-link> '),s(n,{class:"cp mr-5",type:"primary",icon:"Edit",onClick:function(t){return a=e.row,n=function(e){var t=e.id;return"/fenix/offer/edit/".concat(t)}(a),void M(n);var a,n},circle:""},null,8,["onClick"]),s(h,{modelValue:e.row.status,"onUpdate:modelValue":function(t){return e.row.status=t},"active-value":1,"inactive-value":2,class:"mr-5",onChange:function(t){return P(e)}},null,8,["modelValue","onUpdate:modelValue","onChange"]),s(g,{title:"删除后无法再生成该Offer ID，请谨慎操作！",onConfirm:function(t){return fe(e)}},{reference:d((function(){return[s(n,{type:"danger",icon:"Delete",circle:""})]})),_:2},1032,["onConfirm"])]})),_:1}),s(m,{sortable:"",prop:"last_time",label:"Last Time",align:"center",width:"80"}),s(m,{sortable:"",label:"Platform",align:"center",width:"55"},{default:d((function(e){return[_("div",null,[_("span",null,D(1===e.row.platform?"Android":"iOS"),1)])]})),_:1}),s(m,{sortable:"",prop:"attribute_provider",label:"Attribute Provider",align:"center",width:"80"}),s(m,{sortable:"",label:"Record",align:"center",width:"52"},{default:d((function(e){var t=e.row;return[s(n,{class:"scale-button",icon:"View",circle:"",onClick:function(e){return function(e){C.offer=e,a.value=!0}(t)}},null,8,["onClick"])]})),_:1}),s(m,{sortable:"",label:"Comment",align:"center",width:"150"},{default:d((function(e){return[_("div",ne,[s(v,{modelValue:e.row.description,"onUpdate:modelValue":function(t){return e.row.description=t},placeholder:"Please input",class:"input-with-select mr-5"},null,8,["modelValue","onUpdate:modelValue"]),s(n,{class:"scale-button",type:"default",icon:"Edit",circle:""})])]})),_:1})]})),_:1},8,["data"])]),w(" 分页 "),_("div",re,[x(s(f(T),{page:f(l).pagination.listQuery.page,"onUpdate:page":t[15]||(t[15]=function(e){return f(l).pagination.listQuery.page=e}),limit:f(l).pagination.listQuery.limit,"onUpdate:limit":t[16]||(t[16]=function(e){return f(l).pagination.listQuery.limit=e}),total:f(l).pagination.total,"page-sizes":f(l).pagination.pageSizes,onPagination:se},null,8,["page","limit","total","page-sizes"]),[[k,f(l).pagination.total]])]),w(" record "),s(R,{modelValue:f(a),"onUpdate:modelValue":t[18]||(t[18]=function(e){return O(a)?a.value=e:a=e}),title:"日志",width:"80%","destroy-on-close":""},{default:d((function(){return[s(q,{modelValue:f(a),"onUpdate:modelValue":t[17]||(t[17]=function(e){return O(a)?a.value=e:a=e}),"bus-data":f(C)},null,8,["modelValue","bus-data"])]})),_:1},8,["modelValue"])])}}})))}}}))}();
