var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,t=(a,l,r)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[l]=r,o=(e,o)=>{for(var s in o||(o={}))l.call(o,s)&&t(e,s,o[s]);if(a)for(var s of a(o))r.call(o,s)&&t(e,s,o[s]);return e};import{_ as s,d,h as i,r as m,L as u,q as n,o as p,c,z as _,e as f,s as v,v as b,x as g,P as y,N as F,O as h,A as V,f as j,y as x,g as w}from"./main-4108d4c8.js";import{u as U,s as O}from"./useUtils-d0d2ed59.js";import{c as q,d as P,e as k}from"./dsp-adcontrol-8ad7d853.js";import{A as C}from"./dsp-advertiser-08383083.js";import{m as M}from"./message-c3fe1e43.js";import{_ as z}from"./index-bfd9e067.js";import{d as A,e as D}from"./new-format-e2d0b76c.js";import{s as E}from"./validate-31aaa08c.js";import{_ as I}from"./lodash-cc1290e8.js";const L={class:"content-con from-one flex column"},N={class:"content-con from-one flex column"},S={class:"w100 flex"},$=j(" 确认 "),R=j(" 取消 ");var B=s(d({setup(e){const{adv_type:a,ind_cla:l,third_party:r,return_mode:t,time_zone:s}=O,{getRouterData:d,getCommonCountryList:B,goNewUrl:G}=U();let{proxy:H}=w();const J="此项必填";let K=i("create");const Q={id:void 0,adv_id:"",adv_series_name:"",desc:"",marbet_target:1,adv_series_type:1,adv_series_budget:void 0,status:1,is_del:0},T=(e,a,l)=>{const{max:r}=e;E(a,r)?l(void 0):l(new Error("值的长度不能大于${}"))},W=m({ruleForm:Q,rules:{adv_series_name:[{required:!0,message:J,trigger:["blur","change"]},{validator:T,max:100,trigger:["blur","change"]}],adv_id:[{required:!0,message:J,trigger:["blur","change"]}],desc:[{validator:T,max:200,trigger:["blur","change"]}],adv_series_type:[{required:!0,message:J,trigger:["blur","change"]}],adv_series_budget:[{required:!0,message:J,trigger:["blur","change"]}]},options:{adv_type:a,adv_series_type:[{value:1,label:"动态商品促销"},{value:2,label:"固定链接推广"}],marbet_target:[{value:1,label:"再营销"},{value:2,label:"拉新"}],advertiser:[{adv_id:"",name:""}]}}),X=()=>{H.$refs.ruleForm.validate((e=>{if(!e)return!1;Z()}))},Y=["id","adv_series_type","adv_series_budget"],Z=async()=>{let e=y(W.ruleForm);if(e=A(e),e=D(e,Y),"create"===K.value){delete e.id;const a=await q(e);M(a)&&ee()}if("edit"===K.value){const a=await P(e);M(a)&&ee()}},ee=()=>{G({url:"/adcontrol/adseries/list"})},ae=()=>{var e,a;let{query:l,params:r}=d();if(K.value=null!=(a=null==(e=l.type)?void 0:e.toString())?a:"",(async()=>{Promise.all([C({limit:1e4,page:1})]).then((e=>{let a=e[0];W.options.advertiser=a.data.data}))})(),"create"===K.value&&(W.ruleForm=I.cloneDeep(Q)),"edit"===K.value){const{id:e}=r;(async e=>{const a=await k(e),{data:l}=a;W.ruleForm=o(o({},W.ruleForm),l),W.ruleForm})(e)}};return u((()=>{ae()})),(e,a)=>{const l=n("el-input"),r=n("el-form-item"),t=n("el-option"),o=n("el-select"),s=n("el-radio"),d=n("el-radio-group"),i=n("el-form"),m=n("el-button");return p(),c("div",null,[_(" form "),f(i,{ref:"ruleForm",enctype:"multipart/form-data",rules:b(W).rules,model:b(W).ruleForm,"label-width":"150px","label-position":"right",class:"flex column",disabled:"edit"===b(K)&&2===b(W).ruleForm.is_del},{default:v((()=>[f(b(z),{title:"基础信息"}),g("div",L,[f(r,{class:"self-el-form-item",label:"广告主系列名称:",prop:"adv_series_name"},{default:v((()=>[f(l,{modelValue:b(W).ruleForm.adv_series_name,"onUpdate:modelValue":a[0]||(a[0]=e=>b(W).ruleForm.adv_series_name=e),modelModifiers:{trim:!0},class:"form-one",placeholder:""},null,8,["modelValue"])])),_:1}),f(r,{class:"self-el-form-item",label:"广告主名称:",prop:"adv_name"},{default:v((()=>[f(o,{modelValue:b(W).ruleForm.adv_id,"onUpdate:modelValue":a[1]||(a[1]=e=>b(W).ruleForm.adv_id=e),filterable:"",placeholder:"请选择",class:"form-one"},{default:v((()=>[(p(!0),c(F,null,h(b(W).options.advertiser,(e=>(p(),V(t,{key:e.adv_id,label:e.name,value:e.adv_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(r,{class:"self-el-form-item",label:"描述:",prop:"desc"},{default:v((()=>[f(l,{modelValue:b(W).ruleForm.desc,"onUpdate:modelValue":a[2]||(a[2]=e=>b(W).ruleForm.desc=e),modelModifiers:{trim:!0},class:"form-one",placeholder:"",type:"textarea"},null,8,["modelValue"])])),_:1})]),f(b(z),{title:"目标与预算"}),g("div",N,[f(r,{class:"self-el-form-item",label:"营销目标:",prop:"marbet_target"},{default:v((()=>[f(d,{class:"form-one",modelValue:b(W).ruleForm.marbet_target,"onUpdate:modelValue":a[3]||(a[3]=e=>b(W).ruleForm.marbet_target=e)},{default:v((()=>[(p(!0),c(F,null,h(b(W).options.marbet_target,(e=>(p(),V(s,{label:e.value},{default:v((()=>[j(x(e.label),1)])),_:2},1032,["label"])))),256))])),_:1},8,["modelValue"])])),_:1}),f(r,{class:"self-el-form-item",label:"广告类型:",prop:"adv_series_type"},{default:v((()=>[f(o,{modelValue:b(W).ruleForm.adv_series_type,"onUpdate:modelValue":a[4]||(a[4]=e=>b(W).ruleForm.adv_series_type=e),filterable:"",placeholder:"请选择",class:"form-one"},{default:v((()=>[(p(!0),c(F,null,h(b(W).options.adv_series_type,(e=>(p(),V(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),f(r,{class:"self-el-form-item",label:"广告日预算（美元）:",prop:"adv_series_budget"},{default:v((()=>[f(l,{modelValue:b(W).ruleForm.adv_series_budget,"onUpdate:modelValue":a[5]||(a[5]=e=>b(W).ruleForm.adv_series_budget=e),modelModifiers:{trim:!0},class:"form-one",placeholder:"",type:"number"},null,8,["modelValue"])])),_:1})])])),_:1},8,["rules","model","disabled"]),_(" form "),_(" footer "),g("div",S,[f(m,{type:"primary",onClick:X},{default:v((()=>[$])),_:1}),f(m,{type:"primary",onClick:ee},{default:v((()=>[R])),_:1})])])}}}),[["__scopeId","data-v-929e9770"]]);export{B as default};
