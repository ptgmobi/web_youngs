import{d as e,ah as a,a as l,y as t,B as o,r as i,ai as r,i as n,s,g as d,v as u,f as c,h as p,P as m,c as f,Q as b,o as h,F as _,j as v,x as g,t as y,p as V,q as w}from"./vendor-691ef2b9.js";import{P as k}from"./index-c2230b6f.js";import{A as x,a as F,c as D}from"./buzz-2a3fdc99.js";import{m as j}from"./message-00de5233.js";import{_ as U}from"./lodash-76b8e0d6.js";import{h as C}from"./new-format-e267a6f6.js";import{_ as z}from"./device-16b6ff88.js";import{_ as A}from"./index-b80ff4ea.js";const P=e=>(V("data-v-0b56db22"),e=e(),w(),e),S={class:"controlBox w100 mb-10"},Q={class:"mb-10"},O=g("Offer Create"),N={class:"flex jc-start flex-wrap w100"},E={class:"flex"},B={class:"flex"},I=g("查询"),$={class:"flex jc-around"},L={class:"flex jc-around"},M=P((()=>s("span",{class:"cp icon ml-10"},[s("i",{class:"el-icon-edit"})],-1))),T=["textContent"],q={class:"flex jc-around"},K={class:"w100 flex"};var G=A(e({setup(e){const V=a({attribute_provider:[],platform:[],package_name:"",channel:"",id:"",offer_title:"",country:"",pid:""});let w=l([]);t({});let A=t({dialogVisible:!1,dialogVisibleDevice:!1,cache:{item:{},device:{}},searchForm:V.value,useData:V.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((e,a)=>{const l=5*a/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((e,a)=>{const l=(5*a+5)/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const P=()=>{A.useData=U.cloneDeep(A.searchForm),G()},G=async()=>{A.loading=!0;let e={page:A.pagination.listQuery.page,page_size:A.pagination.listQuery.limit};A.useData.attribute_provider&&(e.attribute_provider=A.useData.attribute_provider),A.useData.platform&&(e.platform=A.useData.platform),A.useData.package_name&&(e.pkg_name=A.useData.package_name),A.useData.channel&&(e.channel=A.useData.channel),A.useData.id&&(e.offer_id=A.useData.id),A.useData.offer_title&&(e.title=A.useData.offer_title),A.useData.country&&(e.country=A.useData.country),A.useData.pid&&(e.tracking_link=A.useData.pid);const a=await x(e),{data:l}=a;A.list=null==l?void 0:l.data,A.pagination.total=Number(l.count),A.loading=!1},H=()=>{};return o((()=>{P()})),(e,a)=>{const l=i("el-button"),t=i("router-link"),o=i("el-option"),V=i("el-select"),x=i("el-form-item"),U=i("el-input"),J=i("el-form"),R=i("el-table-column"),W=i("el-switch"),X=i("el-table"),Y=i("el-dialog"),Z=r("loading");return h(),n("div",null,[s("div",S,[s("div",Q,[d(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),u(t,{to:"/buzz/old-buzz/create"},{default:c((()=>[u(l,{type:"primary"},{default:c((()=>[O])),_:1})])),_:1})]),u(J,{inline:!0,modelValue:p(A).searchForm,"onUpdate:modelValue":a[8]||(a[8]=e=>p(A).searchForm=e),class:"flex jc-between w100 ai-end"},{default:c((()=>[s("div",N,[u(x,{label:""},{default:c((()=>[u(V,{modelValue:p(A).searchForm.attribute_provider,"onUpdate:modelValue":a[0]||(a[0]=e=>p(A).searchForm.attribute_provider=e),clearable:"",class:"search-con",placeholder:"Attribute Provider",style:{"min-width":"140px"}},{default:c((()=>[(h(!0),n(_,null,v(p(A).options.attribute_provider,(e=>(h(),f(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(x,{label:""},{default:c((()=>[u(V,{modelValue:p(A).searchForm.platform,"onUpdate:modelValue":a[1]||(a[1]=e=>p(A).searchForm.platform=e),clearable:"",class:"search-con",placeholder:"Platform",style:{"min-width":"95px"}},{default:c((()=>[(h(!0),n(_,null,v(p(A).options.platform,(e=>(h(),f(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(x,{label:""},{default:c((()=>[u(U,{placeholder:"Package Name",modelValue:p(A).searchForm.package_name,"onUpdate:modelValue":a[2]||(a[2]=e=>p(A).searchForm.package_name=e),class:"search-con",style:{"min-width":"120px"}},null,8,["modelValue"])])),_:1}),u(x,{label:""},{default:c((()=>[u(U,{placeholder:"Channel",modelValue:p(A).searchForm.channel,"onUpdate:modelValue":a[3]||(a[3]=e=>p(A).searchForm.channel=e),class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),u(x,{label:""},{default:c((()=>[u(U,{placeholder:"ID",modelValue:p(A).searchForm.id,"onUpdate:modelValue":a[4]||(a[4]=e=>p(A).searchForm.id=e),class:"search-con"},null,8,["modelValue"])])),_:1}),u(x,{label:""},{default:c((()=>[u(U,{placeholder:"Offer Title",modelValue:p(A).searchForm.offer_title,"onUpdate:modelValue":a[5]||(a[5]=e=>p(A).searchForm.offer_title=e),class:"search-con",style:{"min-width":"90px"}},null,8,["modelValue"])])),_:1}),u(x,{label:""},{default:c((()=>[u(U,{placeholder:"Country",modelValue:p(A).searchForm.country,"onUpdate:modelValue":a[6]||(a[6]=e=>p(A).searchForm.country=e),class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),u(x,{label:""},{default:c((()=>[u(U,{placeholder:"Pid",modelValue:p(A).searchForm.pid,"onUpdate:modelValue":a[7]||(a[7]=e=>p(A).searchForm.pid=e),class:"search-con"},null,8,["modelValue"])])),_:1})]),s("div",E,[u(x,{class:"mr-0",style:{"margin-right":"0px"}},{default:c((()=>[s("div",B,[u(l,{type:"primary",onClick:P},{default:c((()=>[I])),_:1}),d(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),d(' <el-input placeholder="请输入内容" v-model="data.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),d(" table "),m((h(),f(X,{center:"",data:p(A).list,class:"w100",height:"70vh",border:""},{default:c((()=>[u(R,{prop:"offer_id",label:"ID"}),u(R,{prop:"channel",label:"Channel"}),u(R,{prop:"pkg_name",label:"Package Name"}),u(R,{prop:"title",label:"Offer Title",width:"120"}),u(R,{prop:"attribute_provider",label:"Attribute Provider"}),u(R,{prop:"pid",label:"Pid"}),u(R,{prop:"platform",label:"Platform"},{default:c((e=>[g(y(1===Number(e.row.platform)?"Android":"iOS"),1)])),_:1}),u(R,{prop:"country",label:"Country"}),u(R,{prop:"payout",label:"Payout"}),u(R,{label:"Click Limitation(w)",width:"150"},{default:c((e=>[s("div",$,[u(U,{modelValue:e.row.max_clk_num,"onUpdate:modelValue":a=>e.row.max_clk_num=a,placeholder:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),u(l,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(async e=>{let a={id:e.id,max_clk_num:e.max_clk_num};a=C(a);let l=await F(a);j(l)})(e.row)},null,8,["onClick"])])])),_:1}),u(R,{label:"Site Click Limitation",width:"150"},{default:c((e=>[s("div",L,[u(U,{modelValue:e.row.site_clk_limit,"onUpdate:modelValue":a=>e.row.site_clk_limit=a,placeholder:""},null,8,["modelValue","onUpdate:modelValue"]),M])])),_:1}),u(R,{label:"Select Device"},{default:c((e=>[s("span",{textContent:y(e.row.device_count)},null,8,T),u(l,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(e.row,void(A.dialogVisibleDevice=!0))},null,8,["onClick"])])),_:1}),u(R,{width:"100",label:"Operation"},{default:c((e=>{return[s("div",q,[u(t,{to:(a=e.row,`/buzz/old-buzz/edit/${a.id}`)},{default:c((()=>[u(l,{class:"cp mr-10",type:"primary",icon:"Edit",circle:""})])),_:2},1032,["to"]),d(" <el-button class='cp mr-10' type=\"primary\" icon=\"Edit\" circle @click='editFun(scope.row)'></el-button> "),u(W,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onChange:a=>(async e=>{let a={id:e.id,status:e.status};a=C(a);const l=await D(a);j(l)})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])];var a})),_:1})])),_:1},8,["data"])),[[Z,p(A).loading]]),d(" 分页 "),s("div",K,[m(u(p(k),{total:p(A).pagination.total,"page-sizes":p(A).pagination.pageSizes,page:p(A).pagination.listQuery.page,"onUpdate:page":a[9]||(a[9]=e=>p(A).pagination.listQuery.page=e),limit:p(A).pagination.listQuery.limit,"onUpdate:limit":a[10]||(a[10]=e=>p(A).pagination.listQuery.limit=e),onPagination:G},null,8,["total","page-sizes","page","limit"]),[[b,p(A).pagination.total]])]),d(" device "),u(Y,{title:"diy_siteid",modelValue:p(A).dialogVisibleDevice,"onUpdate:modelValue":a[11]||(a[11]=e=>p(A).dialogVisibleDevice=e)},{default:c((()=>[u(z,{json:p(w),onKk:H},null,8,["json"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-0b56db22"]]);export{G as default};
