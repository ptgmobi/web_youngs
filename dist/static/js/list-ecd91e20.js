import{d as a,r as e,h as l,L as t,q as i,a0 as n,c as r,z as o,U as s,v as d,A as p,s as u,x as g,V as c,e as m,K as f,o as b,y as _}from"./main-0a777472.js";import{P as w}from"./index-2575c6ed.js";import{a as y,b as h}from"./advertiser-2f32b5dd.js";const v={class:"flex jc-around"},Q={class:"w100 flex"},k=a({__name:"list",setup(a){let k=e({loading:!1,list:[]}),D=l(!1);const j=e({pageSizes:["20","50","100","500","1000"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}});let x=e({data:[]});const z=async()=>{const a={page:j.listQuery.page,limit:j.listQuery.limit},e=await y(a),l=e.data.data;l.map((a=>(a.targeting?a.targeting=JSON.parse(a.targeting):a.targeting={geo:[]},a))),k.list=l,j.total=Number(e.data.paging.count)};return t((()=>{z()})),(a,e)=>{const l=i("el-table-column"),t=i("el-button"),y=i("el-table"),C=i("el-dialog"),P=n("loading");return b(),r("div",null,[o(" table "),s((b(),p(y,{center:"",data:d(k).list,class:"w100",border:""},{default:u((()=>[m(l,{sortable:"",align:"center",label:"Offer ID",prop:"offer_id",width:"120"},{default:u((a=>[g("span",null,_(a.row.offer_id),1)])),_:1}),m(l,{sortable:"",align:"center",label:"PKG",prop:"pkg_name","min-width":"150"},{default:u((a=>[g("span",null,_(a.row.pkg_name),1)])),_:1}),m(l,{sortable:"",align:"center",label:"Platform",prop:"platform",width:"100"},{default:u((a=>[g("span",null,_(a.row.targeting.os),1)])),_:1}),m(l,{sortable:"",align:"center",label:"Country",prop:"targeting",width:"100"},{default:u((a=>[g("span",null,_(a.row.targeting.geo.join(",")),1)])),_:1}),m(l,{sortable:"",align:"center",label:"Payout",prop:"payout","min-width":"50"},{default:u((a=>[g("span",null,_(a.row.payout),1)])),_:1}),m(l,{sortable:"",align:"center",label:"Daily Cap",prop:"daily_cap","min-width":"50"},{default:u((a=>[g("span",null,_(a.row.daily_cap),1)])),_:1}),m(l,{sortable:"",align:"center",label:"Kpi",prop:"kpi","min-width":"100"},{default:u((a=>[g("span",null,_(a.row.kpi),1)])),_:1}),m(l,{sortable:"",align:"center",label:"Last Modified",prop:"last_time","min-width":"95"},{default:u((a=>[g("span",null,_(a.row.last_time),1)])),_:1}),m(l,{sortable:"",align:"center",label:"Details","min-width":"140"},{default:u((a=>[g("div",v,[g("div",null,[g("span",null,_(a.row.details),1)]),m(t,{class:"cp ml-10 scale-button",type:"primary",icon:"View",circle:"",onClick:e=>(async a=>{const e={offer_id:a.row.offer_id},l=(await h(e)).data.data;x.data=l,D.value=!0})(a)},null,8,["onClick"])])])),_:1})])),_:1},8,["data"])),[[P,d(k).loading]]),o(" 分页 "),g("div",Q,[s(m(d(w),{page:d(j).listQuery.page,"onUpdate:page":e[0]||(e[0]=a=>d(j).listQuery.page=a),limit:d(j).listQuery.limit,"onUpdate:limit":e[1]||(e[1]=a=>d(j).listQuery.limit=a),total:d(j).total,"page-sizes":d(j).pageSizes,onPagination:z},null,8,["page","limit","total","page-sizes"]),[[c,d(j).total]])]),o(" busData "),m(C,{title:"日志",modelValue:d(D),"onUpdate:modelValue":e[2]||(e[2]=a=>f(D)?D.value=a:D=a)},{default:u((()=>[m(y,{data:d(x).data,style:{width:"100%"},border:""},{default:u((()=>[o(' <el-table-column\n          align="center"\n          prop="id"\n          label="ID">\n        </el-table-column> '),m(l,{align:"center",prop:"offer_id",label:"Offer ID"}),m(l,{align:"center",prop:"record",label:"Record"}),m(l,{align:"center",prop:"create_time",label:"Create Time"})])),_:1},8,["data"])])),_:1},8,["modelValue"])])}}});export{k as default};
