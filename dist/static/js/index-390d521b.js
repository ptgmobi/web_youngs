var O=Object.defineProperty;var M=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var Y=(f,s,l)=>s in f?O(f,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):f[s]=l,C=(f,s)=>{for(var l in s||(s={}))T.call(s,l)&&Y(f,l,s[l]);if(M)for(var l of M(s))q.call(s,l)&&Y(f,l,s[l]);return f};import{d as A,z as V,C as N,r as y,o as d,k as h,v,x as r,h as _,j as a,F as x,l as j,i as F,y as z,af as I,c as w,w as P,t as $,b as L}from"./vendor-bf64253d.js";import{f as R,h as G,i as K,j as H}from"./overview-ec717efc.js";import{g as k,a as J,t as B}from"./format-b76f9697.js";import{_ as Q}from"./lodash-05c10b51.js";import{h as U}from"./new-format-b98ea9a0.js";import{_ as W}from"./index-a9586341.js";import{_ as X}from"./index-1d6fe13a.js";import"./moment-1cf83a0b.js";const Z={class:"white-bg control-box flex jc-between ai-start p0-0"},ee={class:"flex jc-start flex-wrap ai-start"},ae={class:"flex"},te=z(" \u67E5\u8BE2 "),le=A({emits:["emitParent"],setup(f,{emit:s}){const l={adtype:"",channel_type:"",use_name:"",slot:"",country:"",date:k(6,"day")},e=V({shortcuts:[{text:"\u4ECA\u5929",value:k(0,"day")},{text:"\u6628\u5929",value:()=>J(1,1,"day")},{text:"\u6700\u8FD17\u5929",value:()=>k(6,"day")},{text:"\u6700\u8FD130\u5929",value:()=>k(29,"day")}],options:{adtype:["ssp","fenix"],channel_type:[{value:1,label:"\u4EE3\u7406"},{value:2,label:"API"},{value:3,label:"\u76F4\u5BA2"}],country:[{value:"",label:""}],user_name:[{label:"",value:""}],slot:[{value:"",label:""}]},data:l}),i=async()=>{const{data:o}=await R();e.options.user_name=o==null?void 0:o.user_name,e.options.slot=o==null?void 0:o.slot,e.options.country=o==null?void 0:o.country},p=()=>{},m=()=>{console.warn("set search data"),s("emitParent",Q.cloneDeep(I(e.data)))};return N(()=>{i(),m()}),(o,u)=>{const c=y("el-date-picker"),n=y("el-form-item"),b=y("el-option"),g=y("el-select"),D=y("el-button"),E=y("el-form");return d(),h("div",null,[v("div",Z,[r(E,{inline:!0,model:a(e).data,class:"flex jc-between ai-start w100"},{default:_(()=>[v("div",ee,[r(n,{label:"\u65E5\u671F\u9009\u62E9"},{default:_(()=>[r(c,{modelValue:a(e).data.date,"onUpdate:modelValue":u[0]||(u[0]=t=>a(e).data.date=t),class:"search-con",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",shortcuts:a(e).shortcuts,clearable:!1},null,8,["modelValue","shortcuts"])]),_:1}),r(n,{label:"\u5206\u6210\u65B9\u6CD5"},{default:_(()=>[r(g,{modelValue:a(e).data.adtype,"onUpdate:modelValue":u[1]||(u[1]=t=>a(e).data.adtype=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",onChange:p},{default:_(()=>[(d(!0),h(x,null,j(a(e).options.adtype,t=>(d(),w(b,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(n,{label:"\u4E1A\u52A1\u7C7B\u578B"},{default:_(()=>[r(g,{modelValue:a(e).data.channel_type,"onUpdate:modelValue":u[2]||(u[2]=t=>a(e).data.channel_type=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:p},{default:_(()=>[F(` <div class="flex jc-between p10 pt-0">
                <el-button type="primary" plain size="mini" @click="selectAllProduct()">\u5168\u9009</el-button>
                <el-button size="mini" type="danger" plain @click="unSelectedAllProduct()">\u6E05\u7A7A</el-button>
              </div> `),(d(!0),h(x,null,j(a(e).options.channel_type,(t,S)=>(d(),w(b,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(n,{label:"User Name"},{default:_(()=>[r(g,{modelValue:a(e).data.user_name,"onUpdate:modelValue":u[3]||(u[3]=t=>a(e).data.user_name=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:p},{default:_(()=>[(d(!0),h(x,null,j(a(e).options.user_name,(t,S)=>(d(),w(b,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(n,{label:"Slot"},{default:_(()=>[r(g,{modelValue:a(e).data.slot,"onUpdate:modelValue":u[4]||(u[4]=t=>a(e).data.slot=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:p},{default:_(()=>[(d(!0),h(x,null,j(a(e).options.slot,(t,S)=>(d(),w(b,{key:t,label:t.toString(),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),r(n,{label:"\u56FD\u5BB6"},{default:_(()=>[r(g,{modelValue:a(e).data.country,"onUpdate:modelValue":u[5]||(u[5]=t=>a(e).data.country=t),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:p},{default:_(()=>[(d(!0),h(x,null,j(a(e).options.country,(t,S)=>(d(),w(b,{key:t,label:t.toString(),value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),v("div",null,[v("div",ae,[r(D,{type:"primary",onClick:m},{default:_(()=>[te]),_:1})])])]),_:1},8,["model"])])])}}});const oe={class:"flex flex-wrap jc-between"},ne={class:"flex jc-between"},re={key:0,class:"color_primary"},se={key:1,class:"color_primary"},ue=A({props:{json:{require:!0,default:{},type:Object}},setup(f){const s=f,l={profit:"\u6BDB\u5229\u5408\u8BA1",revenue:"\u6536\u5165\u5408\u8BA1",cost:"\u652F\u51FA\u5408\u8BA1",profit_rate:"\u6BDB\u5229\u7387"},e={},i=V({baseData:s.json,data:e,titleMap:l,groupVal:["profit","revenue","cost"],groupRate:["profit_rate"]}),p=async()=>{let m=C({},i.baseData.data);m=U(m);const{data:o}=await G(m);if(Array.isArray(o)&&o.length!==0)i.data=o[0];else for(const u in i.data)Object.prototype.hasOwnProperty.call(i.data,u)&&(i.data[u]=0)};return P(()=>i.baseData,(m,o)=>{console.warn("get card data"),p()},{deep:!0}),N(()=>{}),(m,o)=>{const u=y("el-card");return d(),h("div",null,[v("div",oe,[(d(!0),h(x,null,j(a(i).titleMap,(c,n)=>(d(),w(u,{class:"box-card m10"},{default:_(()=>[v("div",ne,[v("h3",null,$(a(i).titleMap[n]),1),a(i).groupVal.includes(n)?(d(),h("h2",re,"$ "+$(a(i).data[n]),1)):F("v-if",!0),a(i).groupRate.includes(n)?(d(),h("h2",se,$(a(B)(a(i).data[n]*100))+" %",1)):F("v-if",!0)])]),_:2},1024))),256))])])}}});var ce=W(ue,[["__scopeId","data-v-422fd230"]]);const de=A({props:{json:{require:!0,default:{},type:Object}},setup(f){const s=f,l=V({data:{target:"profit"},options:{target:[{value:"profit",label:"\u6BDB\u5229"},{value:"revenue",label:"\u6536\u5165"},{value:"cost",label:"\u652F\u51FA"},{value:"profit_rate",label:"\u6BDB\u5229\u7387"}]}}),e=V({data:s.json,baseCharData:{},chartData:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{show:!0,backgroundColor:"#6a7985"}}},legend:{show:!0,data:["all"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"",type:"line",stack:"Total",emphasis:{focus:"series"},data:[]}]}});P(()=>e.data,(c,n)=>{console.warn("get chart data"),u()},{deep:!0});const i=()=>{var n;let c=l.options.target.find(b=>b.value===l.data.target);return(n=c==null?void 0:c.label)!=null?n:""},p=["6"],m=()=>{o()},o=()=>{var b;let c=l.data.target;console.log(c);let n=(b=e.baseCharData[c])!=null?b:[];if(p.includes(l.data.target.toString())){let g=n.map(D=>B(D*100,2));e.chartData.series[0].data=g}else{let g=n.map(D=>B(D,2));e.chartData.series[0].data=g}},u=async()=>{var b;let c=C({},e.data.data);c=U(c),e.chartData.xAxis[0].data=[],e.chartData.series[0].data=[];const{data:n}=await K(c);console.log(n),e.baseCharData=n,e.chartData.xAxis[0].data=(b=n==null?void 0:n.date)!=null?b:[],e.chartData.series[0].name=i(),o()};return(c,n)=>{const b=y("el-option"),g=y("el-select"),D=y("el-form-item"),E=y("el-form");return d(),h("div",null,[v("div",null,[r(E,{inline:!0,model:a(l).data,class:"flex jc-between w100"},{default:_(()=>[r(D,{label:"\u6307\u6807"},{default:_(()=>[r(g,{modelValue:a(l).data.target,"onUpdate:modelValue":n[0]||(n[0]=t=>a(l).data.target=t),placeholder:"Select",onChange:m},{default:_(()=>[(d(!0),h(x,null,j(a(l).options.target,t=>(d(),w(b,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),v("div",null,[r(a(X),{"chart-data":a(e).chartData},null,8,["chart-data"])])])}}}),ie={class:"mt-20"},pe=A({props:{json:{require:!0,default:{},type:Object}},setup(f){let l=V({data:f.json,list:[]});P(()=>l.data,(p,m)=>{console.warn("get table data"),e()},{deep:!0});const e=async()=>{let p=C({},l.data.data);p=U(p),l.list=[];const{data:m}=await H(p);l.list=m};let i=L(()=>{let p=[];return l.list.map(m=>{let o={},u=C({},m);for(const c in u)if(Object.prototype.hasOwnProperty.call(u,c)){const n=u[c];c.includes("rate")?o[c]=`${B(n*100,2)}%`:o[c]=B(n,2)}p.push(o)}),p});return(p,m)=>{const o=y("el-table-column"),u=y("el-table");return d(),h("div",ie,[F(" table "),r(u,{center:"",data:a(i),class:"w100",border:""},{default:_(()=>[r(o,{prop:"user_id",label:"User ID",align:"center"}),r(o,{prop:"account_email",label:"Account Email",align:"center"}),r(o,{prop:"user_name",label:"User Name",align:"center"}),r(o,{prop:"profit",label:"\u6BDB\u5229",align:"center"}),r(o,{prop:"revenue",label:"\u6536\u5165",align:"center"}),r(o,{prop:"cost",label:"\u652F\u51FA",align:"center"}),r(o,{prop:"profit_rate",label:"\u6BDB\u5229\u7387",align:"center"})]),_:1},8,["data"])])}}}),_e={class:"app-container"},je=A({setup(f){let s=V({data:{adtype:"",channel_type:"",use_name:"",slot:"",country:"",st:"",et:""}});const l=e=>{console.log(e),s.data.adtype=e.adtype,s.data.channel_type=e.channel_type,s.data.use_name=e.use_name,s.data.slot=e.slot,s.data.country=e.country,s.data.st=e.date[0],s.data.et=e.date[1]};return(e,i)=>(d(),h("div",_e,[r(a(le),{onEmitParent:l}),r(a(ce),{json:a(s)},null,8,["json"]),r(a(de),{json:a(s)},null,8,["json"]),r(a(pe),{json:a(s)},null,8,["json"])]))}});export{je as default};
