var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{d as o,z as s,C as i,b as n,r as u,k as c,v as d,x as p,h as m,j as b,i as f,O as h,P as v,o as g,F as y,l as k,y as x,c as V,t as C}from"./vendor-9471357d.js";import{P as j}from"./index-8c2b625f.js";import{W as w}from"./index-bd174af9.js";import{k as O}from"./overview-dba9355f.js";import{g as D,a as P}from"./format-15e3f823.js";import{_}from"./index-52af8688.js";import"./moment-9bd84dc2.js";const U={class:"search-box"},Y={class:"mb-10"},q={class:"flex jc-between ai-start"},Q={class:"flex jc-start ai-start flex-wrap"},z=x(" Run "),H={class:"mb-10"},I={style:{"margin-left":"10px"}},L={class:"w100 flex"};var S=_(o({setup(e){let o=s({shortcuts:[{text:"今天",value:D(0,"day")},{text:"昨天",value:()=>P(1,1,"day")},{text:"最近7天",value:()=>D(6,"day")}],clumon:{base:[{label:"Impression",value:"impression"},{label:"Click",value:"click"},{label:"CVR",value:"cvr"},{label:"Conversion",value:"conversion"},{label:"Revenue($)",value:"revenue"}],choice:[{label:"Date",value:"date",require:!0,width:"100"},{label:"Hour",value:"hour",require:!1},{label:"Country",value:"country",require:!1},{label:"Platform",value:"platform",require:!1},{label:"PKG",value:"pkg",require:!1},{label:"Offer",value:"offer",require:!1}]},search:{date:D(6,"day"),checkList:["date"],filter:{country:"",platform:"",pkg:"",offer:""}},options:{platform:[{value:"Android",label:"Android"},{value:"iOS",label:"iOS"}]},tableData:{all:[],arr:[]},exportExcel:{buttonName:"导出",tHeader:["日期"],filterVal:["date"],fileName:"test"},pagination:{pageSizes:["10","20","40","100"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}},handleClumon:[],busHandleClumon:[]});i((()=>{}));const _=n((()=>o.handleClumon.map((e=>e.label)))),S=n((()=>o.handleClumon.map((e=>e.value)))),E=async()=>{const e=o.search.checkList,s=M(e).map((e=>e.value)).join(",");let i=((e,o)=>{for(var s in o||(o={}))l.call(o,s)&&r(e,s,o[s]);if(a)for(var s of a(o))t.call(o,s)&&r(e,s,o[s]);return e})({page:o.pagination.listQuery.page,page_size:o.pagination.listQuery.limit,st:o.search.date[0],et:o.search.date[1]},o.search.filter);s&&(i.dimension=s);const n=await O(i),{data:u}=n;o.tableData.arr=u.data,o.pagination.total=parseInt(u.count)},M=e=>{const a=[];return o.clumon.choice.map((l=>{e.includes(l.value)&&a.push(l)})),a},N=e=>{const a=M(e);o.busHandleClumon=[...a,...o.clumon.base]},R=()=>{o.handleClumon=o.busHandleClumon,E()};return N(o.search.checkList),R(),(e,a)=>{const l=u("el-checkbox"),t=u("el-checkbox-group"),r=u("el-date-picker"),s=u("el-input"),i=u("el-option"),n=u("el-select"),O=u("el-button"),D=u("el-table-column"),P=u("el-table");return g(),c("div",null,[d("div",U,[d("div",Y,[p(t,{modelValue:b(o).search.checkList,"onUpdate:modelValue":a[0]||(a[0]=e=>b(o).search.checkList=e),onChange:N},{default:m((()=>[(g(!0),c(y,null,k(b(o).clumon.choice,(e=>(g(),V(l,{key:e.value,label:e.value,disabled:e.require},{default:m((()=>[x(C(e.label),1)])),_:2},1032,["label","disabled"])))),128))])),_:1},8,["modelValue"])]),d("div",q,[d("div",Q,[p(r,{modelValue:b(o).search.date,"onUpdate:modelValue":a[1]||(a[1]=e=>b(o).search.date=e),class:"mr-10 mb-10",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",shortcuts:b(o).shortcuts},null,8,["modelValue","shortcuts"]),p(s,{modelValue:b(o).search.filter.country,"onUpdate:modelValue":a[2]||(a[2]=e=>b(o).search.filter.country=e),placeholder:"Country",class:"mr-10 mb-10 search-con"},null,8,["modelValue"]),p(n,{modelValue:b(o).search.filter.platform,"onUpdate:modelValue":a[3]||(a[3]=e=>b(o).search.filter.platform=e),clearable:"",filterable:"",placeholder:"Platform",class:"mr-10 search-con"},{default:m((()=>[(g(!0),c(y,null,k(b(o).options.platform,(e=>(g(),V(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),p(s,{modelValue:b(o).search.filter.pkg,"onUpdate:modelValue":a[4]||(a[4]=e=>b(o).search.filter.pkg=e),placeholder:"Pkg",class:"mr-10 mb-10 search-con"},null,8,["modelValue"]),p(s,{modelValue:b(o).search.filter.offer,"onUpdate:modelValue":a[5]||(a[5]=e=>b(o).search.filter.offer=e),placeholder:"Offer",class:"mr-10 mb-10 search-con"},null,8,["modelValue"])]),p(O,{type:"primary",onClick:R},{default:m((()=>[z])),_:1})])]),f(" all "),f(' <el-table :data="tableData.all" border style="width: 100%" class="mb-10">\n      <el-table-column prop="impression" label="Impression" />\n      <el-table-column prop="click" label="Click" />\n      <el-table-column prop="revenue" label="Revenue($)" />\n      <el-table-column prop="conversion" label="Conversion" />\n    </el-table> '),d("div",H,[p(w,{"button-name":b(o).exportExcel.buttonName,list:b(o).tableData.arr,"t-header":b(_),"filter-val":b(S),filename:b(o).exportExcel.fileName},null,8,["button-name","list","t-header","filter-val","filename"])]),f(" arr "),p(P,{data:b(o).tableData.arr,border:!0,style:{width:"100%"}},{default:m((()=>[(g(!0),c(y,null,k(b(o).handleClumon,(e=>(g(),V(D,{key:e.value,align:"center",sortable:"",prop:e.value,label:e.label,width:e.width},{default:m((a=>[f(' <i class="el-icon-time"></i> '),d("span",I,C(a.row[e.value]),1)])),_:2},1032,["prop","label","width"])))),128))])),_:1},8,["data"]),d("div",L,[h(p(b(j),{page:b(o).pagination.listQuery.page,"onUpdate:page":a[6]||(a[6]=e=>b(o).pagination.listQuery.page=e),limit:b(o).pagination.listQuery.limit,"onUpdate:limit":a[7]||(a[7]=e=>b(o).pagination.listQuery.limit=e),total:b(o).pagination.total,"page-sizes":b(o).pagination.pageSizes,onPagination:E},null,8,["page","limit","total","page-sizes"]),[[v,b(o).pagination.total]])])])}}}),[["__scopeId","data-v-66630144"]]);export{S as default};
