import{d as a,r as e,e as l,M as t,m as i,a1 as n,s as r,n as o,z as s,V as d,q as p,A as u,p as c,c as g,v as m,x as b,W as f,K as _}from"./index-b160a4d6.js";import{P as w}from"./index-e884940e.js";import{a as y,b as v}from"./advertiser-bb062d7a.js";const h={class:"flex jc-around"},Q={class:"w100 flex"},k=a({__name:"list",setup(a){let k=e({loading:!1,list:[]}),x=l(!1);const D=e({pageSizes:["20","50","100","500","1000"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}});let j=e({data:[]});const z=async()=>{const a={page:D.listQuery.page,limit:D.listQuery.limit},e=await y(a),l=e.data.data;l.map((a=>(a.targeting=JSON.parse(a.targeting),a))),k.list=l,D.total=Number(e.data.paging.count)};return t((()=>{z()})),(a,e)=>{const l=i("el-table-column"),t=i("el-button"),y=i("el-table"),C=i("el-dialog"),P=n("loading");return r(),o("div",null,[s(" table "),d((r(),u(y,{center:"",data:p(k).list,class:"w100",border:""},{default:c((()=>[g(l,{sortable:"",align:"center",label:"Offer ID",prop:"offer_id",width:"120"},{default:c((a=>[m("span",null,b(a.row.offer_id),1)])),_:1}),g(l,{sortable:"",align:"center",label:"PKG",prop:"pkg_name","min-width":"150"},{default:c((a=>[m("span",null,b(a.row.pkg_name),1)])),_:1}),g(l,{sortable:"",align:"center",label:"Platform",prop:"platform",width:"100"},{default:c((a=>[m("span",null,b(a.row.targeting.os),1)])),_:1}),g(l,{sortable:"",align:"center",label:"Country",prop:"targeting",width:"100"},{default:c((a=>[m("span",null,b(a.row.targeting.geo.join(",")),1)])),_:1}),g(l,{sortable:"",align:"center",label:"Payout",prop:"payout","min-width":"50"},{default:c((a=>[m("span",null,b(a.row.payout),1)])),_:1}),g(l,{sortable:"",align:"center",label:"Daily Cap",prop:"daily_cap","min-width":"50"},{default:c((a=>[m("span",null,b(a.row.daily_cap),1)])),_:1}),g(l,{sortable:"",align:"center",label:"Kpi",prop:"kpi","min-width":"100"},{default:c((a=>[m("span",null,b(a.row.kpi),1)])),_:1}),g(l,{sortable:"",align:"center",label:"Last Modified",prop:"last_time","min-width":"95"},{default:c((a=>[m("span",null,b(a.row.last_time),1)])),_:1}),g(l,{sortable:"",align:"center",label:"Details","min-width":"140"},{default:c((a=>[m("div",h,[m("div",null,[m("span",null,b(a.row.details),1)]),g(t,{class:"cp ml-10 scale-button",type:"primary",icon:"View",circle:"",onClick:e=>(async a=>{const e={offer_id:a.row.offer_id},l=(await v(e)).data.data;j.data=l,x.value=!0})(a)},null,8,["onClick"])])])),_:1})])),_:1},8,["data"])),[[P,p(k).loading]]),s(" 分页 "),m("div",Q,[d(g(p(w),{page:D.listQuery.page,"onUpdate:page":e[0]||(e[0]=a=>D.listQuery.page=a),limit:D.listQuery.limit,"onUpdate:limit":e[1]||(e[1]=a=>D.listQuery.limit=a),total:D.total,"page-sizes":D.pageSizes,onPagination:z},null,8,["page","limit","total","page-sizes"]),[[f,D.total]])]),s(" busData "),g(C,{title:"日志",modelValue:p(x),"onUpdate:modelValue":e[2]||(e[2]=a=>_(x)?x.value=a:x=a)},{default:c((()=>[g(y,{data:p(j).data,style:{width:"100%"},border:""},{default:c((()=>[s(' <el-table-column\n          align="center"\n          prop="id"\n          label="ID">\n        </el-table-column> '),g(l,{align:"center",prop:"offer_id",label:"Offer ID"}),g(l,{align:"center",prop:"record",label:"Record"}),g(l,{align:"center",prop:"create_time",label:"Create Time"})])),_:1},8,["data"])])),_:1},8,["modelValue"])])}}});export{k as default};
