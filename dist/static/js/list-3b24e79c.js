import{_ as e,d as a,h as l,$ as t,r as s,L as o,q as i,a0 as n,c as r,x as u,e as d,s as p,v as c,z as m,U as b,A as f,a9 as _,V as v,K as g,o as y,N as h,O as w,f as V,y as x}from"./main-ce43ffdd.js";import{s as F}from"./setting-3cff26af.js";import{P as k}from"./index-2d86919d.js";import{m as j}from"./message-1c1d9ef1.js";import{_ as U}from"./lodash-6b3789ad.js";import{h as C,g as Q}from"./new-format-368dcfb0.js";import{u as D}from"./useUtils-d1805f03.js";import{c as S}from"./clipboard-c9959b6b.js";import{A as z,a as A}from"./dsp-audience-manage-e845978e.js";import"./clipboard-polyfill.text.esm-fc4f7791.js";const I={class:"controlBox w100 mb-10"},$={class:"flex jc-start flex-wrap w100"},q={class:"flex"},N={class:"flex"},M={class:"mb-10 w100"},O={class:"flex jc-around"},P={class:"w100 flex"},R=a({name:"adserieslist"});var T=e(a({...R,setup(e){const a=l(),R=l([{id:""}]),{adv_type:T,audience_manage_type:B,build_status:E,audit_status:K}=F,{goNewUrl:L,openAlert:G}=D(),H=t({status:"",type:"",build_status:"",is_del:"1",value_type:"name",value:""}),J=l({}),W=l(!1),X=s({report_api:""});let Y=s({dialogVisible:!1,cache:{item:{}},searchForm:H.value,useData:H.value,loading:!0,options:{adv_type:T,audience_manage_type:B,build_status:E,country:[],value_type:[{value:"id",label:"受众包ID"},{value:"name",label:"受众包名称"},{value:"descs",label:"描述"}]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});s({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const Z=e=>{R.value=e},ee=()=>{Y.useData=U.cloneDeep(Y.searchForm),te()};l([]);const ae=()=>{L({url:"/audienceManage/create",query:{type:"create"}})},le=e=>async()=>{const{row:a,$index:l}=e,t=await(async e=>await A({ids:e,is_del:2}))([a.id]);j(t)&&Y.list.splice(l,1)},te=async()=>{Y.loading=!0;let e={page:Y.pagination.listQuery.page,limit:Y.pagination.listQuery.limit,...H.value,...J.value};e[e.value_type]=e.value,delete e.value_type,delete e.value,e=C(e);const a=await z(e);if(a){const{data:e}=a;Y.list=null==e?void 0:e.data,Y.pagination.total=Number(e.count)}Y.loading=!1};return o((()=>{ee()})),(e,l)=>{const t=i("el-option"),s=i("el-select"),o=i("el-form-item"),F=i("el-input"),j=i("el-checkbox"),U=i("el-button"),C=i("el-form"),D=i("el-table-column"),z=i("el-dialog"),A=n("loading");return y(),r("div",null,[u("div",I,[d(C,{modelValue:c(Y).searchForm,"onUpdate:modelValue":l[5]||(l[5]=e=>c(Y).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:p((()=>[u("div",$,[m(" 全部受众包类型 "),d(o,{label:""},{default:p((()=>[d(s,{modelValue:c(Y).searchForm.type,"onUpdate:modelValue":l[0]||(l[0]=e=>c(Y).searchForm.type=e),filterable:"",clearable:"",placeholder:"全部受众包类型"},{default:p((()=>[(y(!0),r(h,null,w(c(Y).options.audience_manage_type,(e=>(y(),f(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(" 全部生成状态 "),d(o,{label:""},{default:p((()=>[d(s,{modelValue:c(Y).searchForm.build_status,"onUpdate:modelValue":l[1]||(l[1]=e=>c(Y).searchForm.build_status=e),filterable:"",clearable:"",placeholder:"全部生成状态"},{default:p((()=>[(y(!0),r(h,null,w(c(Y).options.build_status,(e=>(y(),f(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),m(" 输入 "),d(o,{label:""},{default:p((()=>[d(F,{modelValue:c(Y).searchForm.value,"onUpdate:modelValue":l[3]||(l[3]=e=>c(Y).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:p((()=>[d(s,{modelValue:c(Y).searchForm.value_type,"onUpdate:modelValue":l[2]||(l[2]=e=>c(Y).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:p((()=>[(y(!0),r(h,null,w(c(Y).options.value_type,(e=>(y(),f(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),d(o,{label:""},{default:p((()=>[d(j,{modelValue:c(Y).searchForm.is_del,"onUpdate:modelValue":l[4]||(l[4]=e=>c(Y).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),u("div",q,[d(o,{class:"mr-0",style:{"margin-right":"0px"}},{default:p((()=>[u("div",N,[d(U,{type:"primary",onClick:ee},{default:p((()=>[V(" 查询 ")])),_:1}),m(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),m(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> '),u("div",M,[d(U,{type:"primary",onClick:ae},{default:p((()=>[V("创建受众包")])),_:1})])]),m(" table "),b((y(),f(c(_),{ref_key:"multipleTableRef",ref:a,center:"",data:c(Y).list,class:"w100",border:"",onSelectionChange:Z},{default:p((()=>[m(" 受众包ID "),d(D,{sortable:"",width:"120",prop:"id",label:"受众包ID",align:"center"}),m(" 受众包名称 "),d(D,{sortable:"",width:"120",prop:"name",label:"受众包名称",align:"center"}),m(" 操作 "),d(D,{width:"200",label:"操作",align:"center"},{default:p((e=>[u("div",O,[d(U,{class:"cp",type:"primary",onClick:a=>(({row:e})=>{const{id:a}=e;L({url:`/audienceManage/edit/${a}`,query:{type:"edit",campaign_type:e.type}})})(e)},{default:p((()=>[V("编辑")])),_:2},1032,["onClick"]),m(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),d(U,{class:"cp",type:"danger",onClick:a=>(async e=>{G({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},le(e))})(e),disabled:2===e.row.is_del},{default:p((()=>[V("归档")])),_:2},1032,["onClick","disabled"])])])),_:1}),m(" 开关 "),m(' <el-table-column sortable\n        prop="status"\n        label="开关"\n        align="center"\n      >\n        <template #default="scope">\n          <el-switch\n            v-model="scope.row.status"\n            :active-value="1"\n            :inactive-value="2"\n            @click="changeStatus(scope)"\n          />\n        </template>\n      </el-table-column> '),m(" 国家 "),d(D,{sortable:"",width:"240",prop:"country",label:"受众包所在国家/地区",align:"center"},{default:p((e=>[m(" <span>{{getOptionsValue(scope.row.type, state.options.country)}}</span> "),u("p",null,x(e.row.country),1)])),_:1}),m(" 生成状态 "),d(D,{sortable:"",width:"120",prop:"build_status",label:"生成状态",align:"center"},{default:p((e=>[u("span",null,x(c(Q)(e.row.build_status,c(Y).options.build_status)),1)])),_:1}),m(" 覆盖人数 "),d(D,{sortable:"",width:"120",prop:"num_people",label:"覆盖人数",align:"center"}),m(" 描述 "),d(D,{sortable:"",width:"120",prop:"descs",label:"描述",align:"center"}),m(" 关联广告组 "),d(D,{sortable:"",width:"120",prop:"ad_group",label:"关联广告组",align:"center"}),m(" 创建人 "),d(D,{sortable:"",width:"120",prop:"create_email",label:"创建人",align:"center"}),m(" 创建时间 "),d(D,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),m(" 更新时间 "),d(D,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"})])),_:1},8,["data"])),[[A,c(Y).loading]]),m(" 分页 "),u("div",P,[b(d(k,{page:c(Y).pagination.listQuery.page,"onUpdate:page":l[6]||(l[6]=e=>c(Y).pagination.listQuery.page=e),limit:c(Y).pagination.listQuery.limit,"onUpdate:limit":l[7]||(l[7]=e=>c(Y).pagination.listQuery.limit=e),total:c(Y).pagination.total,"page-sizes":c(Y).pagination.pageSizes,onPagination:te},null,8,["page","limit","total","page-sizes"]),[[v,c(Y).pagination.total]])]),m(" 复制 "),d(z,{modelValue:c(W),"onUpdate:modelValue":l[9]||(l[9]=e=>g(W)?W.value=e:null),title:"Report Api",width:"90%"},{default:p((()=>[u("p",null,x(c(X).report_api),1),d(U,{class:"cp mr-10",type:"default",onClick:l[8]||(l[8]=e=>{return a=c(X).report_api,void S(a);var a})},{default:p((()=>[V("复制")])),_:1})])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-423ff78b"]]);export{T as default};
