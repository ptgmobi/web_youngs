!function(){function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function t(t){for(var n=1;n<arguments.length;n++){var l=null!=arguments[n]?arguments[n]:{};n%2?e(Object(l),!0).forEach((function(e){a(t,e,l[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):e(Object(l)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))}))}return t}function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t,a,n,l,r,u){try{var o=e[r](u),c=o.value}catch(i){return void a(i)}o.done?t(c):Promise.resolve(c).then(n,l)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(l,r){var u=e.apply(t,a);function o(e){n(u,l,r,o,c,"next",e)}function c(e){n(u,l,r,o,c,"throw",e)}o(void 0)}))}}var r=document.createElement("style");r.innerHTML=".box-card[data-v-422fd230]{width:240px;height:60px}.box-card .valueBox[data-v-422fd230]{overflow:hidden}.box-card .valueBox .value-box[data-v-422fd230]{margin:8px 0;display:flex;justify-content:space-between}.box-card .valueBox .value-box .value-right[data-v-422fd230]{width:120px;display:flex;justify-content:space-between;align-items:flex-end}.box-card .valueBox .value-box .value-right .value-val[data-v-422fd230]{width:100%;margin-left:10px;text-align:right;overflow:hidden}.small_icon[data-v-422fd230]{font-size:12px}\n",document.head.appendChild(r),System.register(["./vendor-legacy-9b72e15f.js","./overview-legacy-6132226a.js","./format-legacy-b6794641.js","./lodash-legacy-08b68016.js","./new-format-legacy-0800fe3a.js","./index-legacy-29193966.js","./index-legacy-97038da5.js","./index-legacy-40153303.js","./moment-legacy-2456bd0f.js"],(function(e){"use strict";var a,n,r,u,o,c,i,s,d,f,p,v,b,m,y,h,g,x,_,j,w,D,O,V,k,P,C,S,A,R,U,E,M,Y;return{setters:[function(e){a=e.d,n=e.z,r=e.C,u=e.ad,o=e.r,c=e.o,i=e.k,s=e.v,d=e.x,f=e.h,p=e.j,v=e.F,b=e.l,m=e.i,y=e.y,h=e.ae,g=e.c,x=e.w,_=e.t,j=e.q,w=e.s,D=e.b},function(e){O=e.f,V=e.h,k=e.i,P=e.j},function(e){C=e.g,S=e.a,A=e.t},function(e){R=e._},function(e){U=e.h},function(e){E=e._},function(e){M=e._},function(e){Y=e.W},function(){}],execute:function(){var N={class:"white-bg control-box flex jc-between ai-start p0-0"},q={class:"flex jc-start flex-wrap ai-start"},z={class:"flex"},B=y(" 查询 "),I=a({emits:["emitParent"],setup:function(e,t){var a=t.emit,y={adtype:"",channel_type:"",user_name:"",slot:"",country:"",date:C(6,"day")},x=n({shortcuts:[{text:"今天",value:C(0,"day")},{text:"昨天",value:function(){return S(1,1,"day")}},{text:"最近7天",value:function(){return C(6,"day")}},{text:"最近30天",value:function(){return C(29,"day")}}],options:{adtype:["ssp","fenix"],channel_type:[{value:1,label:"代理"},{value:2,label:"API"},{value:3,label:"直客"}],country:[{value:"",label:""}],user_name:[{label:"",value:""}],slot:[{value:"",label:""}]},data:y}),_=function(){var e=l(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,a=t.data,x.options.user_name=null==a?void 0:a.user_name,x.options.slot=null==a?void 0:a.slot,x.options.country=null==a?void 0:a.country;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){},w=function(){console.warn("set search data"),a("emitParent",R.cloneDeep(h(x.data)))};return r((function(){_(),w()})),u((function(){_(),w()})),function(e,t){var a=o("el-date-picker"),n=o("el-form-item"),l=o("el-option"),r=o("el-select"),u=o("el-button"),y=o("el-form");return c(),i("div",null,[s("div",N,[d(y,{inline:!0,model:p(x).data,class:"flex jc-between ai-start w100"},{default:f((function(){return[s("div",q,[d(n,{label:"日期选择"},{default:f((function(){return[d(a,{modelValue:p(x).data.date,"onUpdate:modelValue":t[0]||(t[0]=function(e){return p(x).data.date=e}),class:"search-con",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",shortcuts:p(x).shortcuts,clearable:!1},null,8,["modelValue","shortcuts"])]})),_:1}),d(n,{label:"分成方法"},{default:f((function(){return[d(r,{modelValue:p(x).data.adtype,"onUpdate:modelValue":t[1]||(t[1]=function(e){return p(x).data.adtype=e}),class:"search-con",clearable:"",placeholder:"搜索",onChange:j},{default:f((function(){return[(c(!0),i(v,null,b(p(x).options.adtype,(function(e){return c(),g(l,{key:e,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),d(n,{label:"业务类型"},{default:f((function(){return[d(r,{modelValue:p(x).data.channel_type,"onUpdate:modelValue":t[2]||(t[2]=function(e){return p(x).data.channel_type=e}),class:"search-con",clearable:"",placeholder:"搜索",filterable:"",onChange:j},{default:f((function(){return[m(' <div class="flex jc-between p10 pt-0">\n                <el-button type="primary" plain size="mini" @click="selectAllProduct()">全选</el-button>\n                <el-button size="mini" type="danger" plain @click="unSelectedAllProduct()">清空</el-button>\n              </div> '),(c(!0),i(v,null,b(p(x).options.channel_type,(function(e,t){return c(),g(l,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),d(n,{label:"User Name"},{default:f((function(){return[d(r,{modelValue:p(x).data.user_name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return p(x).data.user_name=e}),class:"search-con",clearable:"",placeholder:"搜索",filterable:"",onChange:j},{default:f((function(){return[(c(!0),i(v,null,b(p(x).options.user_name,(function(e,t){return c(),g(l,{key:e.toString(),label:e.toString(),value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),d(n,{label:"Slot"},{default:f((function(){return[d(r,{modelValue:p(x).data.slot,"onUpdate:modelValue":t[4]||(t[4]=function(e){return p(x).data.slot=e}),class:"search-con",clearable:"",placeholder:"搜索","collapse-tags":"",filterable:"",onChange:j},{default:f((function(){return[(c(!0),i(v,null,b(p(x).options.slot,(function(e,t){return c(),g(l,{key:e.toString(),label:e.toString(),value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),d(n,{label:"国家"},{default:f((function(){return[d(r,{modelValue:p(x).data.country,"onUpdate:modelValue":t[5]||(t[5]=function(e){return p(x).data.country=e}),class:"search-con",clearable:"",placeholder:"搜索","collapse-tags":"",filterable:"",onChange:j},{default:f((function(){return[(c(!0),i(v,null,b(p(x).options.country,(function(e,t){return c(),g(l,{key:e.toString(),label:e.toString(),value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]),s("div",null,[s("div",z,[d(u,{type:"primary",onClick:w},{default:f((function(){return[B]})),_:1})])])]})),_:1},8,["model"])])])}}}),H=function(e){return j("data-v-422fd230"),e=e(),w(),e},L={class:"flex flex-wrap jc-between"},T={class:"flex jc-between"},F={key:0,class:"color_primary"},G=H((function(){return s("span",{class:"small_icon"},"$",-1)})),W={key:1,class:"color_primary"},$=H((function(){return s("span",{class:"small_icon"},"%",-1)})),J=a({props:{json:{require:!0,default:{},type:Object}},setup:function(e){var a=n({baseData:e.json,data:{},titleMap:{profit:"毛利合计",revenue:"收入合计",cost:"支出合计",profit_rate:"毛利率"},groupVal:["profit","revenue","cost"],groupRate:["profit_rate"]}),u=function(){var e=l(regeneratorRuntime.mark((function e(){var n,l,r,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t({},a.baseData.data),n=U(n),e.next=4,V(n);case 4:if(l=e.sent,r=l.data,Array.isArray(r)&&0!==r.length)a.data=r[0];else for(u in a.data)Object.prototype.hasOwnProperty.call(a.data,u)&&(a.data[u]=0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return x((function(){return a.baseData}),(function(e,t){console.warn("get card data"),u()}),{deep:!0}),r((function(){})),function(e,t){var n=o("el-card");return c(),i("div",null,[s("div",L,[(c(!0),i(v,null,b(p(a).titleMap,(function(e,t){return c(),g(n,{class:"box-card m10"},{default:f((function(){return[s("div",T,[s("h3",null,_(p(a).titleMap[t]),1),p(a).groupVal.includes(t)?(c(),i("h2",F,[G,y(" "+_(p(a).data[t]),1)])):m("v-if",!0),p(a).groupRate.includes(t)?(c(),i("h2",W,[y(_(p(A)(100*p(a).data[t]))+" ",1),$])):m("v-if",!0)])]})),_:2},1024)})),256))])])}}}),K=E(J,[["__scopeId","data-v-422fd230"]]),Q=a({props:{json:{require:!0,default:{},type:Object}},setup:function(e){var a=e,r=n({data:{target:"cost"},options:{target:[{value:"profit",label:"毛利"},{value:"revenue",label:"收入"},{value:"cost",label:"支出"},{value:"profit_rate",label:"毛利率"}]}}),u=n({data:a.json,baseCharData:{},chartData:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{show:!0,backgroundColor:"#6a7985"}}},legend:{show:!0,data:["all"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"",type:"line",stack:"Total",emphasis:{focus:"series"},data:[]}]}});x((function(){return u.data}),(function(e,t){console.warn("get chart data"),j()}),{deep:!0});var m=function(){var e,t=r.options.target.find((function(e){return e.value===r.data.target}));return null!==(e=null==t?void 0:t.label)&&void 0!==e?e:""},y=["6"],h=function(){_()},_=function(){var e,t=r.data.target,a=null!==(e=u.baseCharData[t])&&void 0!==e?e:[];if(y.includes(r.data.target.toString())){var n=a.map((function(e){return A(100*e,2)}));u.chartData.series[0].data=n}else{var l=a.map((function(e){return A(e,2)}));u.chartData.series[0].data=l}u.chartData.series[0].name=m()},j=function(){var e=l(regeneratorRuntime.mark((function e(){var a,n,l,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t({},u.data.data),n=U(n),u.chartData.xAxis[0].data=[],u.chartData.series[0].data=[],e.next=6,k(n);case 6:l=e.sent,r=l.data,u.baseCharData=r,u.chartData.xAxis[0].data=null!==(a=null==r?void 0:r.date)&&void 0!==a?a:[],u.chartData.series[0].name=m(),_();case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(e,t){var a=o("el-option"),n=o("el-select"),l=o("el-form-item"),m=o("el-form");return c(),i("div",null,[s("div",null,[d(m,{inline:!0,model:p(r).data,class:"flex jc-between w100"},{default:f((function(){return[d(l,{label:"指标"},{default:f((function(){return[d(n,{modelValue:p(r).data.target,"onUpdate:modelValue":t[0]||(t[0]=function(e){return p(r).data.target=e}),placeholder:"Select",onChange:h},{default:f((function(){return[(c(!0),i(v,null,b(p(r).options.target,(function(e){return c(),g(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]),s("div",null,[d(p(M),{"chart-data":p(u).chartData},null,8,["chart-data"])])])}}}),X={class:"mt-20"},Z={class:"flex jc-end mb-10"},ee=a({props:{json:{require:!0,default:{},type:Object}},setup:function(e){var a=n({data:e.json,list:[],exportExcel:{buttonName:"导出",tHeader:["日期"],filterVal:["date"],fileName:"profit"}}),r=n([{value:"user_id",label:"User ID"},{value:"account_email",label:"Account Email"},{value:"user_name",label:"User Name"},{value:"profit",label:"毛利"},{value:"revenue",label:"收入"},{value:"cost",label:"支出"},{value:"profit_rate",label:"毛利率"}]);x((function(){return a.data}),(function(e,t){console.warn("get table data"),u()}),{deep:!0});var u=function(){var e=l(regeneratorRuntime.mark((function e(){var n,l,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t({},a.data.data),n=U(n),a.list=[],e.next=5,P(n);case 5:l=e.sent,r=l.data,a.list=r;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=["profit_rate"],h=D((function(){var e=[];return a.list.map((function(a){var n={},l=t({},a);for(var r in l)if(Object.prototype.hasOwnProperty.call(l,r)){var u=l[r];y.includes(r)?n[r]="".concat(A(100*u,2),"%"):n[r]=u}e.push(n)})),e})),_=D((function(){return r.map((function(e){return e.label}))})),j=D((function(){return r.map((function(e){return e.value}))}));return function(e,t){var n=o("el-table-column"),l=o("el-table");return c(),i("div",X,[s("div",Z,[d(Y,{"button-name":p(a).exportExcel.buttonName,list:p(h),"t-header":p(_),"filter-val":p(j),filename:p(a).exportExcel.fileName},null,8,["button-name","list","t-header","filter-val","filename"])]),m(" table "),d(l,{center:"",data:p(h),class:"w100",border:""},{default:f((function(){return[(c(!0),i(v,null,b(p(r),(function(e){var t;return c(),g(n,{key:e.value,prop:e.value,label:e.label,fixed:null!==(t=null==e?void 0:e.fixed)&&void 0!==t&&t,align:"center"},null,8,["prop","label","fixed"])})),128))]})),_:1},8,["data"])])}}}),te={class:"app-container"},ae=a({name:"Profit"});e("default",a(t(t({},ae),{},{setup:function(e){var t=n({data:{adtype:"",channel_type:"",user_name:"",slot:"",country:"",st:"",et:""}}),a=function(e){t.data.adtype=e.adtype,t.data.channel_type=e.channel_type,t.data.user_name=e.user_name,t.data.slot=e.slot,t.data.country=e.country,t.data.st=e.date[0],t.data.et=e.date[1]};return function(e,n){return c(),i("div",te,[d(p(I),{onEmitParent:a}),d(p(K),{json:p(t)},null,8,["json"]),d(p(Q),{json:p(t)},null,8,["json"]),d(p(ee),{json:p(t)},null,8,["json"])])}}})))}}}))}();
