import{_ as e,d as a,a0 as l,r as t,M as o,m as r,a1 as i,s as n,n as u,v as s,z as d,c,p,q as m,O as f,P as b,V as h,A as _,b as v,x as g,W as y,E as V,G as w,H as x}from"./index-b160a4d6.js";import{P as k}from"./index-e884940e.js";import{A as F,a as D,b as U,c as C}from"./buzz-bb516d14.js";import{m as A}from"./message-6c553f21.js";import{_ as j}from"./lodash-ad752a46.js";import{a as z}from"./new-format-f712eb45.js";const P=e=>(w("data-v-29c9e5d6"),e=e(),x(),e),O={class:"controlBox w100 mb-10"},S={class:"mb-10"},Q=v(" Offer Create "),E={class:"flex jc-start flex-wrap w100"},N={class:"flex"},B={class:"flex"},I=v(" 查询 "),M={class:"flex jc-around"},$={class:"flex jc-around"},T=P((()=>s("span",null,"-",-1))),q={class:"flex mt-10"},G={class:"flex jc-around"},H={class:"w100 flex"},L=a({name:"buzz-list"});var W=e(a({...L,setup(e){const a=l({attribute_provider:[],platform:[],package_name:"",channel:"",id:"",offer_title:"",country:"",pid:""});let w=t({dialogVisible:!1,cache:{item:{},device:{}},searchForm:a.value,useData:a.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((e,a)=>{const l=5*a/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((e,a)=>{const l=(5*a+5)/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["50","100","500","1000"],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const x=()=>{w.useData=j.cloneDeep(w.searchForm),L()},P=e=>{const a=(e.cutoff_end-e.cutoff_start)*e.device_num;return a?a.toFixed(0):""},L=async()=>{w.loading=!0;let e={page:w.pagination.listQuery.page,limit:w.pagination.listQuery.limit};w.useData.attribute_provider&&(e.attribute_provider=w.useData.attribute_provider),w.useData.platform&&(e.platform=w.useData.platform),w.useData.package_name&&(e.pkg_name=w.useData.package_name),w.useData.channel&&(e.channel=w.useData.channel),w.useData.id&&(e.offer_id=w.useData.id),w.useData.offer_title&&(e.title=w.useData.offer_title),w.useData.country&&(e.country=w.useData.country),w.useData.pid&&(e.tracking_link=w.useData.pid);const a=await C(e),{data:l}=a;w.list=null==l?void 0:l.data,w.pagination.total=Number(l.count),w.loading=!1};return o((()=>{x()})),(e,a)=>{const l=r("el-button"),t=r("router-link"),o=r("el-option"),C=r("el-select"),j=r("el-form-item"),W=r("el-input"),J=r("el-form"),K=r("el-table-column"),R=r("el-switch"),X=r("el-table"),Y=i("loading");return n(),u("div",null,[s("div",O,[s("div",S,[d(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),c(t,{to:"/buzz/create"},{default:p((()=>[c(l,{type:"primary"},{default:p((()=>[Q])),_:1})])),_:1})]),c(J,{modelValue:m(w).searchForm,"onUpdate:modelValue":a[8]||(a[8]=e=>m(w).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:p((()=>[s("div",E,[c(j,{label:""},{default:p((()=>[c(C,{modelValue:m(w).searchForm.attribute_provider,"onUpdate:modelValue":a[0]||(a[0]=e=>m(w).searchForm.attribute_provider=e),clearable:"",class:"search-con",placeholder:"Attribute Provider",style:{"min-width":"140px"}},{default:p((()=>[(n(!0),u(f,null,b(m(w).options.attribute_provider,(e=>(n(),_(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),c(j,{label:""},{default:p((()=>[c(C,{modelValue:m(w).searchForm.platform,"onUpdate:modelValue":a[1]||(a[1]=e=>m(w).searchForm.platform=e),clearable:"",class:"search-con",placeholder:"Platform",style:{"min-width":"95px"}},{default:p((()=>[(n(!0),u(f,null,b(m(w).options.platform,(e=>(n(),_(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),c(j,{label:""},{default:p((()=>[c(W,{modelValue:m(w).searchForm.package_name,"onUpdate:modelValue":a[2]||(a[2]=e=>m(w).searchForm.package_name=e),placeholder:"Package Name",class:"search-con",style:{"min-width":"120px"}},null,8,["modelValue"])])),_:1}),c(j,{label:""},{default:p((()=>[c(W,{modelValue:m(w).searchForm.channel,"onUpdate:modelValue":a[3]||(a[3]=e=>m(w).searchForm.channel=e),placeholder:"Channel",class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),c(j,{label:""},{default:p((()=>[c(W,{modelValue:m(w).searchForm.id,"onUpdate:modelValue":a[4]||(a[4]=e=>m(w).searchForm.id=e),placeholder:"ID",class:"search-con"},null,8,["modelValue"])])),_:1}),c(j,{label:""},{default:p((()=>[c(W,{modelValue:m(w).searchForm.offer_title,"onUpdate:modelValue":a[5]||(a[5]=e=>m(w).searchForm.offer_title=e),placeholder:"Offer Title",class:"search-con",style:{"min-width":"90px"}},null,8,["modelValue"])])),_:1}),c(j,{label:""},{default:p((()=>[c(W,{modelValue:m(w).searchForm.country,"onUpdate:modelValue":a[6]||(a[6]=e=>m(w).searchForm.country=e),placeholder:"Country",class:"search-con",style:{"min-width":"80px"}},null,8,["modelValue"])])),_:1}),c(j,{label:""},{default:p((()=>[c(W,{modelValue:m(w).searchForm.pid,"onUpdate:modelValue":a[7]||(a[7]=e=>m(w).searchForm.pid=e),placeholder:"Pid",class:"search-con"},null,8,["modelValue"])])),_:1})]),s("div",N,[c(j,{class:"mr-0",style:{"margin-right":"0px"}},{default:p((()=>[s("div",B,[c(l,{type:"primary",onClick:x},{default:p((()=>[I])),_:1}),d(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),d(' <el-input placeholder="请输入内容" v-model="data.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),d(" table "),h((n(),_(X,{center:"",data:m(w).list,class:"w100",height:"70vh",border:""},{default:p((()=>[c(K,{fixed:"",prop:"offer_id",label:"ID",align:"center"}),c(K,{fixed:"",prop:"channel",label:"Channel",align:"center"}),c(K,{prop:"pkg_name",label:"Package Name",align:"center"}),c(K,{prop:"title",label:"Offer Title",width:"120",align:"center"}),c(K,{prop:"attribute_provider",label:"Attribute Provider",align:"center"}),c(K,{prop:"pid",label:"Pid",align:"center"}),c(K,{prop:"platform",label:"Platform",align:"center"},{default:p((e=>[v(g(1===Number(e.row.platform)?"Android":"iOS"),1)])),_:1}),c(K,{prop:"country",label:"Country",align:"center"}),c(K,{prop:"payout",label:"Payout",align:"center"}),c(K,{label:"Click Limitation(w)",width:"150",align:"center"},{default:p((e=>[s("div",M,[c(W,{modelValue:e.row.max_clk_num,"onUpdate:modelValue":a=>e.row.max_clk_num=a,placeholder:"",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),c(l,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(async e=>{let a={id:e.id,max_clk_num:e.max_clk_num};a=z(a);let l=await F(a);A(l)})(e.row)},null,8,["onClick"])])])),_:1}),c(K,{label:"Device Cutoff",width:"250",align:"center"},{default:p((e=>[s("div",$,[s("div",null,[s("div",null,[c(C,{modelValue:e.row.cutoff_start,"onUpdate:modelValue":a=>e.row.cutoff_start=a,class:"cutoff",filterable:"",placeholder:"start"},{default:p((()=>[(n(!0),u(f,null,b(m(w).options.cutoff_start,(e=>(n(),_(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),T,c(C,{modelValue:e.row.cutoff_end,"onUpdate:modelValue":a=>e.row.cutoff_end=a,class:"cutoff",filterable:"",placeholder:"end"},{default:p((()=>[(n(!0),u(f,null,b(m(w).options.cutoff_end,(e=>(n(),_(o,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])]),s("div",q,[s("span",null,g(P(e.row)),1)])]),c(l,{class:"cp ml-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(async e=>{const a=e.cutoff_start,l=e.cutoff_end,t=e.id;if(a<l){let e={cutoff_start:a,cutoff_end:l,id:t};e=z(e);const o=await D(e);A(o)}else V({message:"start必须小于end",type:"error",duration:2e3})})(e.row)},null,8,["onClick"])])])),_:1}),c(K,{width:"100",label:"Operation",align:"center"},{default:p((e=>{return[s("div",G,[c(t,{to:(a=e.row,`/buzz/edit/${a.id}`)},{default:p((()=>[c(l,{class:"cp mr-10",type:"primary",icon:"Edit",circle:""})])),_:2},1032,["to"]),d(" <el-button class='cp mr-10' type=\"primary\" icon=\"Edit\" circle @click='editFun(scope.row)'></el-button> "),c(R,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onChange:a=>(async e=>{let a={id:e.id,status:e.status};a=z(a);const l=await U(a);A(l)})(e.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])];var a})),_:1})])),_:1},8,["data"])),[[Y,m(w).loading]]),d(" 分页 "),s("div",H,[h(c(m(k),{page:m(w).pagination.listQuery.page,"onUpdate:page":a[9]||(a[9]=e=>m(w).pagination.listQuery.page=e),limit:m(w).pagination.listQuery.limit,"onUpdate:limit":a[10]||(a[10]=e=>m(w).pagination.listQuery.limit=e),total:m(w).pagination.total,"page-sizes":m(w).pagination.pageSizes,onPagination:L},null,8,["page","limit","total","page-sizes"]),[[y,m(w).pagination.total]])])])}}}),[["__scopeId","data-v-29c9e5d6"]]);export{W as default};
