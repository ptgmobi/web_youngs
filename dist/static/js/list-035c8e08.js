var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))r.call(a,l)&&s(e,l,a[l]);return e};import{_ as n,d as p,Z as d,h as u,r as c,L as m,q as b,$ as v,o as _,c as g,x as y,z as f,e as h,s as w,v as V,U as k,A as j,V as F,N as x,O as U,y as O,f as C}from"./main-4108d4c8.js";import{u as z,s as P}from"./useUtils-d0d2ed59.js";import{P as Q}from"./index-31949e81.js";import{m as D}from"./message-c3fe1e43.js";import{_ as S}from"./lodash-cc1290e8.js";import{h as A,g as I}from"./new-format-e2d0b76c.js";import{c as q}from"./clipboard-2a7c3d22.js";import{A as N,a as $}from"./dsp-advertiser-08383083.js";const E={class:"controlBox w100 mb-10"},L={class:"mb-10 w100"},B=C(" 新建广告主 "),R={class:"flex jc-start flex-wrap w100"},Z={class:"flex"},G={class:"flex"},H=C(" 查询 "),J=["src"],K={class:"flex jc-around"},M=C("编辑"),T=C("查看"),W={class:"w100 flex"},X=C("复制"),Y=p({name:"demandlist"});var ee,ae=n(p((ee=i({},Y),a(ee,l({setup(e){const{status:a,adv_type:l,ind_cla:t,third_party:o,return_mode:r}=P,{goNewUrl:s,openAlert:n}=z(),p=d({status:"",adv_type:"",value_type:"name",value:"",is_del:"1"}),C=u(!1),Y=c({report_api:""});let ee=c({dialogVisible:!1,cache:{item:{}},searchForm:p.value,useData:p.value,loading:!0,options:{status:a,adv_type:l,ind_cla:t,third_party:o,return_mode:r,value_type:[{value:"id",label:"广告主ID"},{value:"name",label:"广告主名称"},{value:"desc",label:"描述"}]},list:[],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const ae=()=>{ee.useData=S.cloneDeep(ee.searchForm),oe()};u([]);const le=()=>{s({url:"/advertiser/create",query:{type:"create"}})},te=({row:e})=>{const{id:a}=e;s({url:`/advertiser/edit/${a}`,query:{type:"edit"}})},oe=async()=>{ee.loading=!0;let e=i({page:ee.pagination.listQuery.page,limit:ee.pagination.listQuery.limit},p.value);e[e.value_type]=e.value,delete e.value_type,delete e.value,e=A(e);const a=await N(e),{data:l}=a;ee.list=null==l?void 0:l.data,ee.pagination.total=Number(l.count),ee.loading=!1};return m((()=>{ae()})),(e,a)=>{const l=b("el-button"),t=b("el-option"),o=b("el-select"),r=b("el-form-item"),s=b("el-input"),i=b("el-form"),n=b("el-table-column"),p=b("el-switch"),d=b("el-table"),u=b("el-dialog"),c=v("loading");return _(),g("div",null,[y("div",E,[y("div",L,[f(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),f(' <router-link to="/buzz/create"> '),h(l,{type:"primary",onClick:le},{default:w((()=>[B])),_:1}),f(" </router-link> ")]),h(i,{modelValue:V(ee).searchForm,"onUpdate:modelValue":a[4]||(a[4]=e=>V(ee).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:w((()=>[y("div",R,[h(r,{label:""},{default:w((()=>[h(o,{modelValue:V(ee).searchForm.status,"onUpdate:modelValue":a[0]||(a[0]=e=>V(ee).searchForm.status=e),filterable:"",clearable:"",placeholder:"全部状态"},{default:w((()=>[(_(!0),g(x,null,U(V(ee).options.status,(e=>(_(),j(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),h(r,{label:""},{default:w((()=>[h(o,{modelValue:V(ee).searchForm.adv_type,"onUpdate:modelValue":a[1]||(a[1]=e=>V(ee).searchForm.adv_type=e),filterable:"",clearable:"",placeholder:"广告主类型"},{default:w((()=>[(_(!0),g(x,null,U(V(ee).options.adv_type,(e=>(_(),j(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),h(r,{label:""},{default:w((()=>[h(s,{modelValue:V(ee).searchForm.value,"onUpdate:modelValue":a[3]||(a[3]=e=>V(ee).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:w((()=>[h(o,{modelValue:V(ee).searchForm.value_type,"onUpdate:modelValue":a[2]||(a[2]=e=>V(ee).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:w((()=>[(_(!0),g(x,null,U(V(ee).options.value_type,(e=>(_(),j(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})]),y("div",Z,[h(r,{class:"mr-0",style:{"margin-right":"0px"}},{default:w((()=>[y("div",G,[h(l,{type:"primary",onClick:ae},{default:w((()=>[H])),_:1}),f(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),f(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),f(" table "),k((_(),j(d,{center:"",data:V(ee).list,class:"w100",border:""},{default:w((()=>[h(n,{sortable:"",prop:"adv_id",label:"广告主ID",align:"center"}),h(n,{sortable:"",prop:"logo",label:"广告主Logo",align:"center"},{default:w((e=>[y("img",{class:"logo-img",src:e.row.logo,alt:""},null,8,J)])),_:1}),h(n,{sortable:"",width:"120",prop:"name",label:"广告主名称",align:"center"}),h(n,{sortable:"",prop:"status",label:"开关",align:"center"},{default:w((e=>[h(p,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onClick:a=>(async({row:e})=>{let a={id:e.id,status:e.status},l=await $(a);D(l)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),f(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),h(n,{sortable:"",width:"120",prop:"adv_type",label:"广告主类型",align:"center"},{default:w((e=>[y("span",null,O(V(I)(e.row.adv_type,V(ee).options.adv_type)),1)])),_:1}),h(n,{sortable:"",width:"120",prop:"adv_address",label:"广告主地址",align:"center"}),h(n,{sortable:"",width:"120",prop:"spend_limit",label:"日花费上限($)",align:"center"}),h(n,{sortable:"",width:"120",prop:"flow_rate",label:"强制流量占比(%)",align:"center"}),h(n,{sortable:"",width:"120",prop:"ind_cla",label:"广告主分类",align:"center"},{default:w((e=>[y("span",null,O(V(I)(e.row.ind_cla,V(ee).options.ind_cla)),1)])),_:1}),h(n,{sortable:"",width:"120",prop:"user",label:"创建人",align:"center"}),h(n,{width:"200",label:"操作",align:"center"},{default:w((e=>[y("div",K,[h(l,{class:"cp",type:"primary",onClick:a=>te(e)},{default:w((()=>[M])),_:2},1032,["onClick"]),2===e.row.is_del?(_(),j(l,{key:0,class:"cp",type:"default",onClick:a=>te(e)},{default:w((()=>[T])),_:2},1032,["onClick"])):f("v-if",!0),f(' <el-button\n              class="cp"\n              type="danger"\n              @click="deleteFn(scope)"\n              :disabled="scope.row.is_del === 2"\n            >归档</el-button> ')])])),_:1}),h(n,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),h(n,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"})])),_:1},8,["data"])),[[c,V(ee).loading]]),f(" 分页 "),y("div",W,[k(h(Q,{page:V(ee).pagination.listQuery.page,"onUpdate:page":a[5]||(a[5]=e=>V(ee).pagination.listQuery.page=e),limit:V(ee).pagination.listQuery.limit,"onUpdate:limit":a[6]||(a[6]=e=>V(ee).pagination.listQuery.limit=e),total:V(ee).pagination.total,"page-sizes":V(ee).pagination.pageSizes,onPagination:oe},null,8,["page","limit","total","page-sizes"]),[[F,V(ee).pagination.total]])]),f(" report api "),h(u,{modelValue:C.value,"onUpdate:modelValue":a[8]||(a[8]=e=>C.value=e),title:"Report Api",width:"90%"},{default:w((()=>[y("p",null,O(V(Y).report_api),1),h(l,{class:"cp mr-10",type:"default",onClick:a[7]||(a[7]=e=>{return a=V(Y).report_api,void q(a);var a})},{default:w((()=>[X])),_:1})])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-a23d5d78"]]);export{ae as default};
