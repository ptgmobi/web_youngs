var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,r=(e,a)=>{for(var l in a||(a={}))n.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))i.call(a,l)&&o(e,l,a[l]);return e};import{d as s,$ as d,r as p,M as u,N as c,m,a0 as b,s as f,n as g,v as w,c as v,p as _,q as h,z as y,V as j,A as V,O as x,P as k,W as A,b as C,x as O}from"./index-80455ee7.js";import{P}from"./index-2367f2c9.js";import{A as U,a as S,b as D,c as F}from"./adnetwork-4aa0be8e.js";import{m as N}from"./message-f99fef3c.js";import{_ as Q}from"./lodash-00df910c.js";import{o as z}from"./new-format-1254f47d.js";const M={class:"controlBox w100 mb-10 flex jc-between ai-start"},E={class:"mb-10"},$=C("Create AD Network"),B={class:"flex jc-start flex-wrap w100"},T={class:"flex jc-around"},q={class:"flex jc-around"},I={class:"flex jc-around"},J=w("span",null,": ",-1),W=C("   "),G=w("span",null,": ",-1),H=C("   "),K={class:"flex jc-around"},L={class:"w100 flex"},R=s({name:"adNetwork"}),X=s((Y=r({},R),a(Y,l({setup(e){const a=d({input:""});p({offer:{},index:null,cacheDevice:{},cacheDeviceCount:0});let l=p({dialogVisible:!1,dialogVisibleDevice:!1,cache:{item:{},device:{}},searchForm:a.value,useData:a.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((e,a)=>{const l=5*a/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((e,a)=>{const l=(5*a+5)/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["20","50","100","500","1000"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const t=()=>{l.useData=Q.cloneDeep(l.searchForm),s()},n=async(e,a)=>{let l;"status"===a&&(l=await U({id:e.id,[a]:e[a]})),"pmt"===a&&(l=await S({id:e.id,[a]:e[a]})),"android_semi_pmt"===a&&(l=await D({id:e.id,[a]:e[a]})),N(l)},i=()=>{z("/adnetwork/adnetworklist/create")},o=e=>`/adnetwork/adnetworklist/edit/${e.id}`,s=async()=>{l.loading=!0;let e={page:l.pagination.listQuery.page,page_size:l.pagination.listQuery.limit};e=r(r({},e),l.useData);const a=await F(e),{data:t}=a;l.list=null==t?void 0:t.data,l.pagination.total=Number(t.count),l.loading=!1},C=e=>{let a=JSON.parse(e);return Object.entries(a)};return u((()=>{t()})),c((()=>{})),(e,r)=>{const d=m("el-button"),p=m("el-input"),u=m("el-form-item"),c=m("el-form"),U=m("el-table-column"),S=m("el-switch"),D=m("el-table"),F=b("loading");return f(),g("div",null,[w("div",M,[w("div",E,[v(d,{type:"primary",onClick:i},{default:_((()=>[$])),_:1})]),v(c,{modelValue:h(l).searchForm,"onUpdate:modelValue":r[1]||(r[1]=e=>h(l).searchForm=e),inline:!0,class:"flex jc-between ai-end"},{default:_((()=>[w("div",B,[v(u,{label:"",class:"mr-0"},{default:_((()=>[v(p,{modelValue:h(a).input,"onUpdate:modelValue":r[0]||(r[0]=e=>h(a).input=e),placeholder:"Ad network name/Channel",class:"input-with-select"},{append:_((()=>[v(d,{icon:"Search",onClick:t})])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["modelValue"])]),y(" table "),j((f(),V(D,{center:"",data:h(l).list,class:"w100",border:""},{default:_((()=>[v(U,{fixed:"",prop:"name",label:"Ad network name",align:"center",width:"120",sortable:""}),v(U,{fixed:"",prop:"short_name",label:"Channel",align:"center",width:"60",sortable:""}),v(U,{prop:"status",label:"Status",align:"center",width:"110",sortable:""},{default:_((e=>[w("div",T,[v(S,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onChange:a=>n(e.row,"status")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),v(U,{prop:"pmt",label:"Android-PMT",align:"center",sortable:""},{default:_((e=>[w("div",q,[v(S,{modelValue:e.row.pmt,"onUpdate:modelValue":a=>e.row.pmt=a,"active-value":1,"inactive-value":2,onChange:a=>n(e.row,"pmt")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),v(U,{prop:"android_semi_pmt",label:"Android Semi PMT",align:"center",width:"80",sortable:""},{default:_((e=>[w("div",I,[v(S,{modelValue:e.row.android_semi_pmt,"onUpdate:modelValue":a=>e.row.android_semi_pmt=a,"active-value":1,"inactive-value":2,onChange:a=>n(e.row,"android_semi_pmt")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),v(U,{prop:"traffic_rate",label:"Percentage",align:"center",width:"160",sortable:""},{default:_((e=>[(f(!0),g(x,null,k(C(e.row.traffic_rate),(e=>(f(),g("span",null,[w("span",null,O(e[0]),1),J,w("span",null,O(e[1]),1),W])))),256))])),_:1}),v(U,{prop:"pre_click_rate",label:"Pre click",align:"center",width:"160",sortable:""},{default:_((e=>[(f(!0),g(x,null,k(C(e.row.pre_click_rate),(e=>(f(),g("span",null,[w("span",null,O(e[0]),1),G,w("span",null,O(e[1]),1),H])))),256))])),_:1}),v(U,{label:"Operation",align:"center"},{default:_((e=>[w("div",K,[y(' <router-link :to="getEditUrl(scope.row)">\n              <el-button\n                class="cp mr-10"\n                type="primary"\n                icon="Edit"\n                circle\n              ></el-button>\n            </router-link> '),v(d,{class:"cp mr-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(e=>{let a=o(e);z(a)})(e.row)},null,8,["onClick"])])])),_:1})])),_:1},8,["data"])),[[F,h(l).loading]]),y(" 分页 "),w("div",L,[j(v(h(P),{page:h(l).pagination.listQuery.page,"onUpdate:page":r[2]||(r[2]=e=>h(l).pagination.listQuery.page=e),limit:h(l).pagination.listQuery.limit,"onUpdate:limit":r[3]||(r[3]=e=>h(l).pagination.listQuery.limit=e),total:h(l).pagination.total,"page-sizes":h(l).pagination.pageSizes,onPagination:s},null,8,["page","limit","total","page-sizes"]),[[A,h(l).pagination.total]])])])}}}))));var Y;export{X as default};
