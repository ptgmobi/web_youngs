var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,r=(e,a)=>{for(var l in a||(a={}))i.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))n.call(a,l)&&o(e,l,a[l]);return e};import{d as s,Z as d,r as p,L as u,M as c,q as m,$ as b,o as g,c as f,x as w,e as v,s as h,v as _,z as y,U as j,A as V,V as x,N as k,O as A,y as C,f as O}from"./main-4a186a1d.js";import{P as U}from"./index-e52380f4.js";import{A as P,a as F,b as S,c as D}from"./adnetwork-5b8a656b.js";import{m as N}from"./message-6b0ed85d.js";import{_ as Q}from"./lodash-11c76b4d.js";import{o as z}from"./new-format-1f93a419.js";const M={class:"controlBox w100 mb-10 flex jc-between ai-start"},E={class:"mb-10"},$=O("Create AD Network"),B={class:"flex jc-start flex-wrap w100"},T={class:"flex jc-around"},q={class:"flex jc-around"},I={class:"flex jc-around"},J=w("span",null,": ",-1),L=O("   "),Z=w("span",null,": ",-1),G=O("   "),H={class:"flex jc-around"},K={class:"w100 flex"},R=s({name:"adNetwork"}),W=s((X=r({},R),a(X,l({setup(e){const a=d({input:""});p({offer:{},index:null,cacheDevice:{},cacheDeviceCount:0});let l=p({dialogVisible:!1,dialogVisibleDevice:!1,cache:{item:{},device:{}},searchForm:a.value,useData:a.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((e,a)=>{const l=5*a/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((e,a)=>{const l=(5*a+5)/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["20","50","100","500","1000"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const t=()=>{l.useData=Q.cloneDeep(l.searchForm),s()},i=async(e,a)=>{let l;"status"===a&&(l=await F({id:e.id,[a]:e[a]})),"pmt"===a&&(l=await S({id:e.id,[a]:e[a]})),"android_semi_pmt"===a&&(l=await D({id:e.id,[a]:e[a]})),N(l)},n=()=>{z("/adnetwork/adnetworklist/create")},o=e=>`/adnetwork/adnetworklist/edit/${e.id}`,s=async()=>{l.loading=!0;let e={page:l.pagination.listQuery.page,page_size:l.pagination.listQuery.limit};e=r(r({},e),l.useData);const a=await P(e),{data:t}=a;l.list=null==t?void 0:t.data,l.pagination.total=Number(t.count),l.loading=!1},O=e=>{let a=JSON.parse(e);return Object.entries(a)};return u((()=>{t()})),c((()=>{})),(e,a)=>{const r=m("el-button"),d=m("el-input"),p=m("el-form-item"),u=m("el-form"),c=m("el-table-column"),P=m("el-switch"),F=m("el-table"),S=b("loading");return g(),f("div",null,[w("div",M,[w("div",E,[v(r,{type:"primary",onClick:n},{default:h((()=>[$])),_:1})]),v(u,{modelValue:_(l).searchForm,"onUpdate:modelValue":a[1]||(a[1]=e=>_(l).searchForm=e),inline:!0,class:"flex jc-between ai-end"},{default:h((()=>[w("div",B,[v(p,{label:"",class:"mr-0"},{default:h((()=>[v(d,{modelValue:_(l).searchForm.input,"onUpdate:modelValue":a[0]||(a[0]=e=>_(l).searchForm.input=e),placeholder:"Ad network name/Channel",class:"input-with-select",style:{width:"200px"}},{append:h((()=>[v(r,{icon:"Search",onClick:t})])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["modelValue"])]),y(" table "),j((g(),V(F,{center:"",data:_(l).list,class:"w100",border:""},{default:h((()=>[v(c,{fixed:"",prop:"name",label:"Ad network name",align:"center",width:"120",sortable:""}),v(c,{fixed:"",prop:"short_name",label:"Channel",align:"center",width:"60",sortable:""}),v(c,{prop:"status",label:"Status",align:"center",width:"110",sortable:""},{default:h((e=>[w("div",T,[v(P,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onChange:a=>i(e.row,"status")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),v(c,{prop:"pmt",label:"Android-PMT",align:"center",sortable:""},{default:h((e=>[w("div",q,[v(P,{modelValue:e.row.pmt,"onUpdate:modelValue":a=>e.row.pmt=a,"active-value":1,"inactive-value":2,onChange:a=>i(e.row,"pmt")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),v(c,{prop:"android_semi_pmt",label:"Android Semi PMT",align:"center",width:"80",sortable:""},{default:h((e=>[w("div",I,[v(P,{modelValue:e.row.android_semi_pmt,"onUpdate:modelValue":a=>e.row.android_semi_pmt=a,"active-value":1,"inactive-value":2,onChange:a=>i(e.row,"android_semi_pmt")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),v(c,{prop:"traffic_rate",label:"Percentage",align:"center",width:"160",sortable:""},{default:h((e=>[(g(!0),f(k,null,A(O(e.row.traffic_rate),(e=>(g(),f("span",null,[w("span",null,C(e[0]),1),J,w("span",null,C(e[1]),1),L])))),256))])),_:1}),v(c,{prop:"pre_click_rate",label:"Pre click",align:"center",width:"160",sortable:""},{default:h((e=>[(g(!0),f(k,null,A(O(e.row.pre_click_rate),(e=>(g(),f("span",null,[w("span",null,C(e[0]),1),Z,w("span",null,C(e[1]),1),G])))),256))])),_:1}),v(c,{label:"Operation",align:"center"},{default:h((e=>[w("div",H,[y(' <router-link :to="getEditUrl(scope.row)">\n              <el-button\n                class="cp mr-10"\n                type="primary"\n                icon="Edit"\n                circle\n              ></el-button>\n            </router-link> '),v(r,{class:"cp mr-10",type:"primary",icon:"Edit",circle:"",onClick:a=>(e=>{let a=o(e);z(a)})(e.row)},null,8,["onClick"])])])),_:1})])),_:1},8,["data"])),[[S,_(l).loading]]),y(" 分页 "),w("div",K,[j(v(_(U),{page:_(l).pagination.listQuery.page,"onUpdate:page":a[2]||(a[2]=e=>_(l).pagination.listQuery.page=e),limit:_(l).pagination.listQuery.limit,"onUpdate:limit":a[3]||(a[3]=e=>_(l).pagination.listQuery.limit=e),total:_(l).pagination.total,"page-sizes":_(l).pagination.pageSizes,onPagination:s},null,8,["page","limit","total","page-sizes"]),[[x,_(l).pagination.total]])])])}}}))));var X;export{W as default};
