import{_ as e,d as a,r as l,M as t,I as r,m as o,s,n as i,v as n,c as u,p as c,O as d,P as m,q as p,z as b,V as f,W as h,b as v,A as g,x as y}from"./index-b160a4d6.js";import{P as k}from"./index-e884940e.js";import{W as x}from"./index-910d5050.js";import{k as V}from"./overview-e30e7450.js";import{g as C,a as w}from"./format-75dc684c.js";import"./moment-56f006b0.js";const _={class:"search-box"},D={class:"mb-10"},j={class:"flex jc-between ai-start"},q={class:"flex jc-start ai-start flex-wrap"},U=v(" Run "),Y={class:"mb-10"},P={style:{"margin-left":"10px"}},Q={class:"w100 flex"};var z=e(a({__name:"report",setup(e){let a=l({shortcuts:[{text:"今天",value:C(0,"day")},{text:"昨天",value:()=>w(1,1,"day")},{text:"最近7天",value:()=>C(6,"day")}],clumon:{base:[{label:"Impression",value:"impression"},{label:"Click",value:"click"},{label:"CVR",value:"cvr"},{label:"Conversion",value:"conversion"},{label:"Revenue($)",value:"revenue"}],choice:[{label:"Date",value:"date",require:!0,width:"100"},{label:"Hour",value:"hour",require:!1},{label:"Country",value:"country",require:!1},{label:"Platform",value:"platform",require:!1},{label:"PKG",value:"pkg",require:!1},{label:"Offer",value:"offer",require:!1}]},search:{date:C(6,"day"),checkList:["date"],filter:{country:"",platform:"",pkg:"",offer:""}},options:{platform:[{value:"Android",label:"Android"},{value:"iOS",label:"iOS"}]},tableData:{all:[],arr:[]},exportExcel:{buttonName:"导出",tHeader:["日期"],filterVal:["date"],fileName:"test"},pagination:{pageSizes:["10","20","40","100"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}},handleClumon:[],busHandleClumon:[]});t((()=>{}));const z=r((()=>a.handleClumon.map((e=>e.label)))),H=r((()=>a.handleClumon.map((e=>e.value)))),I=async()=>{const e=a.search.checkList,l=L(e).map((e=>e.value)).join(",");let t={page:a.pagination.listQuery.page,page_size:a.pagination.listQuery.limit,st:a.search.date[0],et:a.search.date[1],...a.search.filter};l&&(t.dimension=l);const r=await V(t),{data:o}=r;a.tableData.arr=o.data,a.pagination.total=parseInt(o.count)},L=e=>{const l=[];return a.clumon.choice.map((a=>{e.includes(a.value)&&l.push(a)})),l},M=e=>{const l=L(e);a.busHandleClumon=[...l,...a.clumon.base]},O=()=>{a.handleClumon=a.busHandleClumon,I()};return M(a.search.checkList),O(),(e,l)=>{const t=o("el-checkbox"),r=o("el-checkbox-group"),V=o("el-date-picker"),C=o("el-input"),w=o("el-option"),L=o("el-select"),N=o("el-button"),R=o("el-table-column"),S=o("el-table");return s(),i("div",null,[n("div",_,[n("div",D,[u(r,{modelValue:p(a).search.checkList,"onUpdate:modelValue":l[0]||(l[0]=e=>p(a).search.checkList=e),onChange:M},{default:c((()=>[(s(!0),i(d,null,m(p(a).clumon.choice,(e=>(s(),g(t,{key:e.value,label:e.value,disabled:e.require},{default:c((()=>[v(y(e.label),1)])),_:2},1032,["label","disabled"])))),128))])),_:1},8,["modelValue"])]),n("div",j,[n("div",q,[u(V,{modelValue:p(a).search.date,"onUpdate:modelValue":l[1]||(l[1]=e=>p(a).search.date=e),class:"mr-10 mb-10",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",shortcuts:p(a).shortcuts},null,8,["modelValue","shortcuts"]),u(C,{modelValue:p(a).search.filter.country,"onUpdate:modelValue":l[2]||(l[2]=e=>p(a).search.filter.country=e),placeholder:"Country",class:"mr-10 mb-10 search-con"},null,8,["modelValue"]),u(L,{modelValue:p(a).search.filter.platform,"onUpdate:modelValue":l[3]||(l[3]=e=>p(a).search.filter.platform=e),clearable:"",filterable:"",placeholder:"Platform",class:"mr-10 search-con"},{default:c((()=>[(s(!0),i(d,null,m(p(a).options.platform,(e=>(s(),g(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),u(C,{modelValue:p(a).search.filter.pkg,"onUpdate:modelValue":l[4]||(l[4]=e=>p(a).search.filter.pkg=e),placeholder:"Pkg",class:"mr-10 mb-10 search-con"},null,8,["modelValue"]),u(C,{modelValue:p(a).search.filter.offer,"onUpdate:modelValue":l[5]||(l[5]=e=>p(a).search.filter.offer=e),placeholder:"Offer",class:"mr-10 mb-10 search-con"},null,8,["modelValue"])]),u(N,{type:"primary",onClick:O},{default:c((()=>[U])),_:1})])]),b(" all "),b(' <el-table :data="tableData.all" border style="width: 100%" class="mb-10">\n      <el-table-column prop="impression" label="Impression" />\n      <el-table-column prop="click" label="Click" />\n      <el-table-column prop="revenue" label="Revenue($)" />\n      <el-table-column prop="conversion" label="Conversion" />\n    </el-table> '),n("div",Y,[u(x,{"button-name":p(a).exportExcel.buttonName,list:p(a).tableData.arr,"t-header":p(z),"filter-val":p(H),filename:p(a).exportExcel.fileName},null,8,["button-name","list","t-header","filter-val","filename"])]),b(" arr "),u(S,{data:p(a).tableData.arr,border:!0,style:{width:"100%"}},{default:c((()=>[(s(!0),i(d,null,m(p(a).handleClumon,(e=>(s(),g(R,{key:e.value,align:"center",sortable:"",prop:e.value,label:e.label,width:e.width},{default:c((a=>[b(' <i class="el-icon-time"></i> '),n("span",P,y(a.row[e.value]),1)])),_:2},1032,["prop","label","width"])))),128))])),_:1},8,["data"]),n("div",Q,[f(u(p(k),{page:p(a).pagination.listQuery.page,"onUpdate:page":l[6]||(l[6]=e=>p(a).pagination.listQuery.page=e),limit:p(a).pagination.listQuery.limit,"onUpdate:limit":l[7]||(l[7]=e=>p(a).pagination.listQuery.limit=e),total:p(a).pagination.total,"page-sizes":p(a).pagination.pageSizes,onPagination:I},null,8,["page","limit","total","page-sizes"]),[[h,p(a).pagination.total]])])])}}}),[["__scopeId","data-v-66630144"]]);export{z as default};
