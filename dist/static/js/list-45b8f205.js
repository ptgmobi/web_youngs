var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,s=(e,l)=>{for(var a in l||(l={}))i.call(l,a)&&r(e,a,l[a]);if(t)for(var a of t(l))o.call(l,a)&&r(e,a,l[a]);return e};import{_ as n,d as p,h as u,Z as c,r as d,I as m,L as b,q as v,$ as y,o as f,c as g,x as h,e as _,s as w,v as x,z as k,U as V,A as F,a8 as j,V as O,N as U,O as C,y as z,f as D,D as S,F as P}from"./main-c289050e.js";import{u as Q,s as T}from"./useUtils-034ffd86.js";import{P as q}from"./index-19cba061.js";import{m as I}from"./message-7c571a95.js";import{_ as L}from"./lodash-6a3426b2.js";import{h as A,g as N}from"./new-format-0cb28217.js";import"./clipboard-polyfill.text.esm-fc4f7791.js";import{A as $,a as B}from"./dsp-campaign-172ebb9a.js";const E={type:[{value:1,label:"图片"},{value:2,label:"视频"},{value:3,label:"原生"}],audit_status:[{value:1,label:"未审核"},{value:2,label:"审核通过"},{value:3,label:"审核未通过"}]};const R=e=>(S("data-v-93cffa54"),e=e(),P(),e),Z={class:"controlBox w100 mb-10"},G={class:"flex jc-start flex-wrap w100"},H={class:"flex"},J={class:"flex"},K=D(" 查询 "),M={key:0,class:"mb-10 w100"},W=D("新建创意"),X={class:"flex jc-around"},Y=D("编辑"),ee=D("复制"),le=D("归档"),ae=R((()=>h("span",null,null,-1))),te={class:"w100 flex"},ie={class:"img-box"},oe=["src"],re=p({name:"adserieslist"});var se,ne=n(p((se=s({},re),l(se,a({props:{pagaType:{require:!1,default:()=>"list",type:String},choiceList:{require:!1,default:()=>[],type:Array},choiceType:{require:!1,default:()=>2,type:Number}},emits:["updateList","updateOne"],setup(e,{emit:l}){const a=e;a.choiceList,a.choiceType;const t=u(),i=u([]),{status:o,adv_type:r,ind_cla:n,third_party:p,return_mode:D}=T,{type:S,audit_status:P}=E,{goNewUrl:R,openAlert:re}=Q(),se=c({status:"",type:"",audit_status:"",is_del:"",value_type:"name",value:""}),ne=u({}),pe=u(!1),ue=d({preview_img:""});let ce=d({dialogVisible:!1,cache:{item:{}},searchForm:se.value,useData:se.value,loading:!0,options:{status:o,type:S,audit_status:P,value_type:[{value:"name",label:"名称"},{value:"id",label:"ID"}]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});d({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const de=m((()=>a.choiceType)),me=m((()=>a.pagaType)),be=()=>{ce.useData=L.cloneDeep(ce.searchForm),we()};u([]);const ve=()=>{R({url:"/campaign/administration/create",query:{type:"create"}})},ye=e=>async()=>{const{row:l,$index:a}=e,t=await(async e=>await B({ids:e,is_del:2}))([l.id]);I(t)&&ce.list.splice(a,1)},fe=({row:e})=>2===e.type?e.cover_url:e.url,ge=({row:e})=>1===e.type?[e.url]:2===e.type?[e.cover_url,e.logo_url]:3===e.type?[e.url,e.logo_url]:void 0,he=e=>{i.value=e,l("updateList",e)},_e=e=>{l("updateOne",e)},we=async()=>{ce.loading=!0;let e=s(s({page:ce.pagination.listQuery.page,limit:ce.pagination.listQuery.limit},se.value),ne.value);e[e.value_type]=e.value,delete e.value_type,delete e.value,e=A(e);const l=await $(e);if(l){const{data:e}=l;ce.list=null==e?void 0:e.data,ce.pagination.total=Number(e.count)}ce.loading=!1};return b((()=>{be()})),(e,l)=>{const a=v("el-option"),i=v("el-select"),o=v("el-form-item"),r=v("el-input"),s=v("el-checkbox"),n=v("el-button"),p=v("el-form"),u=v("el-table-column"),c=v("el-image"),d=v("el-dialog"),m=y("loading");return f(),g("div",null,[h("div",Z,[_(p,{modelValue:x(ce).searchForm,"onUpdate:modelValue":l[5]||(l[5]=e=>x(ce).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:w((()=>[h("div",G,[k(' <el-form-item label="">\n            <el-select\n              v-model="state.searchForm.status"\n              filterable\n              clearable\n              placeholder="所有状态"\n            >\n              <el-option\n                v-for="item in state.options.status"\n                :key="item.value"\n                :label="item.label"\n                :value="item.value"\n              ></el-option>\n            </el-select>\n          </el-form-item> '),k(" 所有样式 "),_(o,{label:""},{default:w((()=>[_(i,{modelValue:x(ce).searchForm.type,"onUpdate:modelValue":l[0]||(l[0]=e=>x(ce).searchForm.type=e),filterable:"",clearable:"",placeholder:"所有样式"},{default:w((()=>[(f(!0),g(U,null,C(x(ce).options.type,(e=>(f(),F(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),k(" 所有审核状态 "),_(o,{label:""},{default:w((()=>[_(i,{modelValue:x(ce).searchForm.audit_status,"onUpdate:modelValue":l[1]||(l[1]=e=>x(ce).searchForm.audit_status=e),filterable:"",clearable:"",placeholder:"所有审核状态"},{default:w((()=>[(f(!0),g(U,null,C(x(ce).options.audit_status,(e=>(f(),F(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),k(" 输入 "),_(o,{label:""},{default:w((()=>[_(r,{modelValue:x(ce).searchForm.value,"onUpdate:modelValue":l[3]||(l[3]=e=>x(ce).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:w((()=>[_(i,{modelValue:x(ce).searchForm.value_type,"onUpdate:modelValue":l[2]||(l[2]=e=>x(ce).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:w((()=>[(f(!0),g(U,null,C(x(ce).options.value_type,(e=>(f(),F(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),_(o,{label:""},{default:w((()=>[_(s,{modelValue:x(ce).searchForm.is_del,"onUpdate:modelValue":l[4]||(l[4]=e=>x(ce).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),h("div",H,[_(o,{class:"mr-0",style:{"margin-right":"0px"}},{default:w((()=>[h("div",J,[_(n,{type:"primary",onClick:be},{default:w((()=>[K])),_:1}),k(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),k(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> '),"list"===x(me)?(f(),g("div",M,[_(n,{type:"primary",onClick:ve},{default:w((()=>[W])),_:1})])):k("v-if",!0)]),k(" table "),V((f(),F(x(j),{ref_key:"multipleTableRef",ref:t,center:"",data:x(ce).list,class:"w100",border:"","highlight-current-row":1===x(de),onSelectionChange:he,onCurrentChange:_e},{default:w((()=>[2===x(de)?(f(),F(u,{key:0,align:"center",type:"selection",width:"55"})):k("v-if",!0),k(" ID "),_(u,{sortable:"",prop:"id",label:"ID",align:"center"}),k(" 名称 "),_(u,{sortable:"",width:"120",prop:"name",label:"名称",align:"center"}),k(" 缩略图 "),_(u,{width:"120",prop:"url",label:"缩略图",align:"center"},{default:w((e=>[h("div",null,[_(c,{"z-index":9999,style:{width:"100px",height:"auto"},src:fe(e),"preview-src-list":ge(e),"initial-index":4,fit:"cover","preview-teleported":!0,onClick:l=>{return a=e.row.url,void(ue.preview_img=a);var a}},null,8,["src","preview-src-list","onClick"]),k(' <el-image\n              v-if="scope.row.type !== 2"\n              :z-index="9999"\n              style="width: 100px; height: auto"\n              :src="scope.row.url"\n              :preview-src-list="[scope.row.url]"\n              :initial-index="4"\n              fit="cover"\n              :preview-teleported="true"\n              @click="toBus(scope.row.url)"\n            />\n            <el-image\n              v-if="scope.row.type === 2"\n              :z-index="9999"\n              style="width: 100px; height: auto"\n              :src="scope.row.cover_url"\n              :preview-src-list="[scope.row.cover_url]"\n              :initial-index="4"\n              fit="cover"\n              :preview-teleported="true"\n              @click="toBus(scope.row.cover_url)"\n            /> ')])])),_:1}),k(" 操作 "),"list"===x(me)?(f(),F(u,{key:1,width:"200",label:"操作",align:"center"},{default:w((e=>[h("div",X,[_(n,{class:"cp",type:"primary",onClick:l=>(({row:e})=>{const{id:l}=e;R({url:`/campaign/administration/edit/${l}`,query:{type:"edit",campaign_type:e.type}})})(e)},{default:w((()=>[Y])),_:2},1032,["onClick"]),_(n,{class:"cp",type:"primary"},{default:w((()=>[ee])),_:1}),k(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),_(n,{class:"cp",type:"danger",onClick:l=>(async e=>{re({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},ye(e))})(e),disabled:2===e.row.is_del},{default:w((()=>[le])),_:2},1032,["onClick","disabled"])])])),_:1})):k("v-if",!0),k(" 开关 "),k(' <el-table-column sortable\n        prop="status"\n        label="开关"\n        align="center"\n      >\n        <template #default="scope">\n          <el-switch\n            v-model="scope.row.status"\n            :active-value="1"\n            :inactive-value="2"\n            @click="changeStatus(scope)"\n          />\n        </template>\n      </el-table-column> '),k(" 样式 "),_(u,{sortable:"",prop:"type",label:"样式",align:"center"},{default:w((e=>[h("span",null,z(x(N)(e.row.type,x(ce).options.type)),1)])),_:1}),k(" 审核状态 "),_(u,{sortable:"",prop:"audit_status",label:"审核状态",align:"center"},{default:w((e=>[h("span",null,z(x(N)(e.row.audit_status,x(ce).options.audit_status)),1)])),_:1}),k(" 尺寸 "),_(u,{sortable:"",width:"120",prop:"size",label:"尺寸",align:"center"}),k(" 格式 "),_(u,{sortable:"",width:"120",prop:"format",label:"格式",align:"center"}),k(" 大小 "),_(u,{sortable:"",width:"120",prop:"memory_size",label:"大小",align:"center"}),k(" 时长 "),_(u,{sortable:"",width:"120",prop:"duration",label:"时长",align:"center"}),k(" 关联广告 "),"list"===x(me)?(f(),F(u,{key:2,sortable:"",width:"120",prop:"ads",label:"关联广告",align:"center"},{default:w((e=>[ae])),_:1})):k("v-if",!0),k(" 创建人 "),_(u,{sortable:"",width:"120",prop:"create_email",label:"创建人",align:"center"}),k(" 创建时间 "),_(u,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),k(" 更新时间 "),_(u,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"})])),_:1},8,["data","highlight-current-row"])),[[m,x(ce).loading]]),k(" 分页 "),h("div",te,[V(_(q,{page:x(ce).pagination.listQuery.page,"onUpdate:page":l[6]||(l[6]=e=>x(ce).pagination.listQuery.page=e),limit:x(ce).pagination.listQuery.limit,"onUpdate:limit":l[7]||(l[7]=e=>x(ce).pagination.listQuery.limit=e),total:x(ce).pagination.total,"page-sizes":x(ce).pagination.pageSizes,onPagination:we},null,8,["page","limit","total","page-sizes"]),[[O,x(ce).pagination.total]])]),k(" 预览 "),_(d,{modelValue:pe.value,"onUpdate:modelValue":l[8]||(l[8]=e=>pe.value=e),title:"图片预览",width:"50%"},{default:w((()=>[h("div",ie,[h("img",{src:x(ue).preview_img,alt:""},null,8,oe)])])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-93cffa54"]]);export{ne as default};
