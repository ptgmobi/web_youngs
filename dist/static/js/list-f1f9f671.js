var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,s=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&i(e,a,l[a]);if(t)for(var a of t(l))r.call(l,a)&&i(e,a,l[a]);return e};import{_ as n,d as p,Z as u,h as c,r as d,L as m,q as b,$ as f,o as v,c as _,x as y,z as g,e as w,s as h,v as k,U as V,A as x,V as j,N as C,O as F,y as U,f as O}from"./main-ba6f5db3.js";import{u as D,s as P}from"./useUtils-2698b3d9.js";import{P as z}from"./index-13a90f80.js";import{m as Q}from"./message-2692a86c.js";import{_ as A}from"./lodash-cc142485.js";import{h as E,g as I}from"./new-format-536eb4c3.js";import{c as S}from"./clipboard-3e04d038.js";import{A as $,a as q,b as N}from"./dsp-advertiser-d63f6dd9.js";const R={class:"controlBox w100 mb-10"},T={class:"mb-10 w100"},B=O(" 新建广告主 "),L={class:"flex jc-start flex-wrap w100"},Z={class:"flex"},G={class:"flex"},H=O(" 查询 "),J={class:"p10"},K={class:"flex jc-around"},M=O("编辑"),W=O("查看"),X=O("归档"),Y={class:"flex jc-around"},ee={class:"token cp"},le=O("复制"),ae=O("更新"),te={class:"flex jc-around"},oe=O("查看"),re={class:"flex jc-around"},ie=O("查看"),se={class:"w100 flex"},ne=O("复制"),pe=p({name:"demandlist"});var ue,ce=n(p((ue=s({},pe),l(ue,a({setup(e){const{flow_source:l,flow_type:a,ad_type:t,bidding_agreement:o,bidding_type:r,currency:i,status:n,choice_type:p,choice_type_region:O,value_type:pe}=P,{goNewUrl:ue,openAlert:ce}=D(),de=u({status:1,flow_source:"",value_type:"name",value:"",is_del:"1"}),me=c(!1),be=d({report_api:""});let fe=d({dialogVisible:!1,cache:{item:{}},searchForm:de.value,useData:de.value,loading:!0,options:{status:n,flow_source:l,value_type:pe},list:[],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const ve=()=>{fe.useData=A.cloneDeep(fe.searchForm),we()};c([]);const _e=()=>{ue({url:"/advertiser/create",query:{type:"create"}})},ye=({row:e})=>{const{id:l}=e;ue({url:`/advertiser/${l}`,query:{type:"edit"}})},ge=async e=>{ce({text:`确认归档${e.row.name}？`,title:"归档操作",buttonText:"确认"},(e=>async()=>{const{row:l,$index:a}=e,t=await N({id:l.id});Q(t)&&fe.list.splice(a,1)})(e))},we=async()=>{fe.loading=!0;let e=s({page:fe.pagination.listQuery.page,limit:fe.pagination.listQuery.limit},de.value);e[e.value_type]=e.value,delete e.value_type,delete e.value,e=E(e);const l=await $(e),{data:a}=l;fe.list=null==a?void 0:a.data,fe.pagination.total=Number(a.paging.count),fe.loading=!1};return m((()=>{ve()})),(e,l)=>{const a=b("el-button"),t=b("el-option"),o=b("el-select"),r=b("el-form-item"),i=b("el-input"),s=b("el-checkbox"),n=b("el-form"),p=b("el-table-column"),u=b("el-switch"),c=b("el-popover"),d=b("el-table"),m=b("el-dialog"),O=f("loading");return v(),_("div",null,[y("div",R,[y("div",T,[g(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),g(' <router-link to="/buzz/create"> '),w(a,{type:"primary",onClick:_e},{default:h((()=>[B])),_:1}),g(" </router-link> ")]),w(n,{modelValue:k(fe).searchForm,"onUpdate:modelValue":l[5]||(l[5]=e=>k(fe).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:h((()=>[y("div",L,[w(r,{label:""},{default:h((()=>[w(o,{modelValue:k(fe).searchForm.status,"onUpdate:modelValue":l[0]||(l[0]=e=>k(fe).searchForm.status=e),filterable:"",clearable:"",placeholder:"全部状态"},{default:h((()=>[(v(!0),_(C,null,F(k(fe).options.status,(e=>(v(),x(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(r,{label:""},{default:h((()=>[w(o,{modelValue:k(fe).searchForm.flow_source,"onUpdate:modelValue":l[1]||(l[1]=e=>k(fe).searchForm.flow_source=e),filterable:"",clearable:"",placeholder:"全部流量来源"},{default:h((()=>[(v(!0),_(C,null,F(k(fe).options.flow_source,(e=>(v(),x(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),w(r,{label:""},{default:h((()=>[w(i,{modelValue:k(fe).searchForm.value,"onUpdate:modelValue":l[3]||(l[3]=e=>k(fe).searchForm.value=e),placeholder:"名称/ID/token",class:"input-with-select"},{prepend:h((()=>[w(o,{modelValue:k(fe).searchForm.value_type,"onUpdate:modelValue":l[2]||(l[2]=e=>k(fe).searchForm.value_type=e),placeholder:"名称/ID/token",class:"search-input-select"},{default:h((()=>[(v(!0),_(C,null,F(k(fe).options.value_type,(e=>(v(),x(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),w(r,{label:""},{default:h((()=>[w(s,{modelValue:k(fe).searchForm.is_del,"onUpdate:modelValue":l[4]||(l[4]=e=>k(fe).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),y("div",Z,[w(r,{class:"mr-0",style:{"margin-right":"0px"}},{default:h((()=>[y("div",G,[w(a,{type:"primary",onClick:ve},{default:h((()=>[H])),_:1}),g(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),g(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),g(" table "),V((v(),x(d,{center:"",data:k(fe).list,class:"w100",border:""},{default:h((()=>[w(p,{type:"expand"},{default:h((e=>[y("div",J,[y("p",null,"ID: "+U(e.row.id),1)])])),_:1}),w(p,{sortable:"",prop:"id",label:"ID",align:"center"}),w(p,{sortable:"",width:"120",prop:"name",label:"名称",align:"center"}),w(p,{sortable:"",prop:"status",label:"状态",align:"center"},{default:h((e=>[w(u,{modelValue:e.row.status,"onUpdate:modelValue":l=>e.row.status=l,"active-value":1,"inactive-value":2,onClick:l=>(async({row:e})=>{e.id,e.status;let l=await q(e.id);Q(l)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),g(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),w(p,{width:"140",label:"操作",align:"center"},{default:h((e=>[y("div",K,[1===e.row.is_del?(v(),x(a,{key:0,class:"cp",type:"primary",onClick:l=>ye(e)},{default:h((()=>[M])),_:2},1032,["onClick"])):g("v-if",!0),2===e.row.is_del?(v(),x(a,{key:1,class:"cp",type:"default",onClick:l=>ye(e)},{default:h((()=>[W])),_:2},1032,["onClick"])):g("v-if",!0),w(a,{class:"cp",type:"danger",onClick:l=>ge(e),disabled:2===e.row.is_del},{default:h((()=>[X])),_:2},1032,["onClick","disabled"])])])),_:1}),w(p,{sortable:"",width:"180",prop:"email",label:"Email",align:"center"}),w(p,{sortable:"",prop:"token",label:"Token",align:"center",width:"200"},{default:h((l=>[y("div",Y,[l.row.token?(v(),x(c,{key:0,placement:"top-start",width:200,trigger:"hover",content:l.row.token},{reference:h((()=>[y("span",ee,U(l.row.token),1)])),_:2},1032,["content"])):g("v-if",!0),w(a,{class:"cp",type:"default",onClick:e=>{return a=l.row.token,void S(a);var a}},{default:h((()=>[le])),_:2},1032,["onClick"]),w(a,{class:"cp",type:"default",onClick:a=>e.updateTokenFn(l)},{default:h((()=>[ae])),_:2},1032,["onClick"]),g(' <router-link :to="getEditUrl(scope.row)">\n              \n            </router-link> '),g(" <el-button class='cp mr-10' type=\"primary\" icon=\"Edit\" circle @click='editFun(scope.row)'></el-button> ")])])),_:1}),w(p,{sortable:"",prop:"token",label:"流量来源",align:"center"},{default:h((e=>[y("span",null,U(k(I)(e.row.flow_source,k(fe).options.flow_source)),1)])),_:1}),w(p,{sortable:"",prop:"end_point",label:"End Point",align:"center"},{default:h((e=>[y("div",te,[w(a,{class:"cp mr-10",type:"default",onClick:l=>(e=>{const{id:l}=e;ue({url:`/advertiser/endpoint/${l}/list`})})(e.row)},{default:h((()=>[oe])),_:2},1032,["onClick"])])])),_:1}),w(p,{sortable:"",prop:"report_api",label:"Report Api",align:"center"},{default:h((l=>[y("div",re,[w(a,{class:"cp mr-10",type:"default",onClick:a=>e.openReportApiFn(l.row)},{default:h((()=>[ie])),_:2},1032,["onClick"])])])),_:1}),g(' <el-table-column sortable\n        prop="name"\n        label="创建人"\n        align="center"\n      ></el-table-column> '),w(p,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),w(p,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"})])),_:1},8,["data"])),[[O,k(fe).loading]]),g(" 分页 "),y("div",se,[V(w(z,{page:k(fe).pagination.listQuery.page,"onUpdate:page":l[6]||(l[6]=e=>k(fe).pagination.listQuery.page=e),limit:k(fe).pagination.listQuery.limit,"onUpdate:limit":l[7]||(l[7]=e=>k(fe).pagination.listQuery.limit=e),total:k(fe).pagination.total,"page-sizes":k(fe).pagination.pageSizes,onPagination:we},null,8,["page","limit","total","page-sizes"]),[[j,k(fe).pagination.total]])]),g(" report api "),w(m,{modelValue:me.value,"onUpdate:modelValue":l[9]||(l[9]=e=>me.value=e),title:"Report Api",width:"90%"},{default:h((()=>[y("p",null,U(k(be).report_api),1),w(a,{class:"cp mr-10",type:"default",onClick:l[8]||(l[8]=e=>{return l=k(be).report_api,void S(l);var l})},{default:h((()=>[ne])),_:1})])),_:1},8,["modelValue"])])}}})))),[["__scopeId","data-v-a23d5d78"]]);export{ce as default};
