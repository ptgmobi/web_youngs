import{d as a,a0 as e,r as l,M as t,N as i,m as n,a1 as o,s as r,n as s,v as d,c as p,p as u,q as c,z as m,V as g,A as b,O as w,P as f,W as v,b as h,x as _}from"./index-b160a4d6.js";import{P as y}from"./index-e884940e.js";import{A as V,a as x,b as k,c as j}from"./adnetwork-816c55e5.js";import{m as A}from"./message-6c553f21.js";import{_ as C}from"./lodash-ad752a46.js";import{o as U}from"./new-format-f712eb45.js";const F={class:"controlBox w100 mb-10 flex jc-between ai-start"},S={class:"mb-10"},D=h("Create AD Network"),N={class:"flex jc-start flex-wrap w100"},P={class:"flex jc-around"},Q={class:"flex jc-around"},z={class:"flex jc-around"},M=d("span",null,": ",-1),O=h("   "),B=d("span",null,": ",-1),E=h("   "),$={class:"flex jc-around"},T={class:"w100 flex"},q=a({name:"adNetwork"}),J=a({...q,setup(a){const h=e({input:""});l({offer:{},index:null,cacheDevice:{},cacheDeviceCount:0});let q=l({dialogVisible:!1,dialogVisibleDevice:!1,cache:{item:{},device:{}},searchForm:h.value,useData:h.value,loading:!0,options:{cutoff_start:[...new Array(20)].map(((a,e)=>{const l=5*e/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),cutoff_end:[...new Array(20)].map(((a,e)=>{const l=(5*e+5)/100;return{value:l,label:`${(100*Number(l)).toFixed(0)}%`}})),attribute_provider:[{value:"AppsFlyer",label:"AppsFlyer"},{value:"Branch",label:"Branch"},{value:"Adjust",label:"Adjust"},{value:"Singular",label:"Singular"},{value:"AppMetrica",label:"AppMetrica"}],platform:[{value:"1",label:"Android"},{value:"2",label:"iOS"}]},list:[],pagination:{pageSizes:["20","50","100","500","1000"],total:1,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const J=()=>{q.useData=C.cloneDeep(q.searchForm),I()},W=async(a,e)=>{let l;"status"===e&&(l=await V({id:a.id,[e]:a[e]})),"pmt"===e&&(l=await x({id:a.id,[e]:a[e]})),"android_semi_pmt"===e&&(l=await k({id:a.id,[e]:a[e]})),A(l)},G=()=>{U("/adnetwork/adnetworklist/create")},H=a=>`/adnetwork/adnetworklist/edit/${a.id}`,I=async()=>{q.loading=!0;let a={page:q.pagination.listQuery.page,page_size:q.pagination.listQuery.limit};a={...a,...q.useData};const e=await j(a),{data:l}=e;q.list=null==l?void 0:l.data,q.pagination.total=Number(l.count),q.loading=!1},K=a=>{let e=JSON.parse(a);return Object.entries(e)};return t((()=>{J()})),i((()=>{})),(a,e)=>{const l=n("el-button"),t=n("el-input"),i=n("el-form-item"),h=n("el-form"),V=n("el-table-column"),x=n("el-switch"),k=n("el-table"),j=o("loading");return r(),s("div",null,[d("div",F,[d("div",S,[p(l,{type:"primary",onClick:G},{default:u((()=>[D])),_:1})]),p(h,{modelValue:c(q).searchForm,"onUpdate:modelValue":e[1]||(e[1]=a=>c(q).searchForm=a),inline:!0,class:"flex jc-between ai-end"},{default:u((()=>[d("div",N,[p(i,{label:"",class:"mr-0"},{default:u((()=>[p(t,{modelValue:c(q).searchForm.input,"onUpdate:modelValue":e[0]||(e[0]=a=>c(q).searchForm.input=a),placeholder:"Ad network name/Channel",class:"input-with-select",style:{width:"200px"}},{append:u((()=>[p(l,{icon:"Search",onClick:J})])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["modelValue"])]),m(" table "),g((r(),b(k,{center:"",data:c(q).list,class:"w100",border:""},{default:u((()=>[p(V,{fixed:"",prop:"name",label:"Ad network name",align:"center",width:"120",sortable:""}),p(V,{fixed:"",prop:"short_name",label:"Channel",align:"center",width:"60",sortable:""}),p(V,{prop:"status",label:"Status",align:"center",width:"110",sortable:""},{default:u((a=>[d("div",P,[p(x,{modelValue:a.row.status,"onUpdate:modelValue":e=>a.row.status=e,"active-value":1,"inactive-value":2,onChange:e=>W(a.row,"status")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),p(V,{prop:"pmt",label:"Android-PMT",align:"center",sortable:""},{default:u((a=>[d("div",Q,[p(x,{modelValue:a.row.pmt,"onUpdate:modelValue":e=>a.row.pmt=e,"active-value":1,"inactive-value":2,onChange:e=>W(a.row,"pmt")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),p(V,{prop:"android_semi_pmt",label:"Android Semi PMT",align:"center",width:"80",sortable:""},{default:u((a=>[d("div",z,[p(x,{modelValue:a.row.android_semi_pmt,"onUpdate:modelValue":e=>a.row.android_semi_pmt=e,"active-value":1,"inactive-value":2,onChange:e=>W(a.row,"android_semi_pmt")},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1}),p(V,{prop:"traffic_rate",label:"Percentage",align:"center",width:"160",sortable:""},{default:u((a=>[(r(!0),s(w,null,f(K(a.row.traffic_rate),(a=>(r(),s("span",null,[d("span",null,_(a[0]),1),M,d("span",null,_(a[1]),1),O])))),256))])),_:1}),p(V,{prop:"pre_click_rate",label:"Pre click",align:"center",width:"160",sortable:""},{default:u((a=>[(r(!0),s(w,null,f(K(a.row.pre_click_rate),(a=>(r(),s("span",null,[d("span",null,_(a[0]),1),B,d("span",null,_(a[1]),1),E])))),256))])),_:1}),p(V,{label:"Operation",align:"center"},{default:u((a=>[d("div",$,[m(' <router-link :to="getEditUrl(scope.row)">\n              <el-button\n                class="cp mr-10"\n                type="primary"\n                icon="Edit"\n                circle\n              ></el-button>\n            </router-link> '),p(l,{class:"cp mr-10",type:"primary",icon:"Edit",circle:"",onClick:e=>(a=>{let e=H(a);U(e)})(a.row)},null,8,["onClick"])])])),_:1})])),_:1},8,["data"])),[[j,c(q).loading]]),m(" 分页 "),d("div",T,[g(p(c(y),{page:c(q).pagination.listQuery.page,"onUpdate:page":e[2]||(e[2]=a=>c(q).pagination.listQuery.page=a),limit:c(q).pagination.listQuery.limit,"onUpdate:limit":e[3]||(e[3]=a=>c(q).pagination.listQuery.limit=a),total:c(q).pagination.total,"page-sizes":c(q).pagination.pageSizes,onPagination:I},null,8,["page","limit","total","page-sizes"]),[[v,c(q).pagination.total]])])])}}});export{J as default};
