import{_ as e,d as a,h as l,$ as t,r as s,L as o,q as r,a0 as i,c as d,x as n,e as p,v as u,s as c,z as m,U as b,A as _,a9 as v,V as f,K as g,o as y,N as h,O as w,f as V,y as k}from"./main-ce43ffdd.js";import{u as x,s as F}from"./useUtils-d1805f03.js";import{P as j}from"./index-2d86919d.js";import{m as U}from"./message-1c1d9ef1.js";import{_ as C}from"./lodash-6b3789ad.js";import{h as S,g as Q}from"./new-format-368dcfb0.js";import{c as q}from"./clipboard-c9959b6b.js";import{A as z,a as D,b as A}from"./dsp-adcontrol-f55c30d2.js";import{_ as $}from"./index-1ba4ede6.js";import"./clipboard-polyfill.text.esm-fc4f7791.js";import"./format-00f0450d.js";import"./moment-56f006b0.js";import"./dsp-advertiser-ecff19f5.js";import"./dsp-5d727e95.js";const I={class:"controlBox w100 mb-10"},N={class:"flex jc-start flex-wrap w100"},O={class:"flex"},P={class:"flex"},R={class:"mb-10 w100"},T=["onClick"],B=["onClick"],E={class:"flex jc-around"},K={class:"w100 flex"},L=a({name:"adserieslist"});var G=e(a({...L,setup(e){const a=l(),L=l([{id:""}]),{status:G,adv_type:H,ind_cla:J,third_party:M,return_mode:W}=F,{goNewUrl:X,openAlert:Y}=x(),Z=t({status:"",adv_series_type:"",marbet_target:"",is_del:"1",value_type:"adv_series_name",value:""}),ee=s({adv_id:"",st:"",et:""}),ae=l(!1),le=s({report_api:""});let te=s({dialogVisible:!1,cache:{item:{}},searchForm:Z.value,useData:Z.value,loading:!0,options:{status:G,adv_series_type:[{value:1,label:"动态商品促销"},{value:2,label:"固定链接推广"}],marbet_target:[{value:1,label:"再营销"},{value:2,label:"拉新"}],value_type:[{value:"adv_series_name",label:"广告系列名称"},{value:"ads_id",label:"广告系列ID"},{value:"descs",label:"描述"}]},list:[{id:1}],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}}),se=s({data:{mode:""},options:{mode:[{value:1,label:"开启"},{value:2,label:"暂停"},{value:0,label:"归档"}]}});const oe=e=>{L.value=e},re=async()=>{let e=L.value.map((e=>e.id)),a=se.data.mode;if(a.toString(),a.toString(),"0"===a.toString()){const a=await ne(e);U(a)&&ce()}},ie=()=>{te.useData=C.cloneDeep(te.searchForm),ce()};l([]);const de=()=>{X({url:"/adcontrol/adseries/create",query:{type:"create"}})},ne=async e=>await z({ids:e,is_del:2}),pe=async e=>{Y({text:`确认归档${e.row.adv_series_name}？`,title:"归档操作",buttonText:"确认"},(e=>async()=>{const{row:a,$index:l}=e,t=await ne([a.id]);U(t)&&te.list.splice(l,1)})(e))},ue=e=>{ee.adv_id=e.adv,e.date&&(ee.st=e.date[0],ee.et=e.date[1])},ce=async()=>{te.loading=!0;let e={page:te.pagination.listQuery.page,limit:te.pagination.listQuery.limit,...Z.value,...ee};e[e.value_type]=e.value,delete e.value_type,delete e.value,e=S(e);const a=await D(e);if(a){const{data:e}=a;te.list=null==e?void 0:e.data,te.pagination.total=Number(e.count)}te.loading=!1};return o((()=>{ie()})),(e,l)=>{const t=r("el-option"),s=r("el-select"),o=r("el-form-item"),x=r("el-input"),F=r("el-checkbox"),C=r("el-button"),S=r("el-form"),z=r("el-table-column"),D=r("el-switch"),L=r("el-dialog"),G=i("loading");return y(),d("div",null,[n("div",I,[p(u($),{onUp:ue,arr:["adv","date"]}),p(S,{modelValue:u(te).searchForm,"onUpdate:modelValue":l[6]||(l[6]=e=>u(te).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:c((()=>[n("div",N,[p(o,{label:""},{default:c((()=>[p(s,{modelValue:u(te).searchForm.status,"onUpdate:modelValue":l[0]||(l[0]=e=>u(te).searchForm.status=e),filterable:"",clearable:"",placeholder:"全部状态"},{default:c((()=>[(y(!0),d(h,null,w(u(te).options.status,(e=>(y(),_(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),p(o,{label:""},{default:c((()=>[p(s,{modelValue:u(te).searchForm.adv_series_type,"onUpdate:modelValue":l[1]||(l[1]=e=>u(te).searchForm.adv_series_type=e),filterable:"",clearable:"",placeholder:"广告类型"},{default:c((()=>[(y(!0),d(h,null,w(u(te).options.adv_series_type,(e=>(y(),_(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),p(o,{label:""},{default:c((()=>[p(s,{modelValue:u(te).searchForm.marbet_target,"onUpdate:modelValue":l[2]||(l[2]=e=>u(te).searchForm.marbet_target=e),filterable:"",clearable:"",placeholder:"营销目标"},{default:c((()=>[(y(!0),d(h,null,w(u(te).options.marbet_target,(e=>(y(),_(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),p(o,{label:""},{default:c((()=>[p(x,{modelValue:u(te).searchForm.value,"onUpdate:modelValue":l[4]||(l[4]=e=>u(te).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:c((()=>[p(s,{modelValue:u(te).searchForm.value_type,"onUpdate:modelValue":l[3]||(l[3]=e=>u(te).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:c((()=>[(y(!0),d(h,null,w(u(te).options.value_type,(e=>(y(),_(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),p(o,{label:""},{default:c((()=>[p(F,{modelValue:u(te).searchForm.is_del,"onUpdate:modelValue":l[5]||(l[5]=e=>u(te).searchForm.is_del=e),"true-label":"","false-label":"1",label:"包含已归档"},null,8,["modelValue"])])),_:1})]),n("div",O,[p(o,{class:"mr-0",style:{"margin-right":"0px"}},{default:c((()=>[n("div",P,[p(C,{type:"primary",onClick:ie},{default:c((()=>[V(" 查询 ")])),_:1}),m(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),m(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> '),n("div",R,[p(C,{type:"primary",onClick:de},{default:c((()=>[V("新建广告系列")])),_:1}),p(s,{class:"ml-10",modelValue:u(se).data.mode,"onUpdate:modelValue":l[7]||(l[7]=e=>u(se).data.mode=e),filterable:"",placeholder:"批量操作",onChange:re},{default:c((()=>[(y(!0),d(h,null,w(u(se).options.mode,(e=>(y(),_(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]),m(" table "),b((y(),_(u(v),{ref_key:"multipleTableRef",ref:a,center:"",data:u(te).list,class:"w100",border:"",onSelectionChange:oe},{default:c((()=>[p(z,{align:"center",type:"selection",width:"55"}),p(z,{sortable:"",prop:"id",label:"广告系列ID",align:"center"}),p(z,{sortable:"",width:"120",prop:"adv_series_name",label:"广告系列名称",align:"center"}),p(z,{sortable:"",prop:"status",label:"开关",align:"center"},{default:c((e=>[p(D,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onClick:a=>(async({row:e})=>{let a={id:e.id,status:e.status},l=await A(a);U(l)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),m(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),p(z,{sortable:"",prop:"status",label:"状态",align:"center"},{default:c((e=>[n("span",null,k(u(Q)(e.row.status,u(te).options.status)),1)])),_:1}),p(z,{sortable:"",prop:"ad_group",label:"广告组",align:"center"},{default:c((e=>[m(" <span>{{scope.row.ad_group}}</span> "),n("span",{class:"color_primary cp",onClick:a=>(({row:e})=>{X({url:"/adcontrol/adgroup/list",query:{adseries:e.id,type:"list"}})})(e)},k(e.row.ad_group?e.row.ad_group.length:0),9,T)])),_:1}),p(z,{sortable:"",prop:"ad",label:"广告",align:"center"},{default:c((e=>[m(" <span>{{scope.row.ad}}</span> "),n("span",{class:"color_primary cp",onClick:a=>(({row:e})=>{X({url:"/adcontrol/ad/list",query:{adseries:e.id,type:"list"}})})(e)},k(e.row.ad?e.row.ad.length:0),9,B)])),_:1}),p(z,{width:"200",label:"操作",align:"center"},{default:c((e=>[n("div",E,[p(C,{class:"cp",type:"primary",onClick:a=>(({row:e})=>{const{id:a}=e;X({url:`/adcontrol/adseries/edit/${a}`,query:{type:"edit"}})})(e)},{default:c((()=>[V("编辑")])),_:2},1032,["onClick"]),p(C,{class:"cp",type:"primary"},{default:c((()=>[V("复制")])),_:1}),m(' <el-button\n              v-if="scope.row.is_del === 2"\n              class="cp"\n              type="default"\n              @click="editFn(scope)"\n            >查看</el-button> '),p(C,{class:"cp",type:"danger",onClick:a=>pe(e),disabled:2===e.row.is_del},{default:c((()=>[V("归档")])),_:2},1032,["onClick","disabled"])])])),_:1}),p(z,{sortable:"",width:"120",prop:"adv_series_type",label:"广告类型",align:"center"},{default:c((e=>[n("span",null,k(u(Q)(e.row.adv_series_type,u(te).options.adv_series_type)),1)])),_:1}),p(z,{sortable:"",width:"120",prop:"marbet_target",label:"营销目标",align:"center"},{default:c((e=>[n("span",null,k(u(Q)(e.row.marbet_target,u(te).options.marbet_target)),1)])),_:1}),p(z,{sortable:"",width:"120",prop:"create_email",label:"创建人",align:"center"}),p(z,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),p(z,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"}),p(z,{sortable:"",width:"160",prop:"imp_number",label:"展示数",align:"center"})])),_:1},8,["data"])),[[G,u(te).loading]]),m(" 分页 "),n("div",K,[b(p(j,{page:u(te).pagination.listQuery.page,"onUpdate:page":l[8]||(l[8]=e=>u(te).pagination.listQuery.page=e),limit:u(te).pagination.listQuery.limit,"onUpdate:limit":l[9]||(l[9]=e=>u(te).pagination.listQuery.limit=e),total:u(te).pagination.total,"page-sizes":u(te).pagination.pageSizes,onPagination:ce},null,8,["page","limit","total","page-sizes"]),[[f,u(te).pagination.total]])]),m(" 复制 "),p(L,{modelValue:u(ae),"onUpdate:modelValue":l[11]||(l[11]=e=>g(ae)?ae.value=e:null),title:"Report Api",width:"90%"},{default:c((()=>[n("p",null,k(u(le).report_api),1),p(C,{class:"cp mr-10",type:"default",onClick:l[10]||(l[10]=e=>{return a=u(le).report_api,void q(a);var a})},{default:c((()=>[V("复制")])),_:1})])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-18292af0"]]);export{G as default};
