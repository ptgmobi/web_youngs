import{d as t,e,r as a,I as n,a1 as s,w as o,m as u,s as f,n as c,v as r,x as l,q as d,c as i,K as p,b as _}from"./index-b7a8022a.js";import{h as m}from"./buzz-1e423a16.js";const x={class:"w100"},v={class:"flex jc-start"},y=["textContent"],C=_(" % "),b=r("span",null,"-",-1),g=["textContent"],q=_(" % （ "),j=r("span",null,"总设备数:",-1),w=["textContent"],h=_(" ） （ "),F=r("span",null,"选中设备数:",-1),N=["textContent"],V=_(" ） "),k={class:"p0-10"},z=t({props:{query:{require:!0,default:()=>({}),type:Object}},emits:["up"],setup(t,{emit:_}){const z=t;let I=e(0),K=a({cutoff_start:z.query.cutoff_start,cutoff_end:z.query.cutoff_end}),L=K.cutoff_start?100*Number(K.cutoff_start):0,O=K.cutoff_end?100*Number(K.cutoff_end):100,U=e([L,O]);const A=async()=>{const{pkg_name:t,country:e,platform:a}=z.query;if(t&&e&&a){const n={pkg_name:t,country:e,platform:a},s=await(async t=>{const e=await m(t),{data:a}=e;return 0!==a.length?a.findLast((t=>t)).device_num:0})(n);I.value=s}},B=n((()=>{const t=I.value,e=K.cutoff_start?Number(K.cutoff_start):0;return{judge:(((K.cutoff_end?Number(K.cutoff_end):1)-e)*t).toFixed(0),all:t.toFixed(0)}}));s((()=>{A()})),o((()=>z.query),((t,e)=>{void 0!==t.cutoff_start&&void 0!==t.cutoff_end&&(K.cutoff_start=t.cutoff_start,K.cutoff_end=t.cutoff_end)}),{immediate:!0,deep:!0});const D=t=>{var e;e=t,K.cutoff_start=e[0]/100,K.cutoff_end=e[1]/100,_("up",K)};return(t,e)=>{const a=u("el-slider");return f(),c("div",x,[r("div",v,[r("span",{textContent:l((100*d(K).cutoff_start).toFixed(0))},null,8,y),C,b,r("span",{textContent:l((100*d(K).cutoff_end).toFixed(0))},null,8,g),q,j,r("span",{textContent:l(d(B).all)},null,8,w),h,F,r("span",{textContent:l(d(B).judge)},null,8,N),V]),r("div",k,[i(a,{modelValue:d(U),"onUpdate:modelValue":e[0]||(e[0]=t=>p(U)?U.value=t:U=t),class:"device-cutoff",range:"",step:5,"show-stops":!0,"show-input":"",min:0,max:100,onChange:D},null,8,["modelValue"])])])}}});export{z as _};
