import{_ as e,d as a,$ as l,h as t,r as o,L as s,q as i,a0 as r,c as n,x as d,z as p,e as u,s as c,v as m,U as b,A as v,V as _,K as g,o as f,f as y,N as h,O as w,y as V}from"./main-0a777472.js";import{u as k,s as F}from"./useUtils-9816d64a.js";import{P as x}from"./index-2575c6ed.js";import{m as U}from"./message-d6ce123e.js";import{_ as j}from"./lodash-4786ff9c.js";import{h as C,g as z}from"./new-format-7f959bed.js";import{c as Q}from"./clipboard-4e200ba9.js";import{A as D,a as A}from"./dsp-advertiser-4a2a0a9c.js";import"./clipboard-polyfill.text.esm-fc4f7791.js";const S={class:"controlBox w100 mb-10"},q={class:"mb-10 w100"},I={class:"flex jc-start flex-wrap w100"},N={class:"flex"},O={class:"flex"},$=["src"],L={class:"flex jc-around"},P={class:"w100 flex"},B=a({name:"demandlist"});var E=e(a({...B,setup(e){const{status:a,adv_type:B,ind_cla:E,third_party:K,return_mode:R}=F,{goNewUrl:G,openAlert:H}=k(),J=l({status:"",adv_type:"",value_type:"name",value:"",is_del:"1"}),M=t(!1),T=o({report_api:""});let W=o({dialogVisible:!1,cache:{item:{}},searchForm:J.value,useData:J.value,loading:!0,options:{status:a,adv_type:B,ind_cla:E,third_party:K,return_mode:R,value_type:[{value:"id",label:"广告主ID"},{value:"name",label:"广告主名称"},{value:"descs",label:"描述"}]},list:[],pagination:{pageSizes:[20,50,100,500,1e3],total:1,listQuery:{page:1,limit:50,importance:void 0,title:void 0,type:void 0,sort:"+id"}}});const X=()=>{W.useData=j.cloneDeep(W.searchForm),ee()};t([]);const Y=()=>{G({url:"/advertiser/create",query:{type:"create"}})},Z=({row:e})=>{const{id:a}=e;G({url:`/advertiser/edit/${a}`,query:{type:"edit"}})},ee=async()=>{W.loading=!0;let e={page:W.pagination.listQuery.page,limit:W.pagination.listQuery.limit,...J.value};e[e.value_type]=e.value,delete e.value_type,delete e.value,e=C(e);const a=await D(e),{data:l}=a;W.list=null==l?void 0:l.data,W.pagination.total=Number(l.count),W.loading=!1};return s((()=>{X()})),(e,a)=>{const l=i("el-button"),t=i("el-option"),o=i("el-select"),s=i("el-form-item"),k=i("el-input"),F=i("el-form"),j=i("el-table-column"),C=i("el-switch"),D=i("el-table"),B=i("el-dialog"),E=r("loading");return f(),n("div",null,[d("div",S,[d("div",q,[p(" <el-button type=\"primary\" @click='createFun'>Offer Create</el-button> "),p(' <router-link to="/buzz/create"> '),u(l,{type:"primary",onClick:Y},{default:c((()=>[y(" 新建广告主 ")])),_:1}),p(" </router-link> ")]),u(F,{modelValue:m(W).searchForm,"onUpdate:modelValue":a[4]||(a[4]=e=>m(W).searchForm=e),inline:!0,class:"flex jc-between w100 ai-end"},{default:c((()=>[d("div",I,[u(s,{label:""},{default:c((()=>[u(o,{modelValue:m(W).searchForm.status,"onUpdate:modelValue":a[0]||(a[0]=e=>m(W).searchForm.status=e),filterable:"",clearable:"",placeholder:"全部状态"},{default:c((()=>[(f(!0),n(h,null,w(m(W).options.status,(e=>(f(),v(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(s,{label:""},{default:c((()=>[u(o,{modelValue:m(W).searchForm.adv_type,"onUpdate:modelValue":a[1]||(a[1]=e=>m(W).searchForm.adv_type=e),filterable:"",clearable:"",placeholder:"广告主类型"},{default:c((()=>[(f(!0),n(h,null,w(m(W).options.adv_type,(e=>(f(),v(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(s,{label:""},{default:c((()=>[u(k,{modelValue:m(W).searchForm.value,"onUpdate:modelValue":a[3]||(a[3]=e=>m(W).searchForm.value=e),placeholder:"请输入",class:"input-with-select"},{prepend:c((()=>[u(o,{modelValue:m(W).searchForm.value_type,"onUpdate:modelValue":a[2]||(a[2]=e=>m(W).searchForm.value_type=e),placeholder:"",class:"search-input-select",style:{width:"120px"}},{default:c((()=>[(f(!0),n(h,null,w(m(W).options.value_type,(e=>(f(),v(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})]),d("div",N,[u(s,{class:"mr-0",style:{"margin-right":"0px"}},{default:c((()=>[d("div",O,[u(l,{type:"primary",onClick:X},{default:c((()=>[y(" 查询 ")])),_:1}),p(' <el-button type="primary" @click="handleExportSearch">导出</el-button> ')])])),_:1})])])),_:1},8,["modelValue"]),p(' <el-input placeholder="请输入内容" v-model="state.searchForm.data" class=\'search-input\'>\n        <el-button slot="append" icon="Search" @click=\'searchFun\'></el-button>\n      </el-input> ')]),p(" table "),b((f(),v(D,{center:"",data:m(W).list,class:"w100",border:""},{default:c((()=>[u(j,{sortable:"",prop:"adv_id",label:"广告主ID",align:"center"}),u(j,{sortable:"",prop:"logo",label:"广告主Logo",align:"center"},{default:c((e=>[d("img",{class:"logo-img",src:e.row.logo,alt:""},null,8,$)])),_:1}),u(j,{sortable:"",width:"120",prop:"name",label:"广告主名称",align:"center"}),u(j,{sortable:"",prop:"status",label:"开关",align:"center"},{default:c((e=>[u(C,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"active-value":1,"inactive-value":2,onClick:a=>(async({row:e})=>{let a={id:e.id,status:e.status},l=await A(a);U(l)})(e)},null,8,["modelValue","onUpdate:modelValue","onClick"]),p(" <span>{{getOptionsValue(scope.row.status, state.options.status)}}</span> ")])),_:1}),u(j,{sortable:"",width:"120",prop:"adv_type",label:"广告主类型",align:"center"},{default:c((e=>[d("span",null,V(m(z)(e.row.adv_type,m(W).options.adv_type)),1)])),_:1}),u(j,{sortable:"",width:"120",prop:"adv_address",label:"广告主地址",align:"center"}),u(j,{sortable:"",width:"120",prop:"spend_limit",label:"日花费上限($)",align:"center"}),u(j,{sortable:"",width:"120",prop:"flow_rate",label:"强制流量占比(%)",align:"center"}),u(j,{sortable:"",width:"120",prop:"ind_cla",label:"广告主分类",align:"center"},{default:c((e=>[d("span",null,V(m(z)(e.row.ind_cla,m(W).options.ind_cla)),1)])),_:1}),u(j,{sortable:"",width:"120",prop:"create_email",label:"创建人",align:"center"}),u(j,{width:"200",label:"操作",align:"center"},{default:c((e=>[d("div",L,[u(l,{class:"cp",type:"primary",onClick:a=>Z(e)},{default:c((()=>[y("编辑")])),_:2},1032,["onClick"]),2===e.row.is_del?(f(),v(l,{key:0,class:"cp",type:"default",onClick:a=>Z(e)},{default:c((()=>[y("查看")])),_:2},1032,["onClick"])):p("v-if",!0),p(' <el-button\n              class="cp"\n              type="danger"\n              @click="deleteFn(scope)"\n              :disabled="scope.row.is_del === 2"\n            >归档</el-button> ')])])),_:1}),u(j,{sortable:"",width:"160",prop:"create_date",label:"创建时间",align:"center"}),u(j,{sortable:"",width:"160",prop:"update_date",label:"更新时间",align:"center"})])),_:1},8,["data"])),[[E,m(W).loading]]),p(" 分页 "),d("div",P,[b(u(x,{page:m(W).pagination.listQuery.page,"onUpdate:page":a[5]||(a[5]=e=>m(W).pagination.listQuery.page=e),limit:m(W).pagination.listQuery.limit,"onUpdate:limit":a[6]||(a[6]=e=>m(W).pagination.listQuery.limit=e),total:m(W).pagination.total,"page-sizes":m(W).pagination.pageSizes,onPagination:ee},null,8,["page","limit","total","page-sizes"]),[[_,m(W).pagination.total]])]),p(" report api "),u(B,{modelValue:m(M),"onUpdate:modelValue":a[8]||(a[8]=e=>g(M)?M.value=e:null),title:"Report Api",width:"90%"},{default:c((()=>[d("p",null,V(m(T).report_api),1),u(l,{class:"cp mr-10",type:"default",onClick:a[7]||(a[7]=e=>{return a=m(T).report_api,void Q(a);var a})},{default:c((()=>[y("复制")])),_:1})])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-a23d5d78"]]);export{E as default};
