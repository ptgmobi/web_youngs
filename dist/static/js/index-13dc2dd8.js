var z=Object.defineProperty,L=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var N=(h,i,t)=>i in h?z(h,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[i]=t,k=(h,i)=>{for(var t in i||(i={}))K.call(i,t)&&N(h,t,i[t]);if(q)for(var t of q(i))H.call(i,t)&&N(h,t,i[t]);return h},T=(h,i)=>L(h,R(i));import{d as V,z as j,C as G,af as J,r as f,o as n,k as d,v as e,x as o,h as p,j as l,F as E,l as A,i as w,y as Q,ag as W,c as P,w as O,t as x,q as X,s as Z,b as ee}from"./vendor-f1931894.js";import{g as ae,a as te,b as le,c as oe,d as ne,e as se}from"./overview-c783fe23.js";import{_ as re}from"./lodash-43532635.js";import{t as $,g as M,a as ue}from"./format-b76f9697.js";import{h as U}from"./new-format-e3b038cd.js";import{_ as ce}from"./index-4d69c6e7.js";import{_ as de}from"./index-640a0a05.js";import"./moment-1cf83a0b.js";const ie={class:"white-bg control-box flex jc-between ai-start p0-0"},_e={class:"flex jc-start flex-wrap"},pe={class:"flex"},he=Q(" \u67E5\u8BE2 "),ve=V({emits:["emitParent"],setup(h,{emit:i}){const a=j({options:{channel_type:[{value:1,label:"\u4EE3\u7406"},{value:2,label:"API"},{value:3,label:"\u76F4\u5BA2"},{value:6,label:"Yohoads"}],platform:[{value:1,label:"Android"},{value:2,label:"iOS"}],country:[{value:"",label:""}],channel:[{label:"",value:""}],pkg:[{value:"",label:""}]},data:{channel_type:"",platform:"",channel:"",country:"",pkg:""}}),B=async()=>{const C=await Promise.all([await ae(),te(),le()]),[v,g,D]=C;a.options.country=v.data,a.options.channel=g.data,a.options.pkg=D.data},b=()=>{},r=()=>{},s=()=>{},m=()=>{},u=()=>{},y=()=>{console.warn("set search data"),i("emitParent",re.cloneDeep(W(a.data)))};return G(()=>{console.log("onMounted"),B(),y()}),J(()=>{console.log("onActivated"),B(),y()}),(C,v)=>{const g=f("el-option"),D=f("el-select"),_=f("el-form-item"),F=f("el-button"),I=f("el-form");return n(),d("div",null,[e("div",ie,[o(I,{inline:!0,model:l(a).data,class:"flex jc-between ai-start w100"},{default:p(()=>[e("div",_e,[o(_,{label:"\u5E7F\u544A\u4E3B\u7C7B\u578B"},{default:p(()=>[o(D,{modelValue:l(a).data.channel_type,"onUpdate:modelValue":v[0]||(v[0]=c=>l(a).data.channel_type=c),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",onChange:b},{default:p(()=>[(n(!0),d(E,null,A(l(a).options.channel_type,c=>(n(),P(g,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(_,{label:"\u5E73\u53F0"},{default:p(()=>[o(D,{modelValue:l(a).data.platform,"onUpdate:modelValue":v[1]||(v[1]=c=>l(a).data.platform=c),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:r},{default:p(()=>[w(` <div class="flex jc-between p10 pt-0">
                <el-button type="primary" plain size="mini" @click="selectAllProduct()">\u5168\u9009</el-button>
                <el-button size="mini" type="danger" plain @click="unSelectedAllProduct()">\u6E05\u7A7A</el-button>
              </div> `),(n(!0),d(E,null,A(l(a).options.platform,(c,Y)=>(n(),P(g,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(_,{label:"\u56FD\u5BB6"},{default:p(()=>[o(D,{modelValue:l(a).data.country,"onUpdate:modelValue":v[2]||(v[2]=c=>l(a).data.country=c),class:"search-con",clearable:"",placeholder:"\u641C\u7D22",filterable:"",onChange:s},{default:p(()=>[(n(!0),d(E,null,A(l(a).options.country,(c,Y)=>(n(),P(g,{key:c.toString(),label:c.toString(),value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(_,{label:"Channel"},{default:p(()=>[o(D,{modelValue:l(a).data.channel,"onUpdate:modelValue":v[3]||(v[3]=c=>l(a).data.channel=c),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:m},{default:p(()=>[(n(!0),d(E,null,A(l(a).options.channel,(c,Y)=>(n(),P(g,{key:c.toString(),label:c.toString(),value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(_,{label:"Pkg"},{default:p(()=>[o(D,{modelValue:l(a).data.pkg,"onUpdate:modelValue":v[4]||(v[4]=c=>l(a).data.pkg=c),class:"search-con",clearable:"",placeholder:"\u641C\u7D22","collapse-tags":"",filterable:"",onChange:u},{default:p(()=>[(n(!0),d(E,null,A(l(a).options.pkg,(c,Y)=>(n(),P(g,{key:c.toString(),label:c.toString(),value:c},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),e("div",null,[e("div",pe,[o(F,{type:"primary",onClick:y},{default:p(()=>[he]),_:1})])])]),_:1},8,["model"])])])}}});const S=h=>(X("data-v-7f4b3e65"),h=h(),Z(),h),me={class:"flex flex-wrap jc-between"},be={class:"card-header"},ge={key:0},fe={class:"mt-10 mb-10"},ye={key:0},xe={key:1},we={class:"valueBox"},De={class:"value-box"},Be=S(()=>e("span",null,"\u65E5\u73AF\u6BD4:",-1)),Fe={class:"value-right"},ke={key:0},Ce={key:1},je={key:2},Se={class:"value-val"},Ve={class:"valueBox"},Ee={class:"value-box"},Ae=S(()=>e("span",null,"\u5468\u540C\u6BD4:",-1)),Pe={class:"value-right"},$e={key:0},Oe={key:1},Me={key:2},Ye={class:"value-val"},Te={class:"valueBox"},Ue={class:"value-box"},qe=S(()=>e("span",null,"7\u65E5\u5747:",-1)),Ne={key:0},Ge={key:1},Ie={class:"valueBox"},ze={class:"value-box"},Le=S(()=>e("span",null,"30\u65E5\u5747:",-1)),Re={key:0},Ke={key:1},He={key:1},Je=S(()=>e("div",{class:"mt-10 mb-10",style:{height:"21px"}},null,-1)),Qe={class:"valueBox"},We={class:"value-box"},Xe=S(()=>e("span",null,"\u6536\u5165:",-1)),Ze={class:"value-right"},ea={class:"value-val"},aa={class:"valueBox"},ta={class:"value-box"},la=S(()=>e("span",null,"\u652F\u51FA:",-1)),oa={class:"value-right"},na={class:"value-val"},sa={class:"valueBox"},ra={class:"value-box"},ua=S(()=>e("span",null,"\u6BDB\u5229:",-1)),ca={class:"value-right"},da={class:"value-val"},ia={class:"valueBox"},_a={class:"value-box"},pa=S(()=>e("span",null,"\u65E5\u5747\u6BDB\u5229:",-1)),ha={class:"value-right"},va={class:"value-val"},ma=V({props:{json:{require:!0,default:()=>({}),type:Object}},setup(h){const i=h,t=["yesterday_revenue","yesterday_gross_profit","yesterday_gross_margin"],a=["accumulated_month","accumulated_quarter"],B={yesterday_revenue:"\u6628\u65E5\u6536\u5165",yesterday_gross_profit:"\u6628\u65E5\u6BDB\u5229",yesterday_gross_margin:"\u6628\u65E5\u6BDB\u5229\u7387",accumulated_month:"\u672C\u6708\u7D2F\u8BA1",accumulated_quarter:"\u672C\u5B63\u5EA6\u7D2F\u8BA1"},b={},r=j({baseData:i.json,data:b,titleMap:B,titleGroup:t,titleGroup1:a}),s=u=>{let y=Math.abs(u)*100;return`${$(y,2)}%`},m=async()=>{r.data=[];let u=k({},r.baseData.data);delete u.date,u=U(u);const{data:y}=await oe(u);r.data=y};return O(()=>r.baseData,(u,y)=>{console.warn("get card data"),m()},{deep:!0}),G(()=>{}),(u,y)=>{const C=f("caret-bottom"),v=f("el-icon"),g=f("caret-top"),D=f("el-card");return n(),d("div",null,[e("div",me,[(n(!0),d(E,null,A(l(r).data,(_,F)=>(n(),P(D,{class:"box-card m10"},{header:p(()=>[e("div",be,[e("h3",null,x(l(r).titleMap[F]),1)])]),default:p(()=>[e("div",null,[l(r).titleGroup.includes(F.toString())?(n(),d("div",ge,[e("h4",null,x(_.date),1),e("div",fe,[w(` <h2 v-if="item.hasOwnProperty('revenue')">$ {{item.revenue}}</h2>
              <h2 v-if="item.hasOwnProperty('rate')">{{item.rate * 100}} %</h2> `),F.toString()!=="yesterday_gross_margin"?(n(),d("h2",ye," $ "+x(_.revenue),1)):w("v-if",!0),F.toString()==="yesterday_gross_margin"?(n(),d("h2",xe,x(l($)(_.revenue*100,2))+" % ",1)):w("v-if",!0)]),e("div",we,[e("div",De,[Be,e("span",Fe,[_.dod<0?(n(),d("span",ke,[o(v,{class:"el-svg-icon color_down"},{default:p(()=>[o(C)]),_:1})])):w("v-if",!0),_.dod>0?(n(),d("span",Ce,[o(v,{class:"el-svg-icon color_up"},{default:p(()=>[o(g)]),_:1})])):(n(),d("span",je)),e("span",Se,x(s(_.dod)),1)])])]),e("div",Ve,[e("div",Ee,[Ae,e("span",Pe,[_.wow<0?(n(),d("span",$e,[o(v,{class:"el-svg-icon color_down"},{default:p(()=>[o(C)]),_:1})])):w("v-if",!0),_.wow>0?(n(),d("span",Oe,[o(v,{class:"el-svg-icon color_up"},{default:p(()=>[o(g)]),_:1})])):(n(),d("span",Me)),e("span",Ye,x(s(_.wow)),1)])])]),e("div",Te,[e("div",Ue,[qe,F.toString()!=="yesterday_gross_margin"?(n(),d("span",Ne,x(_.d7),1)):w("v-if",!0),F.toString()==="yesterday_gross_margin"?(n(),d("span",Ge,x(s(_.d7)),1)):w("v-if",!0)])]),e("div",Ie,[e("div",ze,[Le,F.toString()!=="yesterday_gross_margin"?(n(),d("span",Re,x(_.d30),1)):w("v-if",!0),F.toString()==="yesterday_gross_margin"?(n(),d("span",Ke,x(s(_.d30)),1)):w("v-if",!0)])])])):w("v-if",!0),l(r).titleGroup1.includes(F.toString())?(n(),d("div",He,[e("h4",null,x(_.date),1),Je,e("div",Qe,[e("div",We,[Xe,e("span",Ze,[e("span",ea,x(_.revenue),1)])])]),e("div",aa,[e("div",ta,[la,e("span",oa,[e("span",na,x(_.cost),1)])])]),e("div",sa,[e("div",ra,[ua,e("span",ca,[e("span",da,x(_.profit),1)])])]),e("div",ia,[e("div",_a,[pa,e("span",ha,[e("span",va,x(_.avg_profit),1)])])])])):w("v-if",!0)])]),_:2},1024))),256))])])}}});var ba=ce(ma,[["__scopeId","data-v-7f4b3e65"]]);const ga=V({props:{json:{require:!0,default:{},type:Object}},setup(h){const i=h,t=j({data:{target:5},options:{target:[{value:1,label:"\u8F6C\u5316"},{value:2,label:"\u5355\u4EF7"},{value:3,label:"\u6536\u5165"},{value:4,label:"\u652F\u51FA"},{value:5,label:"\u6BDB\u5229"},{value:6,label:"\u6BDB\u5229\u7387(\u5355\u4F4D\u4E3A%)"}]}}),a=j({data:i.json,chartData:{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{show:!0,backgroundColor:"#6a7985"}}},legend:{show:!0,data:["all"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"",type:"line",stack:"Total",emphasis:{focus:"series"},data:[]}]}});O(()=>a.data,(s,m)=>{console.warn("get chart data"),r()},{deep:!0});const B=()=>{var m;let s=t.options.target.find(u=>u.value===t.data.target);return(m=s==null?void 0:s.label)!=null?m:"test"},b=["6"],r=async()=>{var C,v;let s=T(k({},a.data.data),{target:t.data.target});s=U(s),a.chartData.xAxis[0].data=[],a.chartData.series[0].data=[];const m=B();a.chartData.legend.data=[m],a.chartData.series[0].name=m;const{data:u}=await ne(s);a.chartData.xAxis[0].data=(C=u==null?void 0:u.date)!=null?C:[];let y=(v=u==null?void 0:u.data)!=null?v:[];if(b.includes(t.data.target.toString())){let g=y.map(D=>$(D*100,2));a.chartData.series[0].data=g}else{let g=y.map(D=>$(D,2));a.chartData.series[0].data=g}};return(s,m)=>{const u=f("el-option"),y=f("el-select"),C=f("el-form-item"),v=f("el-form");return n(),d("div",null,[e("div",null,[o(v,{inline:!0,model:l(t).data,class:"flex jc-between w100"},{default:p(()=>[o(C,{label:"\u6307\u6807"},{default:p(()=>[o(y,{modelValue:l(t).data.target,"onUpdate:modelValue":m[0]||(m[0]=g=>l(t).data.target=g),placeholder:"Select",onChange:r},{default:p(()=>[(n(!0),d(E,null,A(l(t).options.target,g=>(n(),P(u,{key:g.value,label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),e("div",null,[o(l(de),{"chart-data":l(a).chartData},null,8,["chart-data"])])])}}}),fa={class:"control-box mt-20"},ya={class:"flex jc-start"},xa=V({emits:["emitParent"],setup(h,{emit:i}){let t=j({shortcuts:[{text:"\u4ECA\u5929",value:M(0,"day")},{text:"\u6628\u5929",value:()=>ue(1,1,"day")},{text:"\u6700\u8FD17\u5929",value:()=>M(6,"day")},{text:"\u6700\u8FD130\u5929",value:()=>M(29,"day")}],data:{search:{date:M(6,"day")}}});const a=()=>{console.warn("set search date"),i("emitParent",[...t.data.search.date])};return O(()=>t.data.search.date,(B,b)=>{a()},{immediate:!0}),(B,b)=>{const r=f("el-date-picker"),s=f("el-form-item"),m=f("el-form");return n(),d("div",fa,[o(m,{inline:!0,model:l(t).data,class:"flex jc-between"},{default:p(()=>[e("div",ya,[o(s,{label:"\u65E5\u671F\u9009\u62E9"},{default:p(()=>[o(r,{modelValue:l(t).data.search.date,"onUpdate:modelValue":b[0]||(b[0]=u=>l(t).data.search.date=u),class:"mr-10 mb-10",type:"daterange","unlink-panels":"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","range-separator":"\u81F3","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F",shortcuts:l(t).shortcuts,clearable:!1},null,8,["modelValue","shortcuts"])]),_:1})])]),_:1},8,["model"])])}}}),wa={class:"mt-20"},Da=V({props:{json:{require:!0,default:{},type:Object}},setup(h){let t=j({data:h.json,list:[]});O(()=>t.data,(b,r)=>{console.warn("get table data"),a()},{deep:!0});const a=async()=>{let b=k({},t.data.data);b=U(b),t.list=[];const{data:r}=await se(b);t.list=r};let B=ee(()=>{let b=[];return t.list.map(r=>{let s={},m=k({},r);for(const u in m)if(Object.prototype.hasOwnProperty.call(m,u)){const y=m[u];u.includes("rate")?s[u]=`${$(y*100,2)}%`:s[u]=$(y,2)}b.push(s)}),b});return(b,r)=>{const s=f("el-table-column"),m=f("el-table");return n(),d("div",wa,[w(" table "),o(m,{center:"",data:l(B),class:"w100",height:"87vh",border:""},{default:p(()=>[o(s,{fixed:"",prop:"date",label:"\u65E5\u671F",align:"center"}),w(` <el-table-column fixed prop="type" label="\u5E7F\u544A\u4E3B\u7C7B\u578B" align="center"></el-table-column>
      <el-table-column prop="channel" label="Channel" align="center"></el-table-column>
      <el-table-column prop="platform" label="\u5E73\u53F0" align="center"></el-table-column>
      <el-table-column prop="country" label="\u56FD\u5BB6" align="center"></el-table-column>
      <el-table-column prop="pkg" label="Pkg" align="center"></el-table-column> `),o(s,{prop:"conversion",label:"\u8F6C\u5316\u6570",align:"center"}),o(s,{prop:"revenue",label:"\u6536\u5165",align:"center"}),o(s,{prop:"cost",label:"\u652F\u51FA",align:"center"}),o(s,{prop:"profit",label:"\u6BDB\u5229",align:"center"}),o(s,{prop:"profit_rate",label:"\u6BDB\u5229\u7387",align:"center"})]),_:1},8,["data"])])}}}),Ba={class:"app-container"},Fa=V({name:"Overview"}),Oa=V(T(k({},Fa),{setup(h){let i=j({data:{channel_type:[],platform:[],channel:[],country:[],pkg:[],st:"",et:""}}),t=j({data:{channel_type:[],platform:[],channel:[],country:[],pkg:[]}}),a=j({data:{st:"",et:""}});const B=r=>{console.log(r),t.data=k({},r),i.data=k(k({},t.data),a.data)},b=r=>{console.log(r),a.data={st:r[0],et:r[1]},i.data=k(k({},t.data),a.data)};return(r,s)=>(n(),d("div",Ba,[o(l(ve),{onEmitParent:B}),o(l(ba),{json:l(t)},null,8,["json"]),o(l(xa),{onEmitParent:b}),o(l(ga),{json:l(i)},null,8,["json"]),o(l(Da),{json:l(i)},null,8,["json"])]))}}));export{Oa as default};
